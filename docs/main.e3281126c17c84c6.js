"use strict";(self.webpackChunksudoku_app=self.webpackChunksudoku_app||[]).push([[179],{3692:(le,k,E)=>{E.d(k,{Ot:()=>z,ZF:()=>we,hX:()=>ye,z6:()=>O});var m=E(5867),M=E(4650),F=E(6351);class z{constructor(Se){return Se}}class O{constructor(){return(0,m.C6)()}}const Q=new M.OlP("angularfire2._apps"),K={provide:z,useFactory:function ee(Pe){return Pe&&1===Pe.length?Pe[0]:new z((0,m.Mq)())},deps:[[new M.FiY,Q]]},G={provide:O,deps:[[new M.FiY,Q]]};function H(Pe){return(Se,Le)=>{const nt=Se.runOutsideAngular(()=>Pe(Le));return new z(nt)}}let te=(()=>{class Pe{constructor(Le){(0,m.KN)("angularfire",F.q4.full,"core"),(0,m.KN)("angularfire",F.q4.full,"app"),(0,m.KN)("angular",M.q4F.full,Le.toString())}}return Pe.\u0275fac=function(Le){return new(Le||Pe)(M.LFG(M.Lbi))},Pe.\u0275mod=M.oAB({type:Pe}),Pe.\u0275inj=M.cJS({providers:[K,G]}),Pe})();function ye(Pe,...Se){return{ngModule:te,providers:[{provide:Q,useFactory:H(Pe),multi:!0,deps:[M.R0b,M.zs3,F.HU,...Se]}]}}const we=(0,F.u3)(m.ZF,!0)},7332:(le,k,E)=>{E.d(k,{gg:()=>nI,JU:()=>MC,ST:()=>xC,ad:()=>RC,cf:()=>OC,Cm:()=>AC,pl:()=>PC});var m=E(6351),M=E(4650),F=E(3692),z=E(5867),O=E(5861),W=E(2090),ee=E(9681),Q=E(1877),K=E(655),G=E(4859);const We=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new Q.Yd("@firebase/auth");function Le(n,...e){Se.logLevel<=Q.in.ERROR&&Se.error(`Auth (${ee.Jn}): ${n}`,...e)}function nt(n,...e){throw pe(n,...e)}function _t(n,...e){return pe(n,...e)}function Be(n,e,t){const i=Object.assign(Object.assign({},We()),{[e]:t});return new W.LL("auth","Firebase",i).create(e,{appName:n.name})}function pe(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ot.create(n,...e)}function ne(n,e,...t){if(!n)throw pe(e,...t)}function Ae(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Le(e),new Error(e)}function _e(n,e){n||Ae(e)}const Ze=new Map;function Xe(n){_e(n instanceof Function,"Expected a class definition");let e=Ze.get(n);return e?(_e(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ze.set(n,e),e)}function dn(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Qt{constructor(e,t){this.shortDelay=e,this.longDelay=t,_e(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function Sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function at(){return"http:"===dn()||"https:"===dn()}()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class sn{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Br={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yr=new Qt(3e4,6e4);function pn(n,e,t,i){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(n,e,t,i,a={}){return xr(n,a,(0,O.Z)(function*(){let c={},h={};i&&("GET"===e?h=i:c={body:JSON.stringify(i)});const g=(0,W.xO)(Object.assign({key:n.config.apiKey},h)).slice(1),T=yield n._getAdditionalHeaders();return T["Content-Type"]="application/json",n.languageCode&&(T["X-Firebase-Locale"]=n.languageCode),sn.fetch()(gn(n,n.config.apiHost,t,g),Object.assign({method:e,headers:T,referrerPolicy:"no-referrer"},c))}))})).apply(this,arguments)}function xr(n,e,t){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Br),e);try{const a=new rt(n),c=yield Promise.race([t(),a.promise]);a.clearNetworkTimeout();const h=yield c.json();if("needConfirmation"in h)throw Pn(n,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[T,x]=g.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===T)throw Pn(n,"credential-already-in-use",h);if("EMAIL_EXISTS"===T)throw Pn(n,"email-already-in-use",h);if("USER_DISABLED"===T)throw Pn(n,"user-disabled",h);const j=i[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Be(n,j,x);nt(n,j)}}catch(a){if(a instanceof W.ZR)throw a;nt(n,"network-request-failed")}})).apply(this,arguments)}function gn(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?function Ct(n,e){_e(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,a):`${n.config.apiScheme}://${a}`}class rt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_t(this.auth,"network-request-failed")),yr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pn(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=_t(n,e,i);return a.customData._tokenResponse=t,a}function qn(){return(qn=(0,O.Z)(function*(n,e){return pn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Un(n,e){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(n,e){return pn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function wn(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function tn(){return(tn=(0,O.Z)(function*(n,e=!1){const t=(0,W.m9)(n),i=yield t.getIdToken(e),a=mt(i);ne(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c="object"==typeof a.firebase?a.firebase:void 0,h=c?.sign_in_provider;return{claims:a,token:i,authTime:wn(Jn(a.auth_time)),issuedAtTime:wn(Jn(a.iat)),expirationTime:wn(Jn(a.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}})).apply(this,arguments)}function Jn(n){return 1e3*Number(n)}function mt(n){var e;const[t,i,a]=n.split(".");if(void 0===t||void 0===i||void 0===a)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const c=(0,W.tV)(i);return c?JSON.parse(c):(Le("Failed to decode base64 JWT payload"),null)}catch(c){return Le("Caught error parsing JWT payload as JSON",null===(e=c)||void 0===e?void 0:e.toString()),null}}function bt(n,e){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof W.ZR&&In(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})).apply(this,arguments)}function In({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class Rr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const a=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout((0,O.Z)(function*(){yield t.iteration()}),i)}iteration(){var e=this;return(0,O.Z)(function*(){var t;try{yield e.user.getIdToken(!0)}catch(i){return void("auth/network-request-failed"===(null===(t=i)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class Xt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bn(n){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),a=yield bt(n,Un(t,{idToken:i}));ne(a?.users.length,t,"internal-error");const c=a.users[0];n._notifyReloadListener(c);const h=null!==(e=c.providerUserInfo)&&void 0!==e&&e.length?Nt(c.providerUserInfo):[],g=yt(n.providerData,h),j=!!n.isAnonymous&&!(n.email&&c.passwordHash||g?.length),re={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Xt(c.createdAt,c.lastLoginAt),isAnonymous:j};Object.assign(n,re)})).apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(n){const e=(0,W.m9)(n);yield bn(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function yt(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Nt(n){return n.map(e=>{var{providerId:t}=e,i=(0,K._T)(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Vt(){return(Vt=(0,O.Z)(function*(n,e){const t=yield xr(n,{},(0,O.Z)(function*(){const i=(0,W.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=n.config,h=gn(n,a,"/v1/token",`key=${c}`),g=yield n._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(h,{method:"POST",headers:g,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class de{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function er(n){const e=mt(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return(0,O.Z)(function*(){return ne(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return(0,O.Z)(function*(){const{accessToken:a,refreshToken:c,expiresIn:h}=yield function kt(n,e){return Vt.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(a,c,Number(h))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:c}=t,h=new de;return i&&(ne("string"==typeof i,"internal-error",{appName:e}),h.refreshToken=i),a&&(ne("string"==typeof a,"internal-error",{appName:e}),h.accessToken=a),c&&(ne("number"==typeof c,"internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new de,this.toJSON())}_performRefresh(){return Ae("not implemented")}}function se(n,e){ne("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class ge{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,c=(0,K._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Xt(c.createdAt||void 0,c.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,O.Z)(function*(){const i=yield bt(t,t.stsTokenManager.getToken(t.auth,e));return ne(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function St(n){return tn.apply(this,arguments)}(this,e)}reload(){return function lt(n){return He.apply(this,arguments)}(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ge(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return(0,O.Z)(function*(){let a=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),a=!0),t&&(yield bn(i)),yield i.auth._persistUserIfCurrent(i),a&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return(0,O.Z)(function*(){const t=yield e.getIdToken();return yield bt(e,function Ii(n,e){return qn.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,c,h,g,T,x,j;const re=null!==(i=t.displayName)&&void 0!==i?i:void 0,Te=null!==(a=t.email)&&void 0!==a?a:void 0,Ve=null!==(c=t.phoneNumber)&&void 0!==c?c:void 0,qe=null!==(h=t.photoURL)&&void 0!==h?h:void 0,It=null!==(g=t.tenantId)&&void 0!==g?g:void 0,At=null!==(T=t._redirectEventId)&&void 0!==T?T:void 0,Wn=null!==(x=t.createdAt)&&void 0!==x?x:void 0,gr=null!==(j=t.lastLoginAt)&&void 0!==j?j:void 0,{uid:Xn,emailVerified:Ei,isAnonymous:lr,providerData:Kn,stsTokenManager:Fi}=t;ne(Xn&&Fi,e,"internal-error");const Ih=de.fromJSON(this.name,Fi);ne("string"==typeof Xn,e,"internal-error"),se(re,e.name),se(Te,e.name),ne("boolean"==typeof Ei,e,"internal-error"),ne("boolean"==typeof lr,e,"internal-error"),se(Ve,e.name),se(qe,e.name),se(It,e.name),se(At,e.name),se(Wn,e.name),se(gr,e.name);const cb=new ge({uid:Xn,auth:e,email:Te,emailVerified:Ei,displayName:re,isAnonymous:lr,photoURL:qe,phoneNumber:Ve,tenantId:It,stsTokenManager:Ih,createdAt:Wn,lastLoginAt:gr});return Kn&&Array.isArray(Kn)&&(cb.providerData=Kn.map(NC=>Object.assign({},NC))),At&&(cb._redirectEventId=At),cb}static _fromIdTokenResponse(e,t,i=!1){return(0,O.Z)(function*(){const a=new de;a.updateFromServerResponse(t);const c=new ge({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return yield bn(c),c})()}}const De=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.Z)(function*(){return!0})()}_set(t,i){var a=this;return(0,O.Z)(function*(){a.storage[t]=i})()}_get(t){var i=this;return(0,O.Z)(function*(){const a=i.storage[t];return void 0===a?null:a})()}_remove(t){var i=this;return(0,O.Z)(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function st(n,e,t){return`firebase:${n}:${e}:${t}`}class Dt{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:c}=this.auth;this.fullUserKey=st(this.userKey,a.apiKey,c),this.fullPersistenceKey=st("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,O.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ge._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,O.Z)(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return(0,O.Z)(function*(){if(!t.length)return new Dt(Xe(De),e,i);const a=(yield Promise.all(t.map(function(){var x=(0,O.Z)(function*(j){if(yield j._isAvailable())return j});return function(j){return x.apply(this,arguments)}}()))).filter(x=>x);let c=a[0]||Xe(De);const h=st(i,e.config.apiKey,e.name);let g=null;for(const x of t)try{const j=yield x._get(h);if(j){const re=ge._fromJSON(e,j);x!==c&&(g=re),c=x;break}}catch{}const T=a.filter(x=>x._shouldAllowMigration);return c._shouldAllowMigration&&T.length?(c=T[0],g&&(yield c._set(h,g.toJSON())),yield Promise.all(t.map(function(){var x=(0,O.Z)(function*(j){if(j!==c)try{yield j._remove(h)}catch{}});return function(j){return x.apply(this,arguments)}}())),new Dt(c,e,i)):new Dt(c,e,i)})()}}function Jt(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function X(n=(0,W.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function Tn(n=(0,W.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function be(n=(0,W.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function je(n=(0,W.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function nn(n=(0,W.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function ue(n=(0,W.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function Z(n=(0,W.z$)()){return/android/i.test(n)}(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function Zr(n,e=[]){let t;switch(n){case"Browser":t=Jt((0,W.z$)());break;case"Worker":t=`${Jt((0,W.z$)())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ee.Jn}/${i}`}class Qr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((h,g)=>{try{h(e(c))}catch(T){g(T)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,O.Z)(function*(){var i;if(t.auth.currentUser===e)return;const a=[];try{for(const c of t.queue)yield c(e),c.onAbort&&a.push(c.onAbort)}catch(c){a.reverse();for(const h of a)try{h()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(i=c)||void 0===i?void 0:i.message})}})()}}class ps{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yn(this),this.idTokenSubscription=new Yn(this),this.beforeStateQueue=new Qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=Xe(t)),this._initializationPromise=this.queue((0,O.Z)(function*(){var a,c;if(!i._deleted&&(i.persistenceManager=yield Dt.create(i,e),!i._deleted)){if(null!==(a=i._popupRedirectResolver)&&void 0!==a&&a._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(c=i.currentUser)||void 0===c?void 0:c.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,O.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,O.Z)(function*(){var i;const a=yield t.assertedPersistence.getCurrentUser();let c=a,h=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const g=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,T=c?._redirectEventId,x=yield t.tryRedirectSignIn(e);(!g||g===T)&&x?.user&&(c=x.user,h=!0)}if(!c)return t.directlySetCurrentUser(null);if(!c._redirectEventId){if(h)try{yield t.beforeStateQueue.runMiddleware(c)}catch(g){c=a,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(g))}return c?t.reloadAndSetCurrentUserOrClear(c):t.directlySetCurrentUser(null)}return ne(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===c._redirectEventId?t.directlySetCurrentUser(c):t.reloadAndSetCurrentUserOrClear(c)})()}tryRedirectSignIn(e){var t=this;return(0,O.Z)(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,O.Z)(function*(){var i;try{yield bn(e)}catch(a){if("auth/network-request-failed"!==(null===(i=a)||void 0===i?void 0:i.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function qt(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,O.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,O.Z)(function*(){const i=e?(0,W.m9)(e):null;return i&&ne(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return(0,O.Z)(function*(){if(!i._deleted)return e&&ne(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue((0,O.Z)(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,O.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,O.Z)(function*(){yield t.assertedPersistence.setPersistence(Xe(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new W.LL("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return(0,O.Z)(function*(){const a=yield i.getOrInitRedirectPersistenceManager(t);return null===e?a.removeCurrentUser():a.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,O.Z)(function*(){if(!t.redirectPersistenceManager){const i=e&&Xe(e)||t._popupRedirectResolver;ne(i,t,"argument-error"),t.redirectPersistenceManager=yield Dt.create(t,[Xe(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,O.Z)(function*(){var i,a;return t._isInitialized&&(yield t.queue((0,O.Z)(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(a=t.redirectUser)||void 0===a?void 0:a._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,O.Z)(function*(){if(e===t.currentUser)return t.queue((0,O.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const c="function"==typeof t?t:t.next.bind(t),h=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(h,this,"internal-error"),h.then(()=>c(this.currentUser)),"function"==typeof t?e.addObserver(t,i,a):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,O.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,O.Z)(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const a=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return a&&(i["X-Firebase-Client"]=a),i})()}}class Yn{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,W.ne)(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function Ea(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new Qt(3e4,6e4),new Qt(2e3,1e4),new Qt(3e4,6e4),new Qt(5e3,15e3);var dI="@firebase/auth",hI="0.20.10";class gb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,O.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{var a;e((null===(a=i)||void 0===a?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,W.Pz)("authIdTokenMaxAge"),function fI(n){(0,ee.Xd)(new G.wA("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),{apiKey:c,authDomain:h}=i.options;return((g,T)=>{ne(c&&!c.includes(":"),"invalid-api-key",{appName:g.name}),ne(!h?.includes(":"),"argument-error",{appName:g.name});const x={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zr(n)},j=new ps(g,T,x);return function rn(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xe);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}(j,t),j})(i,a)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),(0,ee.Xd)(new G.wA("auth-internal",e=>{const t=function Nn(n){return(0,W.m9)(n)}(e.getProvider("auth").getImmediate());return new gb(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.KN)(dI,hI,function b_(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,ee.KN)(dI,hI,"esm2017")}("Browser");class og{constructor(){return(0,m.vb)("auth")}}const Ph=new Map,MI={activated:!1,tokenObservers:[]},F_={initialized:!1,enabled:!1};function Oi(n){return Ph.get(n)||MI}function qs(n,e){Ph.set(n,e)}function lg(){return F_}class $b{constructor(e,t,i,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,O.Z)(function*(){t.stop();try{t.pending=new W.BH,yield function U_(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new W.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const cs=new W.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hg(n){if(!Oi(n).activated)throw cs.create("use-before-activation",{appName:n.name})}function fg(n,e){return pg.apply(this,arguments)}function pg(){return(pg=(0,O.Z)(function*({url:n,body:e},t){var i,a;const c={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const Ve=yield h.getHeartbeatsHeader();Ve&&(c["X-Firebase-Client"]=Ve)}const g={method:"POST",body:JSON.stringify(e),headers:c};let T,x;try{T=yield fetch(n,g)}catch(Ve){throw cs.create("fetch-network-error",{originalErrorMessage:null===(i=Ve)||void 0===i?void 0:i.message})}if(200!==T.status)throw cs.create("fetch-status-error",{httpStatus:T.status});try{x=yield T.json()}catch(Ve){throw cs.create("fetch-parse-error",{originalErrorMessage:null===(a=Ve)||void 0===a?void 0:a.message})}const j=x.ttl.match(/^([\d.]+)(s)$/);if(!j||!j[2]||isNaN(Number(j[1])))throw cs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${x.ttl}`});const re=1e3*Number(j[1]),Te=Date.now();return{token:x.token,expireTimeMillis:Te+re,issuedAtTimeMillis:Te}})).apply(this,arguments)}function Hb(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Lh="firebase-app-check-store";let yg=null;function NI(){return yg||(yg=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{var c;e(cs.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},i.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(Lh,{keyPath:"compositeKey"})}}catch(i){e(cs.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),yg)}function Fh(){return(Fh=(0,O.Z)(function*(n,e){const i=(yield NI()).transaction(Lh,"readwrite"),c=i.objectStore(Lh).put({compositeKey:n,value:e});return new Promise((h,g)=>{c.onsuccess=T=>{h()},i.onerror=T=>{var x;g(cs.create("storage-set",{originalErrorMessage:null===(x=T.target.error)||void 0===x?void 0:x.message}))}})})).apply(this,arguments)}const Aa=new Q.Yd("@firebase/app-check");function Dg(n,e){return(0,W.hl)()?function B_(n,e){return function vg(n,e){return Fh.apply(this,arguments)}(function Bh(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Aa.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $_(){return lg().enabled}function G_(){return bg.apply(this,arguments)}function bg(){return(bg=(0,O.Z)(function*(){const n=lg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const FI={error:"UNKNOWN_ERROR"};function UI(n){return W.US.encodeString(JSON.stringify(n),!1)}function Vh(n){return jh.apply(this,arguments)}function jh(){return(jh=(0,O.Z)(function*(n,e=!1){const t=n.app;hg(t);const i=Oi(t);let c,a=i.token;if(a&&!su(a)&&(qs(t,Object.assign(Object.assign({},i),{token:void 0})),a=void 0),!a){const T=yield i.cachedTokenPromise;T&&(su(T)?a=T:yield Dg(t,void 0))}if(!e&&a&&su(a))return{token:a.token};let g,h=!1;if($_()){i.exchangeTokenPromise||(i.exchangeTokenPromise=fg(Hb(t,yield G_()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),h=!0);const T=yield i.exchangeTokenPromise;return yield Dg(t,T),qs(t,Object.assign(Object.assign({},i),{token:T})),{token:T.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),h=!0),a=yield i.exchangeTokenPromise}catch(T){"appCheck/throttled"===T.code?Aa.warn(T.message):Aa.error(T),c=T}return a?c?g=su(a)?{token:a.token,internalError:c}:$i(c):(g={token:a.token},qs(t,Object.assign(Object.assign({},i),{token:a})),yield Dg(t,a)):g=$i(c),h&&Mg(t,g),g})).apply(this,arguments)}function Sg(n,e){const t=Oi(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),qs(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function Ji(n){const{app:e}=n,t=Oi(e);let i=t.tokenRefresher;i||(i=function Ag(n){const{app:e}=n;return new $b((0,O.Z)(function*(){let i;if(i=Oi(e).token?yield Vh(n,!0):yield Vh(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Oi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),qs(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Mg(n,e){const t=Oi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function su(n){return n.expireTimeMillis-Date.now()>0}function $i(n){return{token:UI(FI),error:n}}class Jl{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Oi(this.app);for(const t of e)Sg(this.app,t.next);return Promise.resolve()}}const Wc="app-check-internal";!function qI(){(0,ee.Xd)(new G.wA("app-check",n=>function H_(n,e){return new Jl(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Wc).initialize()})),(0,ee.Xd)(new G.wA(Wc,n=>function BI(n){return{getToken:e=>Vh(n,e),addTokenListener:e=>function Cg(n,e,t,i){const{app:a}=n,c=Oi(a),h={next:t,error:i,type:e};if(qs(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&su(c.token)){const g=c.token;Promise.resolve().then(()=>{t({token:g.token}),Ji(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Ji(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ee.KN)("@firebase/app-check","0.5.15")}();class Gh{constructor(){return(0,m.vb)("app-check")}}typeof window<"u"&&window;var Ot,rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bo={},kg=kg||{},an=rv||self;function nd(){}function Qo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Lg="closure_uid_"+(1e9*Math.random()>>>0),Qb=0;function Hh(n,e,t){return n.call.apply(n.bind,arguments)}function eD(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Gi(n,e,t){return(Gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hh:eD).apply(null,arguments)}function rd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,c){for(var h=Array(arguments.length-2),g=2;g<arguments.length;g++)h[g-2]=arguments[g];return e.prototype[a].apply(i,h)}}function Xo(){this.s=this.s,this.o=this.o}var zh={};Xo.prototype.s=!1,Xo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function iv(n){return Object.prototype.hasOwnProperty.call(n,Lg)&&n[Lg]||(n[Lg]=++Qb)}(this);delete zh[n]}},Xo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const id=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Wh(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Kh(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Qo(i)){const a=n.length||0,c=i.length||0;n.length=a+c;for(let h=0;h<c;h++)n[a+h]=i[h]}else n.push(i)}}function Hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hi.prototype.h=function(){this.defaultPrevented=!0};var Fg=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{an.addEventListener("test",nd,e),an.removeEventListener("test",nd,e)}catch{}return n}();function ou(n){return/^[\s\xa0]*$/.test(n)}var ov=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qh(n,e){return n<e?-1:n>e?1:0}function Yh(){var n=an.navigator;return n&&(n=n.userAgent)?n:""}function Jo(n){return-1!=Yh().indexOf(n)}function Zh(n){return Zh[" "](n),n}Zh[" "]=nd;var Ts,n,av=Jo("Opera"),sd=Jo("Trident")||Jo("MSIE"),Bg=Jo("Edge"),Vg=Bg||sd,jg=Jo("Gecko")&&!(-1!=Yh().toLowerCase().indexOf("webkit")&&!Jo("Edge"))&&!(Jo("Trident")||Jo("MSIE"))&&!Jo("Edge"),tD=-1!=Yh().toLowerCase().indexOf("webkit")&&!Jo("Edge");function uv(){var n=an.document;return n?n.documentMode:void 0}e:{var $g="",Qh=(n=Yh(),jg?/rv:([^\);]+)(\)|;)/.exec(n):Bg?/Edge\/([\d\.]+)/.exec(n):sd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tD?/WebKit\/(\S+)/.exec(n):av?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Qh&&($g=Qh?Qh[1]:""),sd){var Gg=uv();if(null!=Gg&&Gg>parseFloat($g)){Ts=String(Gg);break e}}Ts=$g}var nD={};var iD=an.document&&sd&&(uv()||parseInt(Ts,10))||void 0;function od(n,e){if(Hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jg){e:{try{Zh(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&od.X.h.call(this)}}Pi(od,Hi);var sD={2:"touch",3:"pen",4:"mouse"};od.prototype.h=function(){od.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),cv=0;function lv(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++cv,this.ba=this.ea=!1}function ad(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Wg(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function dv(n){const e={};for(const t in n)e[t]=n[t];return e}const Kg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hv(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let c=0;c<Kg.length;c++)t=Kg[c],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function ud(n){this.src=n,this.g={},this.h=0}function qg(n,e){var t=e.type;if(t in n.g){var c,i=n.g[t],a=id(i,e);(c=0<=a)&&Array.prototype.splice.call(i,a,1),c&&(ad(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yg(n,e,t,i){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==i)return a}return-1}ud.prototype.add=function(n,e,t,i,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=Yg(n,e,i,a);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new lv(e,this.src,c,!!i,a)).ea=t,n.push(e)),e};var fv="closure_lm_"+(1e6*Math.random()|0),Xh={};function Zg(n,e,t,i,a){if(i&&i.once)return Jh(n,e,t,i,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Zg(n,e[c],t,i,a);return null}return t=tf(t),n&&n[en]?n.N(e,t,Kc(i)?!!i.capture:!!i,a):au(n,e,t,!1,i,a)}function au(n,e,t,i,a,c){if(!e)throw Error("Invalid event type");var h=Kc(a)?!!a.capture:!!a,g=pv(n);if(g||(n[fv]=g=new ud(n)),(t=g.add(e,t,i,h,c)).proxy)return t;if(i=function oD(){const e=Xb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Fg||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(aD(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Jh(n,e,t,i,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Jh(n,e[c],t,i,a);return null}return t=tf(t),n&&n[en]?n.O(e,t,Kc(i)?!!i.capture:!!i,a):au(n,e,t,!0,i,a)}function ef(n,e,t,i,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)ef(n,e[c],t,i,a);else i=Kc(i)?!!i.capture:!!i,t=tf(t),n&&n[en]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yg(c=n.g[e],t,i,a))&&(ad(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=pv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yg(e,t,i,a)),(t=-1<n?e[n]:null)&&Qg(t))}function Qg(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[en])qg(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(aD(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=pv(e))?(qg(t,n),0==t.h&&(t.src=null,e[fv]=null)):ad(n)}}}function aD(n){return n in Xh?Xh[n]:Xh[n]="on"+n}function Xb(n,e){if(n.ba)n=!0;else{e=new od(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&Qg(n),n=t.call(i,e)}return n}function pv(n){return(n=n[fv])instanceof ud?n:null}var Xg="__closure_events_fn_"+(1e9*Math.random()>>>0);function tf(n){return"function"==typeof n?n:(n[Xg]||(n[Xg]=function(e){return n.handleEvent(e)}),n[Xg])}function zi(){Xo.call(this),this.i=new ud(this),this.P=this,this.I=null}function Wi(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Hi(e,n);else if(e instanceof Hi)e.target=e.target||n;else{var a=e;hv(e=new Hi(i,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=xa(h,i,!0,e)&&a}if(a=xa(h=e.g=n,i,!0,e)&&a,a=xa(h,i,!1,e)&&a,t)for(c=0;c<t.length;c++)a=xa(h=e.g=t[c],i,!1,e)&&a}function xa(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ba&&h.capture==t){var g=h.listener,T=h.ha||h.src;h.ea&&qg(n.i,h),a=!1!==g.call(T,i)&&a}}return a&&!i.defaultPrevented}Pi(zi,Xo),zi.prototype[en]=!0,zi.prototype.removeEventListener=function(n,e,t,i){ef(this,n,e,t,i)},zi.prototype.M=function(){if(zi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)ad(t[i]);delete n.g[e],n.h--}}this.I=null},zi.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},zi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Jg=an.JSON.stringify;function gv(){var n=nm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var em,mv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new yv,n=>n.reset());class yv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function uD(n){an.setTimeout(()=>{throw n},0)}function _v(n,e){em||function cD(){var n=an.Promise.resolve(void 0);em=function(){n.then(lD)}}(),tm||(em(),tm=!0),nm.add(n,e)}var tm=!1,nm=new class nf{constructor(){this.h=this.g=null}add(e,t){const i=mv.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function lD(){for(var n;n=gv();){try{n.h.call(n.g)}catch(t){uD(t)}var e=mv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}tm=!1}function cd(n,e){zi.call(this),this.h=n||1,this.g=e||an,this.j=Gi(this.lb,this),this.l=Date.now()}function rf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ld(n,e,t){if("function"==typeof n)t&&(n=Gi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gi(n.handleEvent,n)}return 2147483647<Number(e)?-1:an.setTimeout(n,e||0)}function dD(n){n.g=ld(()=>{n.g=null,n.i&&(n.i=!1,dD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(cd,zi),(Ot=cd.prototype).ca=!1,Ot.R=null,Ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Wi(this,"tick"),this.ca&&(rf(this),this.start()))}},Ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ot.M=function(){cd.X.M.call(this),rf(this),delete this.g};class rm extends Xo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dD(this)}M(){super.M(),this.g&&(an.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dd(n){Xo.call(this),this.h=n,this.g={}}Pi(dd,Xo);var hD=[];function Qu(n,e,t,i){Array.isArray(t)||(t&&(hD[0]=t.toString()),t=hD);for(var a=0;a<t.length;a++){var c=Zg(e,t[a],i||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function im(n){Wg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qg(e)},n),n.g={}}function hd(){this.g=!0}function Xu(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return Jg(t)}catch{return e}}(n,t)+(i?" "+i:"")})}dd.prototype.M=function(){dd.X.M.call(this),im(this)},dd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hd.prototype.Aa=function(){this.g=!1},hd.prototype.info=function(){};var ls={},af=null;function fd(){return af=af||new zi}function uf(n){Hi.call(this,ls.Pa,n)}function cf(n){const e=fd();Wi(e,new uf(e,n))}function om(n,e){Hi.call(this,ls.STAT_EVENT,n),this.stat=e}function Cs(n){const e=fd();Wi(e,new om(e,n))}function pd(n,e){Hi.call(this,ls.Qa,n),this.size=e}function uu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return an.setTimeout(function(){n()},e)}ls.Pa="serverreachability",Pi(uf,Hi),ls.STAT_EVENT="statevent",Pi(om,Hi),ls.Qa="timingevent",Pi(pd,Hi);var qc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},lf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function gd(){}function vv(){}gd.prototype.h=null;var df,md={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function am(){Hi.call(this,"d")}function um(){Hi.call(this,"c")}function cm(){}function yd(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new dd(this),this.O=Ev,this.T=new cd(n=Vg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gD}function gD(){this.i=null,this.g="",this.h=!1}Pi(am,Hi),Pi(um,Hi),Pi(cm,gd),cm.prototype.g=function(){return new XMLHttpRequest},cm.prototype.i=function(){return{}},df=new cm;var Ev=45e3,hf={},ff={};function _d(n,e,t){n.K=1,n.v=yf(Co(e)),n.s=t,n.P=!0,mD(n,null)}function mD(n,e){n.F=Date.now(),pf(n),n.A=Co(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),vf(t.i,"t",i),n.C=0,t=n.l.H,n.h=new gD,n.g=Tm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new rm(Gi(n.La,n,n.g),n.N)),Qu(n.S,n.g,"readystatechange",n.ib),e=n.H?dv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),cf(1),function sf(n,e,t,i,a,c){n.info(function(){if(n.g)if(c)for(var h="",g=c.split("&"),T=0;T<g.length;T++){var x=g[T].split("=");if(1<x.length){var j=x[0];x=x[1];var re=j.split("_");h=2<=re.length&&"type"==re[1]?h+(j+"=")+x+"&":h+(j+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function yD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function _D(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=Jb(n,t),a==ff){4==e&&(n.o=4,Cs(14),i=!1),Xu(n.j,n.m,null,"[Incomplete Response]");break}if(a==hf){n.o=4,Cs(15),Xu(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Xu(n.j,n.m,a,null),Iv(n,a)}yD(n)&&a!=ff&&a!=hf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),xf(e),e.K=!0,Cs(11))):(Xu(n.j,n.m,t,"[Invalid Chunked Response]"),Yc(n),gf(n))}function Jb(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?ff:(t=Number(e.substring(t,i)),isNaN(t)?hf:(i+=1)+t>e.length?ff:(e=e.substr(i,t),n.C=i+t,e))}function pf(n){n.V=Date.now()+n.O,vD(n,n.O)}function vD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=uu(Gi(n.gb,n),e)}function lm(n){n.B&&(an.clearTimeout(n.B),n.B=null)}function gf(n){0==n.l.G||n.I||Dd(n.l,n)}function Yc(n){lm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,rf(n.T),im(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Iv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ef(t.h,n)))if(!n.J&&Ef(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ao(t),tc(t)}Mf(t),Cs(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=uu(Gi(t.cb,t),6e3));if(1>=wv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Mo(t,11)}else if((n.J||t.g==n)&&ao(t),!ou(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let x=a[e];if(t.T=x[0],x=x[1],2==t.G)if("c"==x[0]){t.I=x[1],t.ka=x[2];const j=x[3];null!=j&&(t.ma=j,t.j.info("VER="+t.ma));const re=x[4];null!=re&&(t.Ca=re,t.j.info("SVER="+t.Ca));const Te=x[5];null!=Te&&"number"==typeof Te&&0<Te&&(t.J=i=1.5*Te,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const Ve=n.g;if(Ve){const qe=Ve.g?Ve.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qe){var c=i.h;c.g||-1==qe.indexOf("spdy")&&-1==qe.indexOf("quic")&&-1==qe.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(If(c,c.h),c.h=null))}if(i.D){const It=Ve.g?Ve.g.getResponseHeader("X-HTTP-Session-Id"):null;It&&(i.za=It,Cr(i.F,i.D,It))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((i=t).sa=Of(i,i.H?i.ka:null,i.V),h.J){bv(i.h,h);var g=h,T=i.J;T&&g.setTimeout(T),g.B&&(lm(g),pf(g)),i.g=h}else bm(i);0<t.i.length&&nc(t)}else"stop"!=x[0]&&"close"!=x[0]||Mo(t,7);else 3==t.G&&("stop"==x[0]||"close"==x[0]?"stop"==x[0]?Mo(t,7):Dm(t):"noop"!=x[0]&&t.l&&t.l.wa(x),t.A=0)}cf(4)}catch{}}function Dv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function dm(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Qo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function cu(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Qo(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,c=0;c<a;c++)e.call(void 0,i[c],t&&t[c],n)}(Ot=yd.prototype).setTimeout=function(n){this.O=n},Ot.ib=function(n){n=n.target;const e=this.L;e&&3==ea(n)?e.l():this.La(n)},Ot.La=function(n){try{if(n==this.g)e:{const j=ea(this.g);var e=this.g.Ea();const re=this.g.aa();if(!(3>j)&&(3!=j||Vg||this.g&&(this.h.h||this.g.fa()||Rv(this.g)))){this.I||4!=j||7==e||cf(8==e||0>=re?3:2),lm(this);var t=this.g.aa();this.Y=t;t:if(yD(this)){var i=Rv(this.g);n="";var a=i.length,c=4==ea(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yc(this),gf(this);var h="";break t}this.h.i=new an.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:c&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function To(n,e,t,i,a,c,h){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.U,j,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,T=this.g;if((g=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ou(g)){var x=g;break t}}x=null}if(!(t=x)){this.i=!1,this.o=3,Cs(12),Yc(this),gf(this);break e}Xu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Iv(this,t)}this.P?(_D(this,j,h),Vg&&this.i&&3==j&&(Qu(this.S,this.T,"tick",this.hb),this.T.start())):(Xu(this.j,this.m,h,null),Iv(this,h)),4==j&&Yc(this),this.i&&!this.I&&(4==j?Dd(this.l,this):(this.i=!1,pf(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),Yc(this),gf(this)}}}catch{}},Ot.hb=function(){if(this.g){var n=ea(this.g),e=this.g.fa();this.C<e.length&&(lm(this),_D(this,n,e),this.i&&4!=n&&pf(this))}},Ot.cancel=function(){this.I=!0,Yc(this)},Ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function fD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cf(3),Cs(17)),Yc(this),this.o=2,gf(this)):vD(this,this.V-n)};var hm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lu){this.h=void 0!==e?e:n.h,mf(this,n.j),this.s=n.s,this.g=n.g,So(this,n.m),this.l=n.l,e=n.i;var t=new du;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pm(this,t),this.o=n.o}else n&&(t=String(n).match(hm))?(this.h=!!e,mf(this,t[1]||"",!0),this.s=Zc(t[2]||""),this.g=Zc(t[3]||"",!0),So(this,t[4]),this.l=Zc(t[5]||"",!0),pm(this,t[6]||"",!0),this.o=Zc(t[7]||"")):(this.h=!!e,this.i=new du(null,this.h))}function Co(n){return new lu(n)}function mf(n,e,t){n.j=t?Zc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function So(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function pm(n,e,t){e instanceof du?(n.i=e,function _m(n,e){e&&!n.j&&(Ra(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(ym(this,i),vf(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=vd(e,Xc)),n.i=new du(e,n.h))}function Cr(n,e,t){n.i.set(e,t)}function yf(n){return Cr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ED),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ED(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(vd(e,Ed,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(vd(e,Ed,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(vd(t,"/"==t.charAt(0)?gm:Qc,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",vd(t,mm)),n.join("")};var Ed=/[#\/\?@]/g,Qc=/[#\?:]/g,gm=/[#\?]/g,Xc=/[#\?@]/g,mm=/#/g;function du(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ra(n){n.g||(n.g=new Map,n.h=0,n.i&&function fm(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var c=n[t].substring(0,i);a=n[t].substring(i+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ym(n,e){Ra(n),e=Ju(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _f(n,e){return Ra(n),e=Ju(n,e),n.g.has(e)}function vf(n,e,t){ym(n,e),0<t.length&&(n.i=null,n.g.set(Ju(n,e),Wh(t)),n.h+=t.length)}function Ju(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function DD(n){this.l=n||wD,n=an.PerformanceNavigationTiming?0<(n=an.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(an.g&&an.g.Ga&&an.g.Ga()&&an.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ot=du.prototype).add=function(n,e){Ra(this),this.i=null,n=Ju(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ot.forEach=function(n,e){Ra(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},Ot.oa=function(){Ra(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let c=0;c<a.length;c++)t.push(e[i])}return t},Ot.W=function(n){Ra(this);let e=[];if("string"==typeof n)_f(this,n)&&(e=e.concat(this.g.get(Ju(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ot.set=function(n,e){return Ra(this),this.i=null,_f(this,n=Ju(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const c=encodeURIComponent(String(i)),h=this.W(i);for(i=0;i<h.length;i++){var a=c;""!==h[i]&&(a+="="+encodeURIComponent(String(h[i]))),n.push(a)}}return this.i=n.join("&")};var wD=10;function vm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wv(n){return n.h?1:n.g?n.g.size:0}function Ef(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function If(n,e){n.g?n.g.add(e):n.h=e}function bv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ss(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Wh(n.i)}function Df(){}function bD(){this.g=new Df}function eT(n,e,t){const i=t||"";try{Dv(n,function(a,c){let h=a;Kc(a)&&(h=Jg(a)),e.push(i+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function Jc(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function el(n){this.l=n.ac||null,this.j=n.jb||!1}function wf(n,e){zi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Em,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}DD.prototype.cancel=function(){if(this.i=Ss(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Df.prototype.stringify=function(n){return an.JSON.stringify(n,void 0)},Df.prototype.parse=function(n){return an.JSON.parse(n,void 0)},Pi(el,gd),el.prototype.g=function(){return new wf(this.l,this.j)},el.prototype.i=function(n){return function(){return n}}({}),Pi(wf,zi);var Em=0;function Tv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function tl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Id(n)}function Id(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ot=wf.prototype).open=function(n,e){if(this.readyState!=Em)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Id(this)},Ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||an).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tl(this)),this.readyState=Em},Ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Id(this)),this.g&&(this.readyState=3,Id(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof an.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?tl(this):Id(this),3==this.readyState&&Tv(this)}},Ot.Va=function(n){this.g&&(this.response=this.responseText=n,tl(this))},Ot.Ua=function(n){this.g&&(this.response=n,tl(this))},Ot.ga=function(){this.g&&tl(this)},Ot.setRequestHeader=function(n,e){this.v.append(n,e)},Ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Cv=an.JSON.parse;function Hr(n){zi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sv,this.K=this.L=!1}Pi(Hr,zi);var Sv="",Av=/^https?$/i,Mv=["POST","PUT"];function Ao(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,bf(n),Tf(n)}function bf(n){n.D||(n.D=!0,Wi(n,"complete"),Wi(n,"error"))}function xv(n){if(n.h&&typeof kg<"u"&&(!n.C[1]||4!=ea(n)||2!=n.aa()))if(n.v&&4==ea(n))ld(n.Ha,0,n);else if(Wi(n,"readystatechange"),4==ea(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===g){var a=String(n.H).match(hm)[1]||null;if(!a&&an.self&&an.self.location){var c=an.self.location.protocol;a=c.substr(0,c.length-1)}i=!Av.test(a?a.toLowerCase():"")}t=i}if(t)Wi(n,"complete"),Wi(n,"success");else{n.m=6;try{var h=2<ea(n)?n.g.statusText:""}catch{h=""}n.j=h+" ["+n.aa()+"]",bf(n)}}finally{Tf(n)}}}function Tf(n,e){if(n.g){SD(n);const t=n.g,i=n.C[0]?nd:null;n.g=null,n.C=null,e||Wi(n,"ready");try{t.onreadystatechange=i}catch{}}}function SD(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(an.clearTimeout(n.A),n.A=null)}function ea(n){return n.g?n.g.readyState:0}function Rv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Sv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Ov(n){let e="";return Wg(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Im(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Ov(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cr(n,e,t))}function ec(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Pv(n){this.Ca=0,this.i=[],this.j=new hd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ec("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ec("baseRetryDelayMs",5e3,n),this.bb=ec("retryDelaySeedMs",1e4,n),this.$a=ec("forwardChannelMaxRetries",2,n),this.ta=ec("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new DD(n&&n.concurrentRequestLimit),this.Fa=new bD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Dm(n){if(Cf(n),3==n.G){var e=n.U++,t=Co(n.F);Cr(t,"SID",n.I),Cr(t,"RID",e),Cr(t,"TYPE","terminate"),Af(n,t),(e=new yd(n,n.j,e,void 0)).K=2,e.v=yf(Co(t)),t=!1,an.navigator&&an.navigator.sendBeacon&&(t=an.navigator.sendBeacon(e.v.toString(),"")),!t&&an.Image&&((new Image).src=e.v,t=!0),t||(e.g=Tm(e.l,null),e.g.da(e.v)),e.F=Date.now(),pf(e)}Nv(n)}function tc(n){n.g&&(xf(n),n.g.cancel(),n.g=null)}function Cf(n){tc(n),n.u&&(an.clearTimeout(n.u),n.u=null),ao(n),n.h.cancel(),n.m&&("number"==typeof n.m&&an.clearTimeout(n.m),n.m=null)}function nc(n){vm(n.h)||n.m||(n.m=!0,_v(n.Ja,n),n.C=0)}function Sf(n,e){var t;t=e?e.m:n.U++;const i=Co(n.F);Cr(i,"SID",n.I),Cr(i,"RID",t),Cr(i,"AID",n.T),Af(n,i),n.o&&n.s&&Im(i,n.o,n.s),t=new yd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=wm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),If(n.h,t),_d(t,i,e)}function Af(n,e){n.ia&&Wg(n.ia,function(t,i){Cr(e,i,t)}),n.l&&Dv({},function(t,i){Cr(e,i,t)})}function wm(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Gi(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let g=!0;for(let T=0;T<t;T++){let x=a[T].h;const j=a[T].g;if(x-=c,0>x)c=Math.max(0,a[T].h-100),g=!1;else try{eT(j,h,"req"+x+"_")}catch{i&&i(j)}}if(g){i=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function bm(n){n.g||n.u||(n.Z=1,_v(n.Ia,n),n.A=0)}function Mf(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=uu(Gi(n.Ia,n),wd(n,n.A)),n.A++,0))}function xf(n){null!=n.B&&(an.clearTimeout(n.B),n.B=null)}function Rf(n){n.g=new yd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Co(n.sa);Cr(e,"RID","rpc"),Cr(e,"SID",n.I),Cr(e,"CI",n.L?"0":"1"),Cr(e,"AID",n.T),Cr(e,"TYPE","xmlhttp"),Af(n,e),n.o&&n.s&&Im(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=yf(Co(e)),t.s=null,t.P=!0,mD(t,n)}function ao(n){null!=n.v&&(an.clearTimeout(n.v),n.v=null)}function Dd(n,e){var t=null;if(n.g==e){ao(n),xf(n),n.g=null;var i=2}else{if(!Ef(n.h,e))return;t=e.D,bv(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Wi(i=fd(),new pd(i,t,e,a)),nc(n)}else bm(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function tT(n,e){return!(wv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=uu(Gi(n.Ja,n,e),wd(n,n.C)),n.C++,0)))}(n,e)||2==i&&Mf(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Mo(n,5);break;case 4:Mo(n,10);break;case 3:Mo(n,6);break;default:Mo(n,2)}}function wd(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Mo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Gi(n.kb,n);t||(t=new lu("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||mf(t,"https"),yf(t)),function TD(n,e){const t=new hd;if(an.Image){const i=new Image;i.onload=rd(Jc,t,i,"TestLoadImage: loaded",!0,e),i.onerror=rd(Jc,t,i,"TestLoadImage: error",!1,e),i.onabort=rd(Jc,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=rd(Jc,t,i,"TestLoadImage: timeout",!1,e),an.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Cs(2);n.G=0,n.l&&n.l.va(e),Nv(n),Cf(n)}function Nv(n){if(n.G=0,n.la=[],n.l){const e=Ss(n.h);(0!=e.length||0!=n.i.length)&&(Kh(n.la,e),Kh(n.la,n.i),n.h.i.length=0,Wh(n.i),n.i.length=0),n.l.ua()}}function Of(n,e,t){var i=t instanceof lu?Co(t):new lu(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),So(i,i.m);else{var a=an.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new lu(null,void 0);i&&mf(c,i),e&&(c.g=e),a&&So(c,a),t&&(c.l=t),i=c}return e=n.za,(t=n.D)&&e&&Cr(i,t,e),Cr(i,"VER",n.ma),Af(n,i),i}function Tm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(t&&n.Da&&!n.ra?new el({jb:!0}):n.ra)).Ka(n.H),e}function kv(){}function Pf(){if(sd&&!(10<=Number(iD)))throw Error("Environmental error: no available transport.")}function Ki(n,e){zi.call(this),this.g=new Pv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!ou(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ou(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new nl(this)}function Lv(n){am.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function AD(){um.call(this),this.status=1}function nl(n){this.g=n}(Ot=Hr.prototype).Ka=function(n){this.L=n},Ot.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():df.g(),this.C=function pD(n){return n.h||(n.h=n.i())}(this.u?this.u:df),this.g.onreadystatechange=Gi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Ao(this,c)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const c of i.keys())t.set(c,i.get(c))}i=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=an.FormData&&n instanceof an.FormData,!(0<=id(Mv,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{SD(this),0<this.B&&((this.K=function CD(n){return sd&&function rD(){return function Ug(n){var e=nD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ov(String(Ts)).split("."),t=ov("9").split("."),i=Math.max(e.length,t.length);for(let h=0;0==n&&h<i;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=qh(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||qh(0==a[2].length,0==c[2].length)||qh(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gi(this.qa,this)):this.A=ld(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Ao(this,c)}},Ot.qa=function(){typeof kg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wi(this,"timeout"),this.abort(8))},Ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wi(this,"complete"),Wi(this,"abort"),Tf(this))},Ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tf(this,!0)),Hr.X.M.call(this)},Ot.Ha=function(){this.s||(this.F||this.v||this.l?xv(this):this.fb())},Ot.fb=function(){xv(this)},Ot.aa=function(){try{return 2<ea(this)?this.g.status:-1}catch{return-1}},Ot.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Cv(e)}},Ot.Ea=function(){return this.m},Ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ot=Pv.prototype).ma=8,Ot.G=1,Ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new yd(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=dv(c),hv(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=wm(this,a,e),Cr(t=Co(this.F),"RID",n),Cr(t,"CVER",22),this.D&&Cr(t,"X-HTTP-Session-Id",this.D),Af(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(Ov(c)))+"&"+e:this.o&&Im(t,this.o,c)),If(this.h,a),this.Ya&&Cr(t,"TYPE","init"),this.O?(Cr(t,"$req",e),Cr(t,"SID","null"),a.Z=!0,_d(a,t,null)):_d(a,t,e),this.G=2}}else 3==this.G&&(n?Sf(this,n):0==this.i.length||vm(this.h)||Sf(this))},Ot.Ia=function(){if(this.u=null,Rf(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=uu(Gi(this.eb,this),n)}},Ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Cs(10),tc(this),Rf(this))},Ot.cb=function(){null!=this.v&&(this.v=null,tc(this),Mf(this),Cs(19))},Ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Cs(2)):(this.j.info("Failed to ping google.com"),Cs(1))},(Ot=kv.prototype).xa=function(){},Ot.wa=function(){},Ot.va=function(){},Ot.ua=function(){},Ot.Ra=function(){},Pf.prototype.g=function(n,e){return new Ki(n,e)},Pi(Ki,zi),Ki.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Cs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Of(n,null,n.V),nc(n)},Ki.prototype.close=function(){Dm(this.g)},Ki.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Jg(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&nc(e)},Ki.prototype.M=function(){this.g.l=null,delete this.j,Dm(this.g),delete this.g,Ki.X.M.call(this)},Pi(Lv,am),Pi(AD,um),Pi(nl,kv),nl.prototype.xa=function(){Wi(this.g,"a")},nl.prototype.wa=function(n){Wi(this.g,new Lv(n))},nl.prototype.va=function(n){Wi(this.g,new AD(n))},nl.prototype.ua=function(){Wi(this.g,"b")},Pf.prototype.createWebChannel=Pf.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,lf.COMPLETE="complete",vv.EventType=md,md.OPEN="a",md.CLOSE="b",md.ERROR="c",md.MESSAGE="d",zi.prototype.listen=zi.prototype.N,Hr.prototype.listenOnce=Hr.prototype.O,Hr.prototype.getLastError=Hr.prototype.Oa,Hr.prototype.getLastErrorCode=Hr.prototype.Ea,Hr.prototype.getStatus=Hr.prototype.aa,Hr.prototype.getResponseJson=Hr.prototype.Sa,Hr.prototype.getResponseText=Hr.prototype.fa,Hr.prototype.send=Hr.prototype.da,Hr.prototype.setWithCredentials=Hr.prototype.Ka;var nT=bo.createWebChannelTransport=function(){return new Pf},MD=bo.getStatEventTarget=function(){return fd()},Cm=bo.ErrorCode=qc,xD=bo.EventType=lf,Fv=bo.Event=ls,Sm=bo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},RD=bo.FetchXmlHttpFactory=el,rl=bo.WebChannel=vv,OD=bo.XhrIo=Hr;const Uv="@firebase/firestore";class Ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ni.UNAUTHENTICATED=new Ni(null),Ni.GOOGLE_CREDENTIALS=new Ni("google-credentials-uid"),Ni.FIRST_PARTY=new Ni("first-party-uid"),Ni.MOCK_USER=new Ni("mock-user");let il="9.12.1";const hu=new Q.Yd("@firebase/firestore");function Am(){return hu.logLevel}function tt(n,...e){if(hu.logLevel<=Q.in.DEBUG){const t=e.map(xm);hu.debug(`Firestore (${il}): ${n}`,...t)}}function ii(n,...e){if(hu.logLevel<=Q.in.ERROR){const t=e.map(xm);hu.error(`Firestore (${il}): ${n}`,...t)}}function ta(n,...e){if(hu.logLevel<=Q.in.WARN){const t=e.map(xm);hu.warn(`Firestore (${il}): ${n}`,...t)}}function xm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Rt(n="Unexpected state"){const e=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: `+n;throw ii(e),new Error(e)}function $t(n,e){n||Rt()}function ut(n,e){return n}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends W.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ni.UNAUTHENTICATED))}shutdown(){}}class Rm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sl{constructor(e){this.t=e,this.currentUser=Ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const c=x=>this.i!==a?(a=this.i,t(x)):Promise.resolve();let h=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Dr,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const x=h;e.enqueueRetryable((0,O.Z)(function*(){yield x.promise,yield c(i.currentUser)}))},T=x=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(x=>T(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?T(x):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Dr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($t("string"==typeof i.accessToken),new bd(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $t(null===e||"string"==typeof e),new Ni(e)}}class ol{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=Ni.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():($t(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class al{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new ol(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ul{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=c=>{null!=c.error&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.A;return this.A=c.token,tt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const a=c=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t("string"==typeof t.token),this.A=t.token,new rc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cl(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class ic{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=cl(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%e.length))}return i}}function Wt(n,e){return n<e?-1:n>e?1:0}function sc(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function Om(n){return n+"\0"}class Sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sr.fromMillis(Date.now())}static fromDate(e){return Sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Sr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zt(e)}static min(){return new zt(new Sr(0,0))}static max(){return new zt(new Sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ll{constructor(e,t,i){void 0===t?t=0:t>e.length&&Rt(),void 0===i?i=e.length-t:i>e.length-t&&Rt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===ll.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fn extends ll{construct(e,t,i){return new Fn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Fn(t)}static emptyPath(){return new Fn([])}}const Bv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends ll{construct(e,t,i){return new zr(e,t,i)}static isValidIdentifier(e){return Bv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(0===i.length)throw new Ye(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;a<e.length;){const g=e[a];if("\\"===g){if(a+1===e.length)throw new Ye(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[a+1];if("\\"!==T&&"."!==T&&"`"!==T)throw new Ye(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=T,a+=2}else"`"===g?(h=!h,a++):"."!==g||h?(i+=g,a++):(c(),a++)}if(c(),h)throw new Ye(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(t)}static emptyPath(){return new zr([])}}class pt{constructor(e){this.path=e}static fromPath(e){return new pt(Fn.fromString(e))}static fromName(e){return new pt(Fn.fromString(e).popFirst(5))}static empty(){return new pt(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new Fn(e.slice()))}}class Nf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Pm(n){return n.fields.find(e=>2===e.kind)}function fu(n){return n.fields.filter(e=>2!==e.kind)}Nf.UNKNOWN_ID=-1;class Cd{constructor(e,t){this.fieldPath=e,this.kind=t}}class oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new oc(0,es.min())}}function Sd(n){return new es(n.readTime,n.key,-1)}class es{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new es(zt.min(),pt.empty(),-1)}static max(){return new es(zt.max(),pt.empty(),-1)}}function Ad(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=pt.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const jv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Md{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xo(n){return kf.apply(this,arguments)}function kf(){return kf=(0,O.Z)(function*(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==jv)throw n;tt("LocalStore","Unexpectedly lost primary lease")}),kf.apply(this,arguments)}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,i)=>{t(e)})}static reject(e){return new xe((t,i)=>{i(e)})}static waitFor(e){return new xe((t,i)=>{let a=0,c=0,h=!1;e.forEach(g=>{++a,g.next(()=>{++c,h&&c===a&&t()},T=>i(T))}),h=!0,c===a&&t()})}static or(e){let t=xe.resolve(!1);for(const i of e)t=t.next(a=>a?xe.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,c)=>{i.push(t.call(this,a,c))}),this.waitFor(i)}static mapArray(e,t){return new xe((i,a)=>{const c=e.length,h=new Array(c);let g=0;for(let T=0;T<c;T++){const x=T;t(e[x]).next(j=>{h[x]=j,++g,g===c&&i(h)},j=>a(j))}})}static doWhile(e,t){return new xe((i,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):i()};c()})}}class dl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Dr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ac(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const a=Lf(i.target.error);this.P.reject(new ac(e,a))}}static open(e,t,i,a){try{return new dl(t,e.transaction(a,i))}catch(c){throw new ac(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ND(t)}}class co{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===co.D((0,W.z$)())&&ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tt("SimpleDb","Removing database:",e),pu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,W.hl)())return!1;if(co.N())return!0;const e=(0,W.z$)(),t=co.D(e),i=0<t&&t<10,a=co.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,O.Z)(function*(){return t.db||(tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{i(h.target.result)},c.onblocked=()=>{a(new ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const g=h.target.error;a("VersionError"===g.name?new Ye(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ye(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new ac(e,g))},c.onupgradeneeded=h=>{tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var c=this;return(0,O.Z)(function*(){const h="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.F(e);const T=dl.open(c.db,e,h?"readonly":"readwrite",i),x=a(T).next(j=>(T.V(),j)).catch(j=>(T.abort(j),xe.reject(j))).toPromise();return x.catch(()=>{}),yield T.v,x}catch(T){const x=T,j="FirebaseError"!==x.name&&g<3;if(tt("SimpleDb","Transaction failed with error:",x.message,"Retrying:",j),c.close(),!j)return Promise.reject(x)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class $v{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return pu(this.U.delete())}}class ac extends Ye{constructor(e,t){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Oa(n){return"IndexedDbTransactionError"===n.name}class ND{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(tt("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),pu(i)}add(e){return tt("SimpleDb","ADD",this.store.name,e,e),pu(this.store.add(e))}get(e){return pu(this.store.get(e)).next(t=>(void 0===t&&(t=null),tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return tt("SimpleDb","DELETE",this.store.name,e),pu(this.store.delete(e))}count(){return tt("SimpleDb","COUNT",this.store.name),pu(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),c=[];return this.H(a,(h,g)=>{c.push(g)}).next(()=>c)}{const a=this.store.getAll(i.range);return new xe((c,h)=>{a.onerror=g=>{h(g.target.error)},a.onsuccess=g=>{c(g.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new xe((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}Y(e,t){tt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,(c,h,g)=>g.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new xe((i,a)=>{t.onerror=c=>{const h=Lf(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(g=>{g?h.continue():i()}):i()}})}H(e,t){const i=[];return new xe((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const g=h.target.result;if(!g)return void a();const T=new $v(g),x=t(g.primaryKey,g.value,T);if(x instanceof xe){const j=x.catch(re=>(T.done(),xe.reject(re)));i.push(j)}T.isDone?a():null===T.G?g.continue():g.continue(T.G)}}).next(()=>xe.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pu(n){return new xe((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Lf(i.target.error);t(a)}})}let km=!1;function Lf(n){const e=co.D((0,W.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return km||(km=!0,setTimeout(()=>{throw i},0)),i}}return n}class Gv{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,O.Z)(function*(){t.task=null;try{tt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Oa(i)?tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield xo(i)}yield t.nt(6e4)}))}}class kD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,O.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,c=!0;return xe.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!i.has(h))return tt("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,a).next(g=>{a-=g,i.add(h)});c=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(a,c)).next(g=>(tt("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>h.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,c)=>{const h=Sd(c);Ad(h,i)>0&&(i=h)}),new es(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class As{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Hv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ff(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}As.at=-1;class Lr{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new Lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new Lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xd(this.root,e,this.comparator,!0)}}class xd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??ki.RED,this.left=a??ki.EMPTY,this.right=c??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new ki(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ki.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const e=this.left.check();if(e!==this.right.check())throw Rt();return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1,ki.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(n,e,t,i,a){return this}insert(n,e,t){return new ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ur{constructor(e){this.comparator=e,this.data=new Lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lm(this.data.getIterator())}getIteratorFrom(e){return new Lm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ur(this.comparator);return t.data=e,t}}class Lm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uc(n){return n.hasNext()?n.getNext():void 0}class Ms{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new ur(zr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sc(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Li(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Li.EMPTY_BYTE_STRING=new Li("");const FD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mu(n){if($t(!!n),"string"==typeof n){let e=0;const t=FD.exec(n);if($t(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fr(n.seconds),nanos:Fr(n.nanos)}}function Fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cc(n){return"string"==typeof n?Li.fromBase64String(n):Li.fromUint8Array(n)}function ei(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fm(n){const e=n.mapValue.fields.__previous_value__;return ei(e)?Fm(e):e}function Rd(n){const e=mu(n.mapValue.fields.__local_write_time__.timestampValue);return new Sr(e.seconds,e.nanos)}class UD{constructor(e,t,i,a,c,h,g,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.useFetchStreams=T}}class yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}function Od(n){return null==n}function hl(n){return 0===n&&1/n==-1/0}const Ys={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uf={nullValue:"NULL_VALUE"};function lc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ei(n)?4:Vm(n)?9007199254740991:10:Rt()}function Ro(n,e){if(n===e)return!0;const t=lc(n);if(t!==lc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rd(n).isEqual(Rd(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=mu(i.timestampValue),h=mu(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,cc(n.bytesValue).isEqual(cc(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Fr(i.geoPointValue.latitude)===Fr(a.geoPointValue.latitude)&&Fr(i.geoPointValue.longitude)===Fr(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Fr(i.integerValue)===Fr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=Fr(i.doubleValue),h=Fr(a.doubleValue);return c===h?hl(c)===hl(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return sc(n.arrayValue.values||[],e.arrayValue.values||[],Ro);case 10:return function(i,a){const c=i.mapValue.fields||{},h=a.mapValue.fields||{};if(Hv(c)!==Hv(h))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===h[g]||!Ro(c[g],h[g])))return!1;return!0}(n,e);default:return Rt()}var a}function Pd(n,e){return void 0!==(n.values||[]).find(t=>Ro(t,e))}function Pa(n,e){if(n===e)return 0;const t=lc(n),i=lc(e);if(t!==i)return Wt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=Fr(a.integerValue||a.doubleValue),g=Fr(c.integerValue||c.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return BD(n.timestampValue,e.timestampValue);case 4:return BD(Rd(n),Rd(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(a,c){const h=cc(a),g=cc(c);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),g=c.split("/");for(let T=0;T<h.length&&T<g.length;T++){const x=Wt(h[T],g[T]);if(0!==x)return x}return Wt(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Wt(Fr(a.latitude),Fr(c.latitude));return 0!==h?h:Wt(Fr(a.longitude),Fr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],g=c.values||[];for(let T=0;T<h.length&&T<g.length;++T){const x=Pa(h[T],g[T]);if(x)return x}return Wt(h.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===Ys.mapValue&&c===Ys.mapValue)return 0;if(a===Ys.mapValue)return 1;if(c===Ys.mapValue)return-1;const h=a.fields||{},g=Object.keys(h),T=c.fields||{},x=Object.keys(T);g.sort(),x.sort();for(let j=0;j<g.length&&j<x.length;++j){const re=Wt(g[j],x[j]);if(0!==re)return re;const Te=Pa(h[g[j]],T[x[j]]);if(0!==Te)return Te}return Wt(g.length,x.length)}(n.mapValue,e.mapValue);default:throw Rt()}}function BD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=mu(n),i=mu(e),a=Wt(t.seconds,i.seconds);return 0!==a?a:Wt(t.nanos,i.nanos)}function dc(n){return Nd(n)}function Nd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=mu(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cc(n.bytesValue).toBase64():"referenceValue"in n?pt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",c=!0;for(const h of i.values||[])c?c=!1:a+=",",a+=Nd(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let c="{",h=!0;for(const g of a)h?h=!1:c+=",",c+=`${g}:${Nd(i.fields[g])}`;return c+"}"}(n.mapValue):Rt();var e}function ts(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bm(n){return!!n&&"integerValue"in n}function kd(n){return!!n&&"arrayValue"in n}function Oo(n){return!!n&&"nullValue"in n}function lo(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xs(n){return!!n&&"mapValue"in n}function fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=fl(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Vm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function VD(n){return"nullValue"in n?Uf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ts(yu.empty(),pt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Rt()}function jD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ts(yu.empty(),pt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ys:Rt()}function zv(n,e){const t=Pa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Wv(n,e){const t=Pa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=zr.emptyPath(),i={},a=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const T=this.getFieldsMap(t);this.applyChanges(T,i,a),i={},a=[],t=g.popLast()}h?i[g.lastSegment()]=fl(h):a.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());xs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];xs(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){gu(t,(a,c)=>e[a]=c);for(const a of i)delete e[a]}clone(){return new gi(fl(this.value))}}function pl(n){const e=[];return gu(n.fields,(t,i)=>{const a=new zr([t]);if(xs(i)){const c=pl(i.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new Ms(e)}class mr{constructor(e,t,i,a,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new mr(e,0,zt.min(),zt.min(),gi.empty(),0)}static newFoundDocument(e,t,i){return new mr(e,1,t,zt.min(),i,0)}static newNoDocument(e,t){return new mr(e,2,t,zt.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,zt.min(),gi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kv{constructor(e,t=null,i=[],a=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=h,this.endAt=g,this.ht=null}}function qv(n,e=null,t=[],i=[],a=null,c=null,h=null){return new Kv(n,e,t,i,a,c,h)}function _u(n){const e=ut(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(a=i).field.canonicalString()+a.op.toString()+dc(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),Od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>dc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>dc(i)).join(",")),e.ht=t}return e.ht}function vu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!$D(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(i=e.filters[a]).op||!t.field.isEqual(i.field)||!Ro(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rE(n.startAt,e.startAt)&&rE(n.endAt,e.endAt)}function Bf(n){return pt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ld(n,e){return n.filters.filter(t=>t instanceof mi&&t.field.isEqual(e))}function jm(n,e,t){let i=Uf,a=!0;for(const c of Ld(n,e)){let h=Uf,g=!0;switch(c.op){case"<":case"<=":h=VD(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,g=!1;break;case"!=":case"not-in":h=Uf}zv({value:i,inclusive:a},{value:h,inclusive:g})<0&&(i=h,a=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];zv({value:i,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(i=h,a=t.inclusive);break}return{value:i,inclusive:a}}function Vf(n,e,t){let i=Ys,a=!0;for(const c of Ld(n,e)){let h=Ys,g=!0;switch(c.op){case">=":case">":h=jD(c.value),g=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,g=!1;break;case"!=":case"not-in":h=Ys}Wv({value:i,inclusive:a},{value:h,inclusive:g})>0&&(i=h,a=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Wv({value:i,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(i=h,a=t.inclusive);break}return{value:i,inclusive:a}}class mi extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new $m(e,t,i):"array-contains"===t?new Xv(e,i):"in"===t?new Jv(e,i):"not-in"===t?new eE(e,i):"array-contains-any"===t?new tE(e,i):new mi(e,t,i)}static lt(e,t,i){return"in"===t?new Zv(e,i):new Qv(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Pa(t,this.value)):null!==t&&lc(this.value)===lc(t)&&this.ft(Pa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $m extends mi{constructor(e,t,i){super(e,t,i),this.key=pt.fromName(i.referenceValue)}matches(e){const t=pt.comparator(e.key,this.key);return this.ft(t)}}class Zv extends mi{constructor(e,t){super(e,"in",t),this.keys=Gm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qv extends mi{constructor(e,t){super(e,"not-in",t),this.keys=Gm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>pt.fromName(i.referenceValue))}class Xv extends mi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kd(t)&&Pd(t.arrayValue,this.value)}}class Jv extends mi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pd(this.value.arrayValue,t)}}class eE extends mi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pd(this.value.arrayValue,t)}}class tE extends mi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Pd(this.value.arrayValue,i))}}class Eu{constructor(e,t){this.position=e,this.inclusive=t}}class gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function $D(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function nE(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(i=c.field.isKeyField()?pt.comparator(pt.fromName(h.referenceValue),t.key):Pa(h,t.data.field(c.field)),"desc"===c.dir&&(i*=-1),0!==i)break}return i}function rE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ro(n.position[t],e.position[t]))return!1;return!0}class Na{constructor(e,t=null,i=[],a=[],c=null,h="F",g=null,T=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=T,this._t=null,this.wt=null}}function ml(n){return new Na(n)}function sE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yl(n){const e=ut(n);if(null===e._t){e._t=[];const t=function zm(n){for(const e of n.filters)if(e.dt())return e.field;return null}(e),i=function Hm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new gl(t)),e._t.push(new gl(zr.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new gl(zr.keyField(),c))}}}return e._t}function ds(n){const e=ut(n);if(!e.wt)if("F"===e.limitType)e.wt=qv(e.path,e.collectionGroup,yl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of yl(e))t.push(new gl(c.field,"desc"===c.dir?"asc":"desc"));const i=e.endAt?new Eu(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Eu(e.startAt.position,e.startAt.inclusive):null;e.wt=qv(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e.wt}function jf(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fd(n,e){return vu(ds(n),ds(e))&&n.limitType===e.limitType}function oE(n){return`${_u(ds(n))}|lt:${n.limitType}`}function Km(n){return`Query(target=${function Yv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${dc(i.value)}`;var i}).join(", ")}]`),Od(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>dc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>dc(t)).join(",")),`Target(${e})`}(ds(n))}; limitType=${n.limitType})`}function $f(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):pt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,c,h){const g=nE(a,c,h);return a.inclusive?g<=0:g<0}(t.startAt,yl(t),i)||t.endAt&&!function(a,c,h){const g=nE(a,c,h);return a.inclusive?g>=0:g>0}(t.endAt,yl(t),i)));var t,i}function Ym(n){return(e,t)=>{let i=!1;for(const a of yl(n)){const c=aE(a,e,t);if(0!==c)return c;i=i||a.field.isKeyField()}return 0}}function aE(n,e,t){const i=n.field.isKeyField()?pt.comparator(e.key,t.key):function(a,c,h){const g=c.data.field(a),T=h.data.field(a);return null!==g&&null!==T?Pa(g,T):Rt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Rt()}}function Zm(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hl(e)?"-0":e}}function Qm(n){return{integerValue:""+n}}function Xm(n,e){return function Um(n){return"number"==typeof n&&Number.isInteger(n)&&!hl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?Qm(e):Zm(n,e)}class Ud{constructor(){this._=void 0}}function uE(n,e,t){return n instanceof ho?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof hc?lE(n,e):n instanceof fo?GD(n,e):function(i,a){const c=Jm(i,a),h=HD(c)+HD(i.yt);return Bm(c)&&Bm(i.yt)?Qm(h):Zm(i.It,h)}(n,e)}function cE(n,e,t){return n instanceof hc?lE(n,e):n instanceof fo?GD(n,e):t}function Jm(n,e){return n instanceof Iu?Bm(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class ho extends Ud{}class hc extends Ud{constructor(e){super(),this.elements=e}}function lE(n,e){const t=ey(e);for(const i of n.elements)t.some(a=>Ro(a,i))||t.push(i);return{arrayValue:{values:t}}}class fo extends Ud{constructor(e){super(),this.elements=e}}function GD(n,e){let t=ey(e);for(const i of n.elements)t=t.filter(a=>!Ro(a,i));return{arrayValue:{values:t}}}class Iu extends Ud{constructor(e,t){super(),this.It=e,this.yt=t}}function HD(n){return Fr(n.integerValue||n.doubleValue)}function ey(n){return kd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _l{constructor(e,t){this.field=e,this.transform=t}}class Gt{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Hf{}function fc(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new pc(n.key,Ar.none()):new Bd(n.key,n.data,Ar.none());{const t=n.data,i=gi.empty();let a=new ur(zr.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?i.delete(c):i.set(c,h),a=a.add(c)}return new na(n.key,i,new Ms(a.toArray()),Ar.none())}}function zD(n,e,t){n instanceof Bd?function(i,a,c){const h=i.value.clone(),g=dE(i.fieldTransforms,a,c.transformResults);h.setAll(g),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof na?function(i,a,c){if(!Gf(i.precondition,a))return void a.convertToUnknownDocument(c.version);const h=dE(i.fieldTransforms,a,c.transformResults),g=a.data;g.setAll(ty(i)),g.setAll(h),a.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Du(n,e,t,i){return n instanceof Bd?function(a,c,h,g){if(!Gf(a.precondition,c))return h;const T=a.value.clone(),x=ny(a.fieldTransforms,g,c);return T.setAll(x),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),null}(n,e,t,i):n instanceof na?function(a,c,h,g){if(!Gf(a.precondition,c))return h;const T=ny(a.fieldTransforms,g,c),x=c.data;return x.setAll(ty(a)),x.setAll(T),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(j=>j.field))}(n,e,t,i):(h=t,Gf(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function zf(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),c=Jm(i.transform,a||null);null!=c&&(null===t&&(t=gi.empty()),t.set(i.field,c))}return t||null}function Ur(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&sc(t,i,(a,c)=>function iT(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof hc&&i instanceof hc||t instanceof fo&&i instanceof fo?sc(t.elements,i.elements,Ro):t instanceof Iu&&i instanceof Iu?Ro(t.yt,i.yt):t instanceof ho&&i instanceof ho);var t,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Bd extends Hf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class na extends Hf{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ty(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function dE(n,e,t){const i=new Map;$t(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,g=e.data.field(c.field);i.set(c.field,cE(h,g,t[a]))}return i}function ny(n,e,t){const i=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);i.set(a.field,uE(c,h,e))}return i}class pc extends Hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wf extends Hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hE{constructor(e){this.count=e}}var si,Vn;function fE(n){switch(n){default:return Rt();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function vl(n){if(void 0===n)return ii("GRPC error has no .code"),ke.UNKNOWN;switch(n){case si.OK:return ke.OK;case si.CANCELLED:return ke.CANCELLED;case si.UNKNOWN:return ke.UNKNOWN;case si.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case si.INTERNAL:return ke.INTERNAL;case si.UNAVAILABLE:return ke.UNAVAILABLE;case si.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case si.NOT_FOUND:return ke.NOT_FOUND;case si.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case si.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case si.ABORTED:return ke.ABORTED;case si.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case si.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case si.DATA_LOSS:return ke.DATA_LOSS;default:return Rt()}}(Vn=si||(si={}))[Vn.OK=0]="OK",Vn[Vn.CANCELLED=1]="CANCELLED",Vn[Vn.UNKNOWN=2]="UNKNOWN",Vn[Vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vn[Vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vn[Vn.NOT_FOUND=5]="NOT_FOUND",Vn[Vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vn[Vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vn[Vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vn[Vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vn[Vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vn[Vn.ABORTED=10]="ABORTED",Vn[Vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vn[Vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vn[Vn.INTERNAL=13]="INTERNAL",Vn[Vn.UNAVAILABLE=14]="UNAVAILABLE",Vn[Vn.DATA_LOSS=15]="DATA_LOSS";class wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,c]of i)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){gu(this.inner,(t,i)=>{for(const[a,c]of i)e(a,c)})}isEmpty(){return Ff(this.inner)}size(){return this.innerSize}}const WD=new Lr(pt.comparator);function Rs(){return WD}const Vd=new Lr(pt.comparator);function El(...n){let e=Vd;for(const t of n)e=e.insert(t.key,t);return e}function ry(n){let e=Vd;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Po(){return ka()}function pE(){return ka()}function ka(){return new wu(n=>n.toString(),(n,e)=>n.isEqual(e))}const jd=new Lr(pt.comparator),KD=new ur(pt.comparator);function mn(...n){let e=KD;for(const t of n)e=e.add(t);return e}const qD=new ur(Wt);function $d(){return qD}class Il{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Dl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Il(zt.min(),a,$d(),Rs(),mn())}}class Dl{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dl(i,t,mn(),mn(),mn())}}class Kf{constructor(e,t,i,a){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=a}}class iy{constructor(e,t){this.targetId=e,this.At=t}}class gE{constructor(e,t,i=Li.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class mE{constructor(){this.Rt=0,this.bt=ZD(),this.Pt=Li.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=mn(),t=mn(),i=mn();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Rt()}}),new Dl(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=ZD()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class sT{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Rs(),this.qt=YD(),this.Kt=new ur(Wt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:Rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,i=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(Bf(c))if(0===i){const h=new pt(c.path);this.jt(t,h,mr.newNoDocument(h,zt.min()))}else $t(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,h)=>{const g=this.Xt(h);if(g){if(c.current&&Bf(g.target)){const T=new pt(g.target.path);null!==this.Ut.get(T)||this.ee(h,T)||this.jt(h,T,mr.newNoDocument(T,e))}c.Dt&&(t.set(h,c.xt()),c.Nt())}});let i=mn();this.qt.forEach((c,h)=>{let g=!0;h.forEachWhile(T=>{const x=this.Xt(T);return!x||2===x.purpose||(g=!1,!1)}),g&&(i=i.add(c))}),this.Ut.forEach((c,h)=>h.setReadTime(e));const a=new Il(e,t,this.Kt,this.Ut,i);return this.Ut=Rs(),this.qt=YD(),this.Kt=new ur(Wt),a}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new mE,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ur(Wt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||tt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new mE),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function YD(){return new Lr(pt.comparator)}function ZD(){return new Lr(pt.comparator)}const oT={asc:"ASCENDING",desc:"DESCENDING"},yE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qf{constructor(e,t){this.databaseId=e,this.gt=t}}function Gd(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _E(n,e){return n.gt?e.toBase64():e.toUint8Array()}function vE(n,e){return Gd(n,e.toTimestamp())}function Wr(n){return $t(!!n),zt.fromTimestamp(function(e){const t=mu(e);return new Sr(t.seconds,t.nanos)}(n))}function sy(n,e){return(t=n,new Fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function EE(n){const e=Fn.fromString(n);return $t(ME(e)),e}function Hd(n,e){return sy(n.databaseId,e.path)}function ra(n,e){const t=EE(e);if(t.get(1)!==n.databaseId.projectId)throw new Ye(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ye(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pt(IE(t))}function oy(n,e){return sy(n.databaseId,e)}function ay(n){const e=EE(n);return 4===e.length?Fn.emptyPath():IE(e)}function zd(n){return new Fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IE(n){return $t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wl(n,e,t){return{name:Hd(n,e),fields:t.value.mapValue.fields}}function bl(n,e){let t;if(e instanceof Bd)t={update:wl(n,e.key,e.value)};else if(e instanceof pc)t={delete:Hd(n,e.key)};else if(e instanceof na)t={update:wl(n,e.key,e.data),updateMask:tw(e.fieldMask)};else{if(!(e instanceof Wf))return Rt();t={verify:Hd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof ho)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Iu)return{fieldPath:c.field.canonicalString(),increment:h.yt};throw Rt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:vE(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Rt()),t;var a}function uy(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ar.updateTime(Wr(a.updateTime)):void 0!==a.exists?Ar.exists(a.exists):Ar.none():Ar.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let g=null;"setToServerValue"in h?($t("REQUEST_TIME"===h.setToServerValue),g=new ho):"appendMissingElements"in h?g=new hc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?g=new fo(h.removeAllFromArray.values||[]):"increment"in h?g=new Iu(c,h.increment):Rt();const T=zr.fromServerFormat(h.fieldPath);return new _l(T,g)}(n,a)):[];var a;if(e.update){const a=ra(n,e.update.name),c=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Ms((e.updateMask.fieldPaths||[]).map(x=>zr.fromServerFormat(x)));return new na(a,c,h,t,i)}return new Bd(a,c,t,i)}if(e.delete){const a=ra(n,e.delete);return new pc(a,t)}if(e.verify){const a=ra(n,e.verify);return new Wf(a,t)}return Rt()}function TE(n,e){return{documents:[oy(n,e.path)]}}function Wd(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=oy(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oy(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(T){if(0===T.length)return;const x=T.map(j=>function(re){if("=="===re.op){if(lo(re.value))return{unaryFilter:{field:Tl(re.field),op:"IS_NAN"}};if(Oo(re.value))return{unaryFilter:{field:Tl(re.field),op:"IS_NULL"}}}else if("!="===re.op){if(lo(re.value))return{unaryFilter:{field:Tl(re.field),op:"IS_NOT_NAN"}};if(Oo(re.value))return{unaryFilter:{field:Tl(re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(re.field),op:JD(re.op),value:re.value}}}(j));return 1===x.length?x[0]:{compositeFilter:{op:"AND",filters:x}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(T){if(0!==T.length)return T.map(x=>{return{field:Tl((j=x).field),direction:XD(j.dir)};var j})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(x=e.limit,n.gt||Od(x)?x:{value:x});var x,g,T;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(T=e.endAt).inclusive,values:T.position}),t}function CE(n){let e=ay(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){$t(1===i);const j=t.from[0];j.allDescendants?a=j.collectionId:e=e.child(j.collectionId)}let c=[];t.where&&(c=cy(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(j=>{return new gl(bu((re=j).field),function(Te){switch(Te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(re.direction));var re}));let g=null;t.limit&&(g=function(j){let re;return re="object"==typeof j?j.value:j,Od(re)?null:re}(t.limit));let T=null;var j;t.startAt&&(T=new Eu((j=t.startAt).values||[],!!j.before));let x=null;return t.endAt&&(x=function(j){return new Eu(j.values||[],!j.before)}(t.endAt)),function iE(n,e,t,i,a,c,h,g){return new Na(n,e,t,i,a,c,h,g)}(e,a,h,c,g,"F",T,x)}function cy(n){return n?void 0!==n.unaryFilter?[AE(n)]:void 0!==n.fieldFilter?[ew(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cy(e)).reduce((e,t)=>e.concat(t)):Rt():[]}function XD(n){return oT[n]}function JD(n){return yE[n]}function Tl(n){return{fieldPath:n.canonicalString()}}function bu(n){return zr.fromServerFormat(n.fieldPath)}function ew(n){return mi.create(bu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function AE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=bu(n.unaryFilter.field);return mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=bu(n.unaryFilter.field);return mi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bu(n.unaryFilter.field);return mi.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=bu(n.unaryFilter.field);return mi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Rt()}}function tw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ME(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xE(e)),e=nw(n.get(t),e);return xE(e)}function nw(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function xE(n){return n+"\x01\x01"}function ia(n){const e=n.length;if($t(e>=2),2===e)return $t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Fn.emptyPath();const t=e-2,i=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&Rt(),n.charAt(h+1)){case"\x01":const g=n.substring(c,h);let T;0===a.length?T=g:(a+=g,T=a,a=""),i.push(T);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:Rt()}c=h+2}return new Fn(i)}const RE=["userId","batchId"];function Yf(n,e){return[n,hs(e)]}function ly(n,e,t){return[n,hs(e),t]}const OE={},rw=["prefixPath","collectionGroup","readTime","documentId"],iw=["prefixPath","collectionGroup","documentId"],PE=["collectionGroup","readTime","prefixPath","documentId"],sw=["canonicalId","targetId"],ow=["targetId","path"],aw=["path","targetId"],dy=["collectionId","parent"],hy=["indexId","uid"],NE=["uid","sequenceNumber"],fy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uw=["indexId","uid","orderedDocumentKey"],cw=["userId","collectionPath","documentId"],py=["userId","collectionPath","largestBatchId"],lw=["userId","collectionGroup","largestBatchId"],kE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cl=[...kE,"documentOverlays"],gy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LE=gy,aT=[...LE,"indexConfiguration","indexState","indexEntries"];class Zf extends Md{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function oi(n,e){const t=ut(n);return co.M(t.ie,e)}class my{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&zD(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Du(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Du(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=pE();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=t.has(a.key)?null:g;const T=fc(h,g);null!==T&&i.set(a.key,T),h.isValidDocument()||h.convertToNoDocument(zt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&sc(this.mutations,e.mutations,(t,i)=>Ur(t,i))&&sc(this.baseMutations,e.baseMutations,(t,i)=>Ur(t,i))}}class Kd{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){$t(e.mutations.length===i.length);let a=jd;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,i[h].version);return new Kd(e,t,i,a)}}class yy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class La{constructor(e,t,i,a,c=zt.min(),h=zt.min(),g=Li.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g}withSequenceNumber(e){return new La(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Qf{constructor(e){this.re=e}}function _y(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Hd(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Gd(a,c.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Tu(e.version)};else{if(!e.isUnknownDocument())return Rt();i.unknownDocument={path:t.path.toArray(),version:Tu(e.version)}}var a,c;return i}function qd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gc(n){const e=new Sr(n.seconds,n.nanoseconds);return zt.fromTimestamp(e)}function mc(n,e){const t=(e.baseMutations||[]).map(c=>uy(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const i=e.mutations.map(c=>uy(n.re,c)),a=Sr.fromMillis(e.localWriteTimeMs);return new my(e.batchId,a,t,i)}function Yd(n){const e=gc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gc(n.lastLimboFreeSnapshotVersion):zt.min();let i;var a;return void 0!==n.query.documents?($t(1===(a=n.query).documents.length),i=ds(ml(ay(a.documents[0])))):i=ds(CE(n.query)),new La(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Li.fromBase64String(n.resumeToken))}function UE(n,e){const t=Tu(e.snapshotVersion),i=Tu(e.lastLimboFreeSnapshotVersion);let a;a=Bf(e.target)?TE(n.re,e.target):Wd(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_u(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function Xf(n){const e=CE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jf(e,e.limit,"L"):e}function BE(n,e){return new yy(e.largestBatchId,uy(n.re,e.overlayMutation))}function vy(n,e){const t=e.path.lastSegment();return[n,hs(e.path.popLast()),t]}function VE(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tu(i.readTime),documentKey:hs(i.documentKey.path),largestBatchId:i.largestBatchId}}class dw{getBundleMetadata(e,t){return hw(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:gc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return hw(e).put({bundleId:(i=t).id,createTime:Tu(Wr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return fw(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:Xf(a.bundledQuery),readTime:gc(a.readTime)};var a})}saveNamedQuery(e,t){return fw(e).put({name:(i=t).name,readTime:Tu(Wr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function hw(n){return oi(n,"bundles")}function fw(n){return oi(n,"namedQueries")}class Jf{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Jf(e,t.uid||"")}getOverlay(e,t){return Zd(e).get(vy(this.userId,t)).next(i=>i?BE(this.It,i):null)}getOverlays(e,t){const i=Po();return xe.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((c,h)=>{const g=new yy(t,h);a.push(this.ue(e,g))}),xe.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(h=>a.add(hs(h.getCollectionPath())));const c=[];return a.forEach(h=>{const g=IDBKeyRange.bound([this.userId,h,i],[this.userId,h,i+1],!1,!0);c.push(Zd(e).Y("collectionPathOverlayIndex",g))}),xe.waitFor(c)}getOverlaysForCollection(e,t,i){const a=Po(),c=hs(t),h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Zd(e).W("collectionPathOverlayIndex",h).next(g=>{for(const T of g){const x=BE(this.It,T);a.set(x.getKey(),x)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const c=Po();let h;const g=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zd(e).Z({index:"collectionGroupOverlayIndex",range:g},(T,x,j)=>{const re=BE(this.It,x);c.size()<a||re.largestBatchId===h?(c.set(re.getKey(),re),h=re.largestBatchId):j.done()}).next(()=>c)}ue(e,t){return Zd(e).put(function(i,a,c){const[h,g,T]=vy(a,c.mutation.key);return{userId:a,collectionPath:g,documentId:T,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:bl(i.re,c.mutation)}}(this.It,this.userId,t))}}function Zd(n){return oi(n,"documentOverlays")}class yc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Fr(e.integerValue));else if("doubleValue"in e){const i=Fr(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),hl(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(cc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Vm(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Rt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const a of Object.keys(i))this._e(a,t),this.ae(i[a],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const a of i)this.ae(a,t)}ge(e,t){this.le(t,37),pt.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function pw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function jE(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const c=pw(255&t[a]);if(i+=c,8!==c)break}return i}(n);return Math.ceil(e/8)}yc.Te=new yc;class gw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),i=jE(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),i=jE(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class mw{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class yw{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Qd{constructor(){this.Be=new gw,this.Le=new mw(this.Be),this.Ue=new yw(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class _c{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new _c(this.indexId,this.documentKey,this.arrayValue,i)}}function vc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$E(n.arrayValue,e.arrayValue),0!==t?t:(t=$E(n.directionalValue,e.directionalValue),0!==t?t:pt.comparator(n.documentKey,e.documentKey)))}function $E(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Xd{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=Pm(e);if(void 0!==t&&!this.ze(t))return!1;const i=fu(e);let a=0,c=0;for(;a<i.length&&this.ze(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.je){const h=i[a];if(!this.He(this.je,h)||!this.Je(this.Ge[c++],h))return!1;++a}for(;a<i.length;++a){const h=i[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],h))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class GE{constructor(){this.Ye=new ep}addToCollectionParentIndex(e,t){return this.Ye.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(es.min())}updateCollectionGroup(e,t,i){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class ep{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new ur(Fn.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new ur(Fn.comparator)).toArray()}}const Jd=new Uint8Array(0);class HE{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new ep,this.Ze=new wu(i=>_u(i),(i,a)=>vu(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:i,parent:hs(a)};return Ey(e).put(c)}return xe.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Om(t),""],!1,!0);return Ey(e).W(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;i.push(ia(h.parent))}return i})}addFieldIndex(e,t){const i=tp(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var h;delete a.indexId;const c=i.add(a);if(t.indexState){const h=np(e);return c.next(g=>{h.put(VE(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const i=tp(e),a=np(e),c=Sl(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Sl(e);let a=!0;const c=new Map;return xe.forEach(this.tn(t),h=>this.en(e,h).next(g=>{a&&(a=!!g),c.set(h,g)})).next(()=>{if(a){let h=mn();const g=[];return xe.forEach(c,(T,x)=>{var j;tt("IndexedDbIndexManager",`Using index ${j=T,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(Xn=>`${Xn.fieldPath}:${Xn.kind}`).join(",")}`} to execute ${_u(t)}`);const re=function(Xn,Ei){const lr=Pm(Ei);if(void 0===lr)return null;for(const Kn of Ld(Xn,lr.fieldPath))switch(Kn.op){case"array-contains-any":return Kn.value.arrayValue.values||[];case"array-contains":return[Kn.value]}return null}(x,T),Te=function(Xn,Ei){const lr=new Map;for(const Kn of fu(Ei))for(const Fi of Ld(Xn,Kn.fieldPath))switch(Fi.op){case"==":case"in":lr.set(Kn.fieldPath.canonicalString(),Fi.value);break;case"not-in":case"!=":return lr.set(Kn.fieldPath.canonicalString(),Fi.value),Array.from(lr.values())}return null}(x,T),Ve=function(Xn,Ei){const lr=[];let Kn=!0;for(const Fi of fu(Ei)){const Ih=0===Fi.kind?jm(Xn,Fi.fieldPath,Xn.startAt):Vf(Xn,Fi.fieldPath,Xn.startAt);lr.push(Ih.value),Kn&&(Kn=Ih.inclusive)}return new Eu(lr,Kn)}(x,T),qe=function(Xn,Ei){const lr=[];let Kn=!0;for(const Fi of fu(Ei)){const Ih=0===Fi.kind?Vf(Xn,Fi.fieldPath,Xn.endAt):jm(Xn,Fi.fieldPath,Xn.endAt);lr.push(Ih.value),Kn&&(Kn=Ih.inclusive)}return new Eu(lr,Kn)}(x,T),It=this.nn(T,x,Ve),At=this.nn(T,x,qe),Wn=this.sn(T,x,Te),gr=this.rn(T.indexId,re,It,Ve.inclusive,At,qe.inclusive,Wn);return xe.forEach(gr,Xn=>i.J(Xn,t.limit).next(Ei=>{Ei.forEach(lr=>{const Kn=pt.fromSegments(lr.documentKey);h.has(Kn)||(h=h.add(Kn),g.push(Kn))})}))}).next(()=>g)}return xe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,a,c,h,g){const T=(null!=t?t.length:1)*Math.max(i.length,c.length),x=T/(null!=t?t.length:1),j=[];for(let re=0;re<T;++re){const Te=t?this.on(t[re/x]):Jd,Ve=this.un(e,Te,i[re%x],a),qe=this.cn(e,Te,c[re%x],h),It=g.map(At=>this.un(e,Te,At,!0));j.push(...this.createRange(Ve,qe,It))}return j}un(e,t,i,a){const c=new _c(e,pt.empty(),t,i);return a?c:c.Ke()}cn(e,t,i,a){const c=new _c(e,pt.empty(),t,i);return a?c.Ke():c}en(e,t){const i=new Xd(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const g of c)i.We(g)&&(!h||g.fields.length>h.fields.length)&&(h=g);return h})}getIndexType(e,t){let i=2;return xe.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==i&&c.fields.length<function(h){let g=new ur(zr.comparator),T=!1;for(const x of h.filters){const j=x;j.field.isKeyField()||("array-contains"===j.op||"array-contains-any"===j.op?T=!0:g=g.add(j.field))}for(const x of h.orderBy)x.field.isKeyField()||(g=g.add(x.field));return g.size+(T?1:0)}(a)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new Qd;for(const a of fu(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=i.qe(a.kind);yc.Te.ce(c,h)}return i.$e()}on(e){const t=new Qd;return yc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new Qd;return yc.Te.ce(ts(this.databaseId,t),i.qe(function(a){const c=fu(a);return 0===c.length?0:c[c.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let a=[];a.push(new Qd);let c=0;for(const h of fu(e)){const g=i[c++];for(const T of a)if(this.ln(t,h.fieldPath)&&kd(g))a=this.fn(a,h,g);else{const x=T.qe(h.kind);yc.Te.ce(g,x)}}return this.dn(a)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const a=[...e],c=[];for(const h of i.arrayValue.values||[])for(const g of a){const T=new Qd;T.seed(g.$e()),yc.Te.ce(h,T.qe(t.kind)),c.push(T)}return c}ln(e,t){return!!e.filters.find(i=>i instanceof mi&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=tp(e),a=np(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(c=>{const h=[];return xe.forEach(c,g=>a.get([g.indexId,this.uid]).next(T=>{h.push(function(x,j){const re=j?new oc(j.sequenceNumber,new es(gc(j.readTime),new pt(ia(j.documentKey)),j.largestBatchId)):oc.empty(),Te=x.fields.map(([Ve,qe])=>new Cd(zr.fromServerFormat(Ve),qe));return new Nf(x.indexId,x.collectionGroup,Te,re)}(g,T))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const c=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Wt(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=tp(e),c=np(e);return this._n(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>xe.forEach(g,T=>c.put(VE(T.indexId,this.user,h,i)))))}updateIndexEntries(e,t){const i=new Map;return xe.forEach(t,(a,c)=>{const h=i.get(a.collectionGroup);return(h?xe.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(g=>(i.set(a.collectionGroup,g),xe.forEach(g,T=>this.wn(e,a,T).next(x=>{const j=this.mn(c,T);return x.isEqual(j)?xe.resolve():this.gn(e,c,T,x,j)}))))})}yn(e,t,i,a){return Sl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,a){return Sl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const a=Sl(e);let c=new ur(vc);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(h,g)=>{c=c.add(new _c(i.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}mn(e,t){let i=new ur(vc);const a=this.an(t,e);if(null==a)return i;const c=Pm(t);if(null!=c){const h=e.data.field(c.fieldPath);if(kd(h))for(const g of h.arrayValue.values||[])i=i.add(new _c(t.indexId,e.key,this.on(g),a))}else i=i.add(new _c(t.indexId,e.key,Jd,a));return i}gn(e,t,i,a,c){tt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(g,T,x,j,re){const Te=g.getIterator(),Ve=T.getIterator();let qe=uc(Te),It=uc(Ve);for(;qe||It;){let At=!1,Wn=!1;if(qe&&It){const gr=x(qe,It);gr<0?Wn=!0:gr>0&&(At=!0)}else null!=qe?Wn=!0:At=!0;At?(j(It),It=uc(Ve)):Wn?(re(qe),qe=uc(Te)):(qe=uc(Te),It=uc(Ve))}}(a,c,vc,g=>{h.push(this.yn(e,t,i,g))},g=>{h.push(this.pn(e,t,i,g))}),xe.waitFor(h)}_n(e){let t=1;return np(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((h,g)=>vc(h,g)).filter((h,g,T)=>!g||0!==vc(h,T[g-1]));const a=[];a.push(e);for(const h of i){const g=vc(h,e),T=vc(h,t);if(0===g)a[0]=e.Ke();else if(g>0&&T<0)a.push(h),a.push(h.Ke());else if(T>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2)c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,Jd,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,Jd,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Iy)}getMinOffset(e,t){return xe.mapArray(this.tn(t),i=>this.en(e,i).next(a=>a||Rt())).next(Iy)}}function Ey(n){return oi(n,"collectionParents")}function Sl(n){return oi(n,"indexEntries")}function tp(n){return oi(n,"indexConfiguration")}function np(n){return oi(n,"indexState")}function Iy(n){$t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;Ad(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new es(e.readTime,e.documentKey,t)}const Dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zE(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let g=0;const T=i.Z({range:h},(j,re,Te)=>(g++,Te.delete()));c.push(T.next(()=>{$t(1===g)}));const x=[];for(const j of t.mutations){const re=ly(e,j.key.path,t.batchId);c.push(a.delete(re)),x.push(j.key)}return xe.waitFor(c).next(()=>x)}function rp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Rt();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class Cu{constructor(e,t,i,a){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=a,this.In={}}static oe(e,t,i,a){$t(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Cu(c,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).Z({index:"userMutationsIndex",range:i},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const c=fs(e),h=sa(e);return h.add({}).next(g=>{$t("number"==typeof g);const T=new my(g,t,i,a),x=function(Te,Ve,qe){const It=qe.baseMutations.map(Wn=>bl(Te.re,Wn)),At=qe.mutations.map(Wn=>bl(Te.re,Wn));return{userId:Ve,batchId:qe.batchId,localWriteTimeMs:qe.localWriteTime.toMillis(),baseMutations:It,mutations:At}}(this.It,this.userId,T),j=[];let re=new ur((Te,Ve)=>Wt(Te.canonicalString(),Ve.canonicalString()));for(const Te of a){const Ve=ly(this.userId,Te.key.path,g);re=re.add(Te.key.path.popLast()),j.push(h.put(x)),j.push(c.put(Ve,OE))}return re.forEach(Te=>{j.push(this.indexManager.addToCollectionParentIndex(e,Te))}),e.addOnCommittedListener(()=>{this.In[g]=T.keys()}),xe.waitFor(j).next(()=>T)})}lookupMutationBatch(e,t){return sa(e).get(t).next(i=>i?($t(i.userId===this.userId),mc(this.It,i)):null)}Tn(e,t){return this.In[t]?xe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let c=null;return sa(e).Z({index:"userMutationsIndex",range:a},(h,g,T)=>{g.userId===this.userId&&($t(g.batchId>=i),c=mc(this.It,g)),T.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return sa(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{i=c.batchId,h.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).W("userMutationsIndex",t).next(i=>i.map(a=>mc(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Yf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),c=[];return fs(e).Z({range:a},(h,g,T)=>{const[x,j,re]=h,Te=ia(j);if(x===this.userId&&t.path.isEqual(Te))return sa(e).get(re).next(Ve=>{if(!Ve)throw Rt();$t(Ve.userId===this.userId),c.push(mc(this.It,Ve))});T.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ur(Wt);const a=[];return t.forEach(c=>{const h=Yf(this.userId,c.path),g=IDBKeyRange.lowerBound(h),T=fs(e).Z({range:g},(x,j,re)=>{const[Te,Ve,qe]=x,It=ia(Ve);Te===this.userId&&c.path.isEqual(It)?i=i.add(qe):re.done()});a.push(T)}),xe.waitFor(a).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,c=Yf(this.userId,i),h=IDBKeyRange.lowerBound(c);let g=new ur(Wt);return fs(e).Z({range:h},(T,x,j)=>{const[re,Te,Ve]=T,qe=ia(Te);re===this.userId&&i.isPrefixOf(qe)?qe.length===a&&(g=g.add(Ve)):j.done()}).next(()=>this.En(e,g))}En(e,t){const i=[],a=[];return t.forEach(c=>{a.push(sa(e).get(c).next(h=>{if(null===h)throw Rt();$t(h.userId===this.userId),i.push(mc(this.It,h))}))}),xe.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return zE(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),xe.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xe.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return fs(e).Z({range:i},(c,h,g)=>{if(c[0]===this.userId){const T=ia(c[1]);a.push(T)}else g.done()}).next(()=>{$t(0===a.length)})})}containsKey(e,t){return WE(e,this.userId,t)}Rn(e){return KE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function WE(n,e,t){const i=Yf(e,t.path),a=i[1],c=IDBKeyRange.lowerBound(i);let h=!1;return fs(n).Z({range:c,X:!0},(g,T,x)=>{const[j,re,Te]=g;j===e&&re===a&&(h=!0),x.done()}).next(()=>h)}function sa(n){return oi(n,"mutations")}function fs(n){return oi(n,"documentMutations")}function KE(n){return oi(n,"mutationQueues")}class Fa{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Fa(0)}static vn(){return new Fa(-1)}}class eh{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new Fa(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>zt.fromTimestamp(new Sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Al(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>($t(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let a=0;const c=[];return Al(e).Z((h,g)=>{const T=Yd(g);T.sequenceNumber<=t&&null===i.get(T.targetId)&&(a++,c.push(this.removeTargetData(e,T)))}).next(()=>xe.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Al(e).Z((i,a)=>{const c=Yd(a);t(c)})}Vn(e){return qE(e).get("targetGlobalKey").next(t=>($t(null!==t),t))}Sn(e,t){return qE(e).put("targetGlobalKey",t)}Dn(e,t){return Al(e).put(UE(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=_u(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let c=null;return Al(e).Z({range:a,index:"queryTargetsIndex"},(h,g,T)=>{const x=Yd(g);vu(t,x.target)&&(c=x,T.done())}).next(()=>c)}addMatchingKeys(e,t,i){const a=[],c=Su(e);return t.forEach(h=>{const g=hs(h.path);a.push(c.put({targetId:i,path:g})),a.push(this.referenceDelegate.addReference(e,i,h))}),xe.waitFor(a)}removeMatchingKeys(e,t,i){const a=Su(e);return xe.forEach(t,c=>{const h=hs(c.path);return xe.waitFor([a.delete([i,h]),this.referenceDelegate.removeReference(e,i,c)])})}removeMatchingKeysForTargetId(e,t){const i=Su(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Su(e);let c=mn();return a.Z({range:i,X:!0},(h,g,T)=>{const x=ia(h[1]),j=new pt(x);c=c.add(j)}).next(()=>c)}containsKey(e,t){const i=hs(t.path),a=IDBKeyRange.bound([i],[Om(i)],!1,!0);let c=0;return Su(e).Z({index:"documentTargetsIndex",X:!0,range:a},([h,g],T,x)=>{0!==h&&(c++,x.done())}).next(()=>c>0)}se(e,t){return Al(e).get(t).next(i=>i?Yd(i):null)}}function Al(n){return oi(n,"targets")}function qE(n){return oi(n,"targetGlobal")}function Su(n){return oi(n,"targetDocuments")}function th([n,e],[t,i]){const a=Wt(n,t);return 0===a?Wt(e,i):a}class ip{constructor(e){this.xn=e,this.buffer=new ur(th),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();th(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _w{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,O.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Oa(i)?tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield xo(i)}yield t.Fn(3e5)}))}}class vw{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return xe.resolve(As.at);const i=new ip(t);return this.$n.forEachTarget(e,a=>i.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>i.On(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(Dy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dy):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,a,c,h,g,T,x;const j=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(re=>(re>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${re}`),a=this.params.maximumSequenceNumbersToCollect):a=re,h=Date.now(),this.nthSequenceNumber(e,a))).next(re=>(i=re,g=Date.now(),this.removeTargets(e,i,t))).next(re=>(c=re,T=Date.now(),this.removeOrphanedDocuments(e,i))).next(re=>(x=Date.now(),Am()<=Q.in.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-j}ms\n\tDetermined least recently used ${a} in `+(g-h)+`ms\n\tRemoved ${c} targets in `+(T-g)+`ms\n\tRemoved ${re} documents in `+(x-T)+`ms\nTotal Duration: ${x-j}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:re})))}}class YE{constructor(e,t){this.db=e,this.garbageCollector=new vw(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,a)=>t(a))}addReference(e,t,i){return nh(e,i)}removeReference(e,t,i){return nh(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return nh(e,t)}Gn(e,t){return function(i,a){let c=!1;return KE(i).tt(h=>WE(i,h,a).next(g=>(g&&(c=!0),xe.resolve(!g)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(h,g)=>{if(g<=t){const T=this.Gn(e,h).next(x=>{if(!x)return c++,i.getEntry(e,h).next(()=>(i.removeEntry(h,zt.min()),Su(e).delete([0,hs(h.path)])))});a.push(T)}}).next(()=>xe.waitFor(a)).next(()=>i.apply(e)).next(()=>c)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return nh(e,t)}Kn(e,t){const i=Su(e);let a,c=As.at;return i.Z({index:"documentTargetsIndex"},([h,g],{path:T,sequenceNumber:x})=>{0===h?(c!==As.at&&t(new pt(ia(a)),c),c=x,a=T):c=As.at}).next(()=>{c!==As.at&&t(new pt(ia(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nh(n,e){return Su(n).put((i=n.currentSequenceNumber,{targetId:0,path:hs(e.path),sequenceNumber:i}));var i}class sp{constructor(){this.changes=new wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?xe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ZE{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Ua(e).put(i)}removeEntry(e,t,i){return Ua(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],qd(c),h[h.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=mr.newInvalidDocument(t);return Ua(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ec(t))},(a,c)=>{i=this.jn(t,c)}).next(()=>i)}Wn(e,t){let i={size:0,document:mr.newInvalidDocument(t)};return Ua(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ec(t))},(a,c)=>{i={document:this.jn(t,c),size:rp(c)}}).next(()=>i)}getEntries(e,t){let i=Rs();return this.zn(e,t,(a,c)=>{const h=this.jn(a,c);i=i.insert(a,h)}).next(()=>i)}Hn(e,t){let i=Rs(),a=new Lr(pt.comparator);return this.zn(e,t,(c,h)=>{const g=this.jn(c,h);i=i.insert(c,g),a=a.insert(c,rp(h))}).next(()=>({documents:i,Jn:a}))}zn(e,t,i){if(t.isEmpty())return xe.resolve();let a=new ur(op);t.forEach(T=>a=a.add(T));const c=IDBKeyRange.bound(Ec(a.first()),Ec(a.last())),h=a.getIterator();let g=h.getNext();return Ua(e).Z({index:"documentKeyIndex",range:c},(T,x,j)=>{const re=pt.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;g&&op(g,re)<0;)i(g,null),g=h.getNext();g&&g.isEqual(re)&&(i(g,x),g=h.hasNext()?h.getNext():null),g?j.j(Ec(g)):j.done()}).next(()=>{for(;g;)i(g,null),g=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,i){const a=[t.popLast().toArray(),t.lastSegment(),qd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ua(e).W(IDBKeyRange.bound(a,c,!0)).next(h=>{let g=Rs();for(const T of h){const x=this.jn(pt.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);g=g.insert(x.key,x)}return g})}getAllFromCollectionGroup(e,t,i,a){let c=Rs();const h=wy(t,i),g=wy(t,es.max());return Ua(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,g,!0)},(T,x,j)=>{const re=this.jn(pt.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(re.key,re),c.size===a&&j.done()}).next(()=>c)}newChangeBuffer(e){return new Ew(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Iw(e).get("remoteDocumentGlobalKey").next(t=>($t(!!t),t))}Qn(e,t){return Iw(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function FE(n,e){let t;if(e.document)t=function DE(n,e,t){const i=ra(n,e.name),a=Wr(e.updateTime),c=new gi({mapValue:{fields:e.fields}}),h=mr.newFoundDocument(i,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=pt.fromSegments(e.noDocument.path),a=gc(e.noDocument.readTime);t=mr.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rt();{const i=pt.fromSegments(e.unknownDocument.path),a=gc(e.unknownDocument.version);t=mr.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new Sr(i[0],i[1]);return zt.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(zt.min()))return i}return mr.newInvalidDocument(e)}}function QE(n){return new ZE(n)}class Ew extends sp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new wu(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new ur((c,h)=>Wt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const g=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,g.readTime)),h.isValidDocument()){const T=_y(this.Yn.It,h);a=a.add(c.path.popLast()),i+=rp(T)-g.size,t.push(this.Yn.addEntry(e,c,T))}else if(i-=g.size,this.trackRemovals){const T=_y(this.Yn.It,h.convertToNoDocument(zt.min()));t.push(this.Yn.addEntry(e,c,T))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,i)),xe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:a})=>(a.forEach((c,h)=>{this.Xn.set(c,{size:h,readTime:i.get(c).readTime})}),i))}}function Iw(n){return oi(n,"remoteDocumentGlobal")}function Ua(n){return oi(n,"remoteDocumentsV14")}function Ec(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wy(n,e){const t=e.documentKey.path.toArray();return[n,qd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function op(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<i.length-2;++c)if(a=Wt(t[c],i[c]),a)return a;return a=Wt(t.length,i.length),a||(a=Wt(t[t.length-2],i[i.length-2]),a||Wt(t[t.length-1],i[i.length-1]))}class by{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class XE{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.getBaseDocument(e,t,i))).next(a=>(null!==i&&Du(i.mutation,a,Ms.empty(),Sr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,mn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=mn()){const a=Po();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(c=>{let h=El();return c.forEach((g,T)=>{h=h.insert(g,T.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=Po();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,mn()))}populateOverlays(e,t,i){const a=[];return i.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,g)=>{t.set(h,g)})})}computeViews(e,t,i,a){let c=Rs();const h=ka(),g=ka();return t.forEach((T,x)=>{const j=i.get(x.key);a.has(x.key)&&(void 0===j||j.mutation instanceof na)?c=c.insert(x.key,x):void 0!==j&&(h.set(x.key,j.mutation.getFieldMask()),Du(j.mutation,x,j.mutation.getFieldMask(),Sr.now()))}),this.recalculateAndSaveOverlays(e,c).next(T=>(T.forEach((x,j)=>h.set(x,j)),t.forEach((x,j)=>{var re;return g.set(x,new by(j,null!==(re=h.get(x))&&void 0!==re?re:null))}),g))}recalculateAndSaveOverlays(e,t){const i=ka();let a=new Lr((h,g)=>h-g),c=mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const g of h)g.keys().forEach(T=>{const x=t.get(T);if(null===x)return;let j=i.get(T)||Ms.empty();j=g.applyToLocalView(x,j),i.set(T,j);const re=(a.get(g.batchId)||mn()).add(T);a=a.insert(g.batchId,re)})}).next(()=>{const h=[],g=a.getReverseIterator();for(;g.hasNext();){const T=g.getNext(),x=T.key,j=T.value,re=pE();j.forEach(Te=>{if(!c.has(Te)){const Ve=fc(t.get(Te),i.get(Te));null!==Ve&&re.set(Te,Ve),c=c.add(Te)}}),h.push(this.documentOverlayCache.saveOverlays(e,x,re))}return xe.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return pt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function Wm(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):xe.resolve(Po());let g=-1,T=c;return h.next(x=>xe.forEach(x,(j,re)=>(g<re.largestBatchId&&(g=re.largestBatchId),c.get(j)?xe.resolve():this.getBaseDocument(e,j,re).next(Te=>{T=T.insert(j,Te)}))).next(()=>this.populateOverlays(e,x,c)).next(()=>this.computeViews(e,T,x,mn())).next(j=>({batchId:g,changes:ry(j)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pt(t)).next(i=>{let a=El();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let c=El();return this.indexManager.getCollectionParents(e,a).next(h=>xe.forEach(h,g=>{const T=(x=t,j=g.child(a),new Na(j,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));var x,j;return this.getDocumentsMatchingCollectionQuery(e,T,i).next(x=>{x.forEach((j,re)=>{c=c.insert(j,re)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(c=>{c.forEach((g,T)=>{const x=T.getKey();null===a.get(x)&&(a=a.insert(x,mr.newInvalidDocument(x)))});let h=El();return a.forEach((g,T)=>{const x=c.get(g);void 0!==x&&Du(x.mutation,T,Ms.empty(),Sr.now()),$f(t,T)&&(h=h.insert(g,T))}),h})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):xe.resolve(mr.newInvalidDocument(t))}}class Dw{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return xe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Wr(i.createTime)}),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:Xf(i.bundledQuery),readTime:Wr(i.readTime)}),xe.resolve();var i}}class ww{constructor(){this.overlays=new Lr(pt.comparator),this.es=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Po();return xe.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,c)=>{this.ue(e,t,c)}),xe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.es.get(i);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(i)),xe.resolve()}getOverlaysForCollection(e,t,i){const a=Po(),c=t.length+1,h=new pt(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const T=g.getNext().value,x=T.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&T.largestBatchId>i&&a.set(T.getKey(),T)}return xe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new Lr((x,j)=>x-j);const h=this.overlays.getIterator();for(;h.hasNext();){const x=h.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>i){let j=c.get(x.largestBatchId);null===j&&(j=Po(),c=c.insert(x.largestBatchId,j)),j.set(x.getKey(),x)}}const g=Po(),T=c.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach((x,j)=>g.set(x,j)),!(g.size()>=a)););return xe.resolve(g)}ue(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const h=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new yy(t,i));let c=this.es.get(t);void 0===c&&(c=mn(),this.es.set(t,c)),this.es.set(t,c.add(i.key))}}class Ty{constructor(){this.ns=new ur(yi.ss),this.rs=new ur(yi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new yi(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new yi(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new pt(new Fn([])),i=new yi(t,e),a=new yi(t,e+1),c=[];return this.rs.forEachInRange([i,a],h=>{this.cs(h),c.push(h.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new pt(new Fn([])),i=new yi(t,e),a=new yi(t,e+1);let c=mn();return this.rs.forEachInRange([i,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new yi(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class yi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return pt.comparator(e.key,t.key)||Wt(e._s,t._s)}static os(e,t){return Wt(e._s,t._s)||pt.comparator(e.key,t.key)}}class Cy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ur(yi.ss)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const c=this.ws;this.ws++;const h=new my(c,t,i,a);this.mutationQueue.push(h);for(const g of a)this.gs=this.gs.add(new yi(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return xe.resolve(h)}lookupMutationBatch(e,t){return xe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return xe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new yi(t,0),a=new yi(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([i,a],h=>{const g=this.ys(h._s);c.push(g)}),xe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ur(Wt);return t.forEach(a=>{const c=new yi(a,0),h=new yi(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,h],g=>{i=i.add(g._s)})}),xe.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;pt.isDocumentKey(c)||(c=c.child(""));const h=new yi(new pt(c),0);let g=new ur(Wt);return this.gs.forEachWhile(T=>{const x=T.key.path;return!!i.isPrefixOf(x)&&(x.length===a&&(g=g.add(T._s)),!0)},h),xe.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(i=>{const a=this.ys(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){$t(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return xe.forEach(t.mutations,a=>{const c=new yi(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new yi(t,0),a=this.gs.firstAfterOrEqual(i);return xe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return xe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class JE{constructor(e){this.Es=e,this.docs=new Lr(pt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,h=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return xe.resolve(i?i.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let i=Rs();return t.forEach(a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():mr.newInvalidDocument(a))}),xe.resolve(i)}getAllFromCollection(e,t,i){let a=Rs();const c=new pt(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:g,value:{document:T}}=h.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Ad(Sd(T),i)<=0||(a=a.insert(T.key,T.mutableCopy()))}return xe.resolve(a)}getAllFromCollectionGroup(e,t,i,a){Rt()}As(e,t){return xe.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new bw(this)}getSize(e){return xe.resolve(this.size)}}class bw extends sp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(i)}),xe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class e0{constructor(e){this.persistence=e,this.Rs=new wu(t=>_u(t),vu),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ty,this.targetCount=0,this.vs=Fa.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,a)=>t(a)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),xe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Dn(t),xe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.Rs.forEach((h,g)=>{g.sequenceNumber<=t&&null===i.get(g.targetId)&&(this.Rs.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),xe.waitFor(c).next(()=>a)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return xe.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),xe.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),xe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return xe.resolve(i)}containsKey(e,t){return xe.resolve(this.Ps.containsKey(t))}}class Sy{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new As(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new e0(this),this.indexManager=new GE,this.remoteDocumentCache=new JE(i=>this.referenceDelegate.xs(i)),this.It=new Qf(t),this.Ns=new Dw(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ww,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new Cy(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){tt("MemoryPersistence","Starting transaction:",e);const a=new Tw(this.Ss.next());return this.referenceDelegate.ks(),i(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return xe.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class Tw extends Md{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Fs=new Ty,this.$s=null}static Bs(e){return new rh(e)}get Ls(){if(this.$s)return this.$s;throw Rt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),xe.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Ls,i=>{const a=pt.fromPath(i);return this.Us(e,a).next(c=>{c||t.removeEntry(a,zt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return xe.or([()=>xe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class t0{constructor(e){this.It=e}$(e,t,i,a){const c=new dl("createOrUpgrade",t);var g;i<1&&a>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RE,{unique:!0}),g.createObjectStore("documentMutations"),n0(e),function(g){g.createObjectStore("remoteDocuments")}(e));let h=xe.resolve();return i<3&&a>=3&&(0!==i&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),n0(e)),h=h.next(()=>function(g){const T=g.store("targetGlobal"),x={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zt.min().toTimestamp(),targetCount:0};return T.put("targetGlobalKey",x)}(c))),i<4&&a>=4&&(0!==i&&(h=h.next(()=>function(g,T){return T.store("mutations").W().next(x=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RE,{unique:!0});const j=T.store("mutations"),re=x.map(Te=>j.put(Te));return xe.waitFor(re)})}(e,c))),h=h.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(h=h.next(()=>this.qs(c))),i<6&&a>=6&&(h=h.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),i<7&&a>=7&&(h=h.next(()=>this.Gs(c))),i<8&&a>=8&&(h=h.next(()=>this.Qs(e,c))),i<9&&a>=9&&(h=h.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(h=h.next(()=>this.js(c))),i<11&&a>=11&&(h=h.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(h=h.next(()=>{!function(g){const T=g.createObjectStore("documentOverlays",{keyPath:cw});T.createIndex("collectionPathOverlayIndex",py,{unique:!1}),T.createIndex("collectionGroupOverlayIndex",lw,{unique:!1})}(e)})),i<13&&a>=13&&(h=h.next(()=>function(g){const T=g.createObjectStore("remoteDocumentsV14",{keyPath:rw});T.createIndex("documentKeyIndex",iw),T.createIndex("collectionGroupIndex",PE)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(h=h.next(()=>this.zs(e,c))),i<15&&a>=15&&(h=h.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:hy}).createIndex("sequenceNumberIndex",NE,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:fy}).createIndex("documentKeyIndex",uw,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,a)=>{t+=rp(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>xe.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",h).next(g=>xe.forEach(g,T=>{$t(T.userId===c.userId);const x=mc(this.It,T);return zE(e,c.userId,x).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return i.Z((h,g)=>{const T=new Fn(h),x=[0,hs(T)];c.push(t.get(x).next(j=>j?xe.resolve():t.put({targetId:0,path:hs(T),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>xe.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:dy});const i=t.store("collectionParents"),a=new ep,c=h=>{if(a.add(h)){const g=h.lastSegment(),T=h.popLast();return i.put({collectionId:g,parent:hs(T)})}};return t.store("remoteDocuments").Z({X:!0},(h,g)=>{const T=new Fn(h);return c(T.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,g,T],x)=>{const j=ia(g);return c(j.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,a)=>{const c=Yd(a),h=UE(this.It,c);return t.put(h)})}Ws(e,t){const i=t.store("remoteDocuments"),a=[];return i.Z((c,h)=>{const g=t.store("remoteDocumentsV14"),T=(x=h,x.document?new pt(Fn.fromString(x.document.name).popFirst(5)):x.noDocument?pt.fromSegments(x.noDocument.path):x.unknownDocument?pt.fromSegments(x.unknownDocument.path):Rt()).path.toArray();var x;const j={prefixPath:T.slice(0,T.length-2),collectionGroup:T[T.length-2],documentId:T[T.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(g.put(j))}).next(()=>xe.waitFor(a))}zs(e,t){const i=t.store("mutations"),a=QE(this.It),c=new Sy(rh.Bs,this.It.re);return i.W().next(h=>{const g=new Map;return h.forEach(T=>{var x;let j=null!==(x=g.get(T.userId))&&void 0!==x?x:mn();mc(this.It,T).keys().forEach(re=>j=j.add(re)),g.set(T.userId,j)}),xe.forEach(g,(T,x)=>{const j=new Ni(x),re=Jf.oe(this.It,j),Te=c.getIndexManager(j),Ve=Cu.oe(j,this.It,Te,c.referenceDelegate);return new XE(a,Ve,re,Te).recalculateAndSaveOverlaysForDocumentKeys(new Zf(t,As.at),T).next()})})}}function n0(n){n.createObjectStore("targetDocuments",{keyPath:ow}).createIndex("documentTargetsIndex",aw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sw,{unique:!0}),n.createObjectStore("targetGlobal")}const ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class up{constructor(e,t,i,a,c,h,g,T,x,j,re=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=c,this.window=h,this.document=g,this.Js=x,this.Ys=j,this.Xs=re,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Te=>Promise.resolve(),!up.C())throw new Ye(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YE(this,a),this.ii=t+"main",this.It=new Qf(T),this.ri=new co(this.ii,this.Xs,new t0(this.It)),this.Cs=new eh(this.referenceDelegate,this.It),this.remoteDocumentCache=QE(this.It),this.Ns=new dw,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===j&&ii("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(ke.FAILED_PRECONDITION,ap);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new As(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,O.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,O.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,O.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ba(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Oa(e))return tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return _i(e).get("owner").next(t=>xe.resolve(this.mi(t)))}gi(e){return Ba(e).delete(this.clientId)}yi(){var e=this;return(0,O.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=oi(i,"clientMetadata");return a.W().next(c=>{const h=e.Ii(c,18e5),g=c.filter(T=>-1===h.indexOf(T));return xe.forEach(g,T=>a.delete(T.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?xe.resolve(!0):_i(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ye(ke.FAILED_PRECONDITION,ap);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ba(e).W().next(i=>void 0===this.Ii(i,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,g=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,O.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Zf(t,As.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ba(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Cu.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HE(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Jf.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){tt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(h=this.Xs)?aT:14===h?LE:13===h?gy:12===h?Cl:11===h?kE:void Rt();var h;let g;return this.ri.runTransaction(e,a,c,T=>(g=new Zf(T,this.Ss?this.Ss.next():As.at),"readwrite-primary"===t?this.fi(g).next(x=>!!x||this.di(g)).next(x=>{if(!x)throw ii(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ye(ke.FAILED_PRECONDITION,jv);return i(g)}).next(x=>this.wi(g).next(()=>x)):this.Vi(g).next(()=>i(g)))).then(T=>(g.raiseOnCommittedEvent(),T))}Vi(e){return _i(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ye(ke.FAILED_PRECONDITION,ap)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _i(e).put("owner",t)}static C(){return co.C()}_i(e){const t=_i(e);return t.get("owner").next(i=>this.mi(i)?(tt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):xe.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(ii(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,W.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return tt("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ii("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ii("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _i(n){return oi(n,"owner")}function Ba(n){return oi(n,"clientMetadata")}class My{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=a}static Ci(e,t){let i=mn(),a=mn();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new My(e,t.fromCache,i,a)}}class Cw{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,i)).next(c=>c||this.Mi(e,t))}ki(e,t){if(sE(t))return xe.resolve(null);let i=ds(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=jf(t,null,"F"),i=ds(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const h=mn(...c);return this.Ni.getDocuments(e,h).next(g=>this.indexManager.getMinOffset(e,i).next(T=>{const x=this.Fi(t,g);return this.$i(t,x,h,T.readTime)?this.ki(e,jf(t,null,"F")):this.Bi(e,x,t,T)}))})))}Oi(e,t,i,a){return sE(t)||a.isEqual(zt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(c=>{const h=this.Fi(t,c);return this.$i(t,h,i,a)?this.Mi(e,t):(Am()<=Q.in.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Km(t)),this.Bi(e,h,t,function Vv(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=zt.fromTimestamp(1e9===i?new Sr(t+1,0):new Sr(t,i));return new es(a,pt.empty(),e)}(a,-1)))})}Fi(e,t){let i=new ur(Ym(e));return t.forEach((a,c)=>{$f(e,c)&&(i=i.add(c))}),i}$i(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return Am()<=Q.in.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Km(t)),this.Ni.getDocumentsMatchingQuery(e,t,es.min())}Bi(e,t,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class uT{constructor(e,t,i,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new Lr(Wt),this.qi=new wu(c=>_u(c),vu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XE(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function xy(n,e,t,i){return new uT(n,e,t,i)}function Ry(n,e){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,O.Z)(function*(n,e){const t=ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const h=[],g=[];let T=mn();for(const x of a){h.push(x.batchId);for(const j of x.mutations)T=T.add(j.key)}for(const x of c){g.push(x.batchId);for(const j of x.mutations)T=T.add(j.key)}return t.localDocuments.getDocuments(i,T).next(x=>({ji:x,removedBatchIds:h,addedBatchIds:g}))})})}),Ic.apply(this,arguments)}function Sw(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,g,T,x){const j=T.batch,re=j.keys();let Te=xe.resolve();return re.forEach(Ve=>{Te=Te.next(()=>x.getEntry(g,Ve)).next(qe=>{const It=T.docVersions.get(Ve);$t(null!==It),qe.version.compareTo(It)<0&&(j.applyToRemoteDocument(qe,T),qe.isValidDocument()&&(qe.setReadTime(T.commitVersion),x.addEntry(qe)))})}),Te.next(()=>h.mutationQueue.removeMutationBatch(g,j))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let g=mn();for(let T=0;T<h.mutationResults.length;++T)h.mutationResults[T].transformResults.length>0&&(g=g.add(h.batch.mutations[T].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function cp(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Aw(n,e){const t=ut(n),i=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const g=[];e.targetChanges.forEach((j,re)=>{const Te=a.get(re);if(!Te)return;g.push(t.Cs.removeMatchingKeys(c,j.removedDocuments,re).next(()=>t.Cs.addMatchingKeys(c,j.addedDocuments,re)));let Ve=Te.withSequenceNumber(c.currentSequenceNumber);var qe,It,At;e.targetMismatches.has(re)?Ve=Ve.withResumeToken(Li.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):j.resumeToken.approximateByteSize()>0&&(Ve=Ve.withResumeToken(j.resumeToken,i)),a=a.insert(re,Ve),It=Ve,At=j,(0===(qe=Te).resumeToken.approximateByteSize()||It.snapshotVersion.toMicroseconds()-qe.snapshotVersion.toMicroseconds()>=3e8||At.addedDocuments.size+At.modifiedDocuments.size+At.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(c,Ve))});let T=Rs(),x=mn();if(e.documentUpdates.forEach(j=>{e.resolvedLimboDocuments.has(j)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,j))}),g.push(function Oy(n,e,t){let i=mn(),a=mn();return t.forEach(c=>i=i.add(c)),e.getEntries(n,i).next(c=>{let h=Rs();return t.forEach((g,T)=>{const x=c.get(g);T.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(g)),T.isNoDocument()&&T.version.isEqual(zt.min())?(e.removeEntry(g,T.readTime),h=h.insert(g,T)):!x.isValidDocument()||T.version.compareTo(x.version)>0||0===T.version.compareTo(x.version)&&x.hasPendingWrites?(e.addEntry(T),h=h.insert(g,T)):tt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",x.version," Watch version:",T.version)}),{Wi:h,zi:a}})}(c,h,e.documentUpdates).next(j=>{T=j.Wi,x=j.zi})),!i.isEqual(zt.min())){const j=t.Cs.getLastRemoteSnapshotVersion(c).next(re=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,i));g.push(j)}return xe.waitFor(g).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,T,x)).next(()=>T)}).then(c=>(t.Ui=a,c))}function Mw(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ml(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Cs.getTargetData(i,e).next(c=>c?(a=c,xe.resolve(a)):t.Cs.allocateTargetId(i).next(h=>(a=new La(e,h,0,i.currentSequenceNumber),t.Cs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ui.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function xl(n,e,t){return ih.apply(this,arguments)}function ih(){return ih=(0,O.Z)(function*(n,e,t){const i=ut(n),a=i.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",c,h=>i.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Oa(h))throw h;tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ui=i.Ui.remove(e),i.qi.delete(a.target)}),ih.apply(this,arguments)}function sh(n,e,t){const i=ut(n);let a=zt.min(),c=mn();return i.persistence.runTransaction("Execute query","readonly",h=>function(g,T,x){const j=ut(g),re=j.qi.get(x);return void 0!==re?xe.resolve(j.Ui.get(re)):j.Cs.getTargetData(T,x)}(i,h,ds(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(h,g.targetId).next(T=>{c=T})}).next(()=>i.Li.getDocumentsMatchingQuery(h,e,t?a:zt.min(),t?c:mn())).next(g=>(function lp(n,e,t){let i=n.Ki.get(e)||zt.min();t.forEach((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),n.Ki.set(e,i)}(i,function qm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),g),{documents:g,Hi:c})))}class Ny{constructor(){this.activeTargetIds=$d()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o0{constructor(){this.Lr=new Ny,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ny,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a0{qr(e){}shutdown(){}}class Ly{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Rw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u0{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class c0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,a,c){const h=this.ho(e,t);tt("RestConnection","Sending: ",h,i);const g={};return this.lo(g,a,c),this.fo(e,h,g,i).then(T=>(tt("RestConnection","Received: ",T),T),T=>{throw ta("RestConnection",`${e} failed with error: `,T,"url: ",h,"request:",i),T})}_o(e,t,i,a,c,h){return this.ao(e,t,i,a,c)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+il,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),i&&i.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${Rw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((c,h)=>{const g=new OD;g.setWithCredentials(!0),g.listenOnce(xD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Cm.NO_ERROR:const x=g.getResponseJson();tt("Connection","XHR received:",JSON.stringify(x)),c(x);break;case Cm.TIMEOUT:tt("Connection",'RPC "'+e+'" timed out'),h(new Ye(ke.DEADLINE_EXCEEDED,"Request time out"));break;case Cm.HTTP_ERROR:const j=g.getStatus();if(tt("Connection",'RPC "'+e+'" failed with status:',j,"response text:",g.getResponseText()),j>0){const re=g.getResponseJson().error;if(re&&re.status&&re.message){const Te=function(Ve){const qe=Ve.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(qe)>=0?qe:ke.UNKNOWN}(re.status);h(new Ye(Te,re.message))}else h(new Ye(ke.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new Ye(ke.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{tt("Connection",'RPC "'+e+'" completed.')}});const T=JSON.stringify(a);g.send(t,"POST",T,i,15)})}wo(e,t,i){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=nT(),h=MD(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new RD({})),this.lo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const T=a.join("");tt("Connection","Creating WebChannel: "+T,g);const x=c.createWebChannel(T,g);let j=!1,re=!1;const Te=new u0({Hr:qe=>{re?tt("Connection","Not sending because WebChannel is closed:",qe):(j||(tt("Connection","Opening WebChannel transport."),x.open(),j=!0),tt("Connection","WebChannel sending:",qe),x.send(qe))},Jr:()=>x.close()}),Ve=(qe,It,At)=>{qe.listen(It,Wn=>{try{At(Wn)}catch(gr){setTimeout(()=>{throw gr},0)}})};return Ve(x,rl.EventType.OPEN,()=>{re||tt("Connection","WebChannel transport opened.")}),Ve(x,rl.EventType.CLOSE,()=>{re||(re=!0,tt("Connection","WebChannel transport closed"),Te.io())}),Ve(x,rl.EventType.ERROR,qe=>{re||(re=!0,ta("Connection","WebChannel transport errored:",qe),Te.io(new Ye(ke.UNAVAILABLE,"The operation could not be completed")))}),Ve(x,rl.EventType.MESSAGE,qe=>{var It;if(!re){const At=qe.data[0];$t(!!At);const Wn=At,gr=Wn.error||(null===(It=Wn[0])||void 0===It?void 0:It.error);if(gr){tt("Connection","WebChannel received error:",gr);const Xn=gr.status;let Ei=function(Kn){const Fi=si[Kn];if(void 0!==Fi)return vl(Fi)}(Xn),lr=gr.message;void 0===Ei&&(Ei=ke.INTERNAL,lr="Unknown error status: "+Xn+" with message "+gr.message),re=!0,Te.io(new Ye(Ei,lr)),x.close()}else tt("Connection","WebChannel received:",At),Te.ro(At)}}),Ve(h,Fv.STAT_EVENT,qe=>{qe.stat===Sm.PROXY?tt("Connection","Detected buffering proxy"):qe.stat===Sm.NOPROXY&&tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Te.so()},0),Te}}function mp(){return typeof document<"u"?document:null}function Ol(n){return new qf(n,!0)}class Fy{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&tt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Uy{constructor(e,t,i,a,c,h,g,T){this.Hs=e,this.vo=i,this.Vo=a,this.So=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=T,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Fy(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,O.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,O.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var i=this;return(0,O.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==e?i.No.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):t&&t.code===ke.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Do===t&&this.Qo(i,a)},i=>{e(()=>{const a=new Ye(ke.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(a)})})}Qo(e,t){const i=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{i(()=>this.jo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Mo(){var e=this;this.state=5,this.No.Ro((0,O.Z)(function*(){e.state=0,e.start()}))}jo(e){return tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d0 extends Uy{constructor(e,t,i,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,h),this.It=c}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function QD(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(T=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===T?1:"REMOVE"===T?2:"CURRENT"===T?3:"RESET"===T?4:Rt(),a=e.targetChange.targetIds||[],c=function(T,x){return T.gt?($t(void 0===x||"string"==typeof x),Li.fromBase64String(x||"")):($t(void 0===x||x instanceof Uint8Array),Li.fromUint8Array(x||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(T){const x=void 0===T.code?ke.UNKNOWN:vl(T.code);return new Ye(x,T.message||"")}(h);t=new gE(i,a,c,g||null)}else if("documentChange"in e){const i=e.documentChange,a=ra(n,i.document.name),c=Wr(i.document.updateTime),h=new gi({mapValue:{fields:i.document.fields}}),g=mr.newFoundDocument(a,c,h);t=new Kf(i.targetIds||[],i.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const i=e.documentDelete,a=ra(n,i.document),c=i.readTime?Wr(i.readTime):zt.min(),h=mr.newNoDocument(a,c);t=new Kf([],i.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const i=e.documentRemove,a=ra(n,i.document);t=new Kf([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Rt();{const i=e.filter,c=new hE(i.count||0);t=new iy(i.targetId,c)}}var T;return t}(this.It,e),i=function(a){if(!("targetChange"in a))return zt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?zt.min():c.readTime?Wr(c.readTime):zt.min()}(e);return this.listener.zo(t,i)}Ho(e){const t={};t.database=zd(this.It),t.addTarget=function(a,c){let h;const g=c.target;return h=Bf(g)?{documents:TE(a,g)}:{query:Wd(a,g)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=_E(a,c.resumeToken):c.snapshotVersion.compareTo(zt.min())>0&&(h.readTime=Gd(a,c.snapshotVersion.toTimestamp())),h}(this.It,e);const i=function SE(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Lo(t)}Jo(e){const t={};t.database=zd(this.It),t.removeTarget=e,this.Lo(t)}}class h0 extends Uy{constructor(e,t,i,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,h),this.It=c,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if($t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function bE(n,e){return n&&n.length>0?($t(void 0!==e),n.map(t=>function(i,a){let c=Wr(i.updateTime?i.updateTime:a);return c.isEqual(zt.min())&&(c=Wr(a)),new Gt(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Wr(e.commitTime);return this.listener.tu(i,t)}return $t(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=zd(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>bl(this.It,i))};this.Lo(t)}}class f0 extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=i,this.It=a,this.su=!1}iu(){if(this.su)throw new Ye(ke.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So.ao(e,t,i,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ye(ke.UNKNOWN,a.toString())})}_o(e,t,i,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.So._o(e,t,i,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ye(ke.UNKNOWN,c.toString())})}terminate(){this.su=!0}}class lT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ii(t),this.uu=!1):tt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class p0{constructor(e,t,i,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=c,this.gu.qr(g=>{i.enqueueAndForget((0,O.Z)(function*(){var T;oa(h)&&(tt("RemoteStore","Restarting streams for network reachability change."),yield(T=(0,O.Z)(function*(x){const j=ut(x);j.wu.add(4),yield ah(j),j.yu.set("Unknown"),j.wu.delete(4),yield yp(j)}),function(x){return T.apply(this,arguments)})(h))}))}),this.yu=new lT(i,a)}}function yp(n){return g0.apply(this,arguments)}function g0(){return g0=(0,O.Z)(function*(n){if(oa(n))for(const e of n.mu)yield e(!0)}),g0.apply(this,arguments)}function ah(n){return m0.apply(this,arguments)}function m0(){return m0=(0,O.Z)(function*(n){for(const e of n.mu)yield e(!1)}),m0.apply(this,arguments)}function Vy(n,e){const t=ut(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),_0(t)?Pl(t):kl(t).Oo()&&y0(t,e))}function _p(n,e){const t=ut(n),i=kl(t);t._u.delete(e),i.Oo()&&Pw(t,e),0===t._u.size&&(i.Oo()?i.$o():oa(t)&&t.yu.set("Unknown"))}function y0(n,e){n.pu.Mt(e.targetId),kl(n).Ho(e)}function Pw(n,e){n.pu.Mt(e),kl(n).Jo(e)}function Pl(n){n.pu=new sT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),kl(n).start(),n.yu.cu()}function _0(n){return oa(n)&&!kl(n).ko()&&n._u.size>0}function oa(n){return 0===ut(n).wu.size}function uh(n){n.pu=void 0}function v0(n){return vp.apply(this,arguments)}function vp(){return vp=(0,O.Z)(function*(n){n._u.forEach((e,t)=>{y0(n,e)})}),vp.apply(this,arguments)}function dT(n,e){return ch.apply(this,arguments)}function ch(){return ch=(0,O.Z)(function*(n,e){uh(n),_0(n)?(n.yu.lu(e),Pl(n)):n.yu.set("Unknown")}),ch.apply(this,arguments)}function E0(n,e,t){return jy.apply(this,arguments)}function jy(){return jy=(0,O.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof gE&&2===e.state&&e.cause)try{yield(i=(0,O.Z)(function*(a,c){const h=c.cause;for(const g of c.targetIds)a._u.has(g)&&(yield a.remoteSyncer.rejectListen(g,h),a._u.delete(g),a.pu.removeTarget(g))}),function(a,c){return i.apply(this,arguments)})(n,e)}catch(i){tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield lh(n,i)}else if(e instanceof Kf?n.pu.Gt(e):e instanceof iy?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(zt.min()))try{const i=yield cp(n.localStore);t.compareTo(i)>=0&&(yield function(a,c){const h=a.pu.te(c);return h.targetChanges.forEach((g,T)=>{if(g.resumeToken.approximateByteSize()>0){const x=a._u.get(T);x&&a._u.set(T,x.withResumeToken(g.resumeToken,c))}}),h.targetMismatches.forEach(g=>{const T=a._u.get(g);if(!T)return;a._u.set(g,T.withResumeToken(Li.EMPTY_BYTE_STRING,T.snapshotVersion)),Pw(a,g);const x=new La(T.target,g,1,T.sequenceNumber);y0(a,x)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(i){tt("RemoteStore","Failed to raise snapshot:",i),yield lh(n,i)}var i}),jy.apply(this,arguments)}function lh(n,e,t){return I0.apply(this,arguments)}function I0(){return I0=(0,O.Z)(function*(n,e,t){if(!Oa(e))throw e;n.wu.add(1),yield ah(n),n.yu.set("Offline"),t||(t=()=>cp(n.localStore)),n.asyncQueue.enqueueRetryable((0,O.Z)(function*(){tt("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield yp(n)}))}),I0.apply(this,arguments)}function Nw(n,e){return e().catch(t=>lh(n,t,e))}function Nl(n){return $y.apply(this,arguments)}function $y(){return $y=(0,O.Z)(function*(n){const e=ut(n),t=vi(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Ep(e);)try{const a=yield Mw(e.localStore,i);if(null===a){0===e.du.length&&t.$o();break}i=a.batchId,kw(e,a)}catch(a){yield lh(e,a)}Lw(e)&&Fw(e)}),$y.apply(this,arguments)}function Ep(n){return oa(n)&&n.du.length<10}function kw(n,e){n.du.push(e);const t=vi(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function Lw(n){return oa(n)&&!vi(n).ko()&&n.du.length>0}function Fw(n){vi(n).start()}function hT(n){return Gy.apply(this,arguments)}function Gy(){return Gy=(0,O.Z)(function*(n){vi(n).nu()}),Gy.apply(this,arguments)}function Uw(n){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,O.Z)(function*(n){const e=vi(n);for(const t of n.du)e.Zo(t.mutations)}),Hy.apply(this,arguments)}function fT(n,e,t){return zy.apply(this,arguments)}function zy(){return zy=(0,O.Z)(function*(n,e,t){const i=n.du.shift(),a=Kd.from(i,e,t);yield Nw(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Nl(n)}),zy.apply(this,arguments)}function D0(n,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,O.Z)(function*(n,e){var t;e&&vi(n).Xo&&(yield(t=(0,O.Z)(function*(i,a){if(fE(c=a.code)&&c!==ke.ABORTED){const h=i.du.shift();vi(i).Fo(),yield Nw(i,()=>i.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Nl(i)}var c}),function(i,a){return t.apply(this,arguments)})(n,e)),Lw(n)&&Fw(n)}),Ip.apply(this,arguments)}function Bw(n,e){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,O.Z)(function*(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const i=oa(t);t.wu.add(3),yield ah(t),i&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield yp(t)}),Zs.apply(this,arguments)}function dh(){return dh=(0,O.Z)(function*(n,e){const t=ut(n);e?(t.wu.delete(2),yield yp(t)):e||(t.wu.add(2),yield ah(t),t.yu.set("Unknown"))}),dh.apply(this,arguments)}function kl(n){return n.Iu||(n.Iu=function(e,t,i){const a=ut(e);return a.iu(),new d0(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,i)}(n.datastore,n.asyncQueue,{Yr:v0.bind(null,n),Zr:dT.bind(null,n),zo:E0.bind(null,n)}),n.mu.push(function(){var e=(0,O.Z)(function*(t){t?(n.Iu.Fo(),_0(n)?Pl(n):n.yu.set("Unknown")):(yield n.Iu.stop(),uh(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function vi(n){return n.Tu||(n.Tu=function(e,t,i){const a=ut(e);return a.iu(),new h0(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,i)}(n.datastore,n.asyncQueue,{Yr:hT.bind(null,n),Zr:D0.bind(null,n),eu:Uw.bind(null,n),tu:fT.bind(null,n)}),n.mu.push(function(){var e=(0,O.Z)(function*(t){t?(n.Tu.Fo(),yield Nl(n)):(yield n.Tu.stop(),n.du.length>0&&(tt("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Ky{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,i,a,c){const h=Date.now()+i,g=new Ky(e,t,h,a,c);return g.start(i),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Au(n,e){if(ii("AsyncQueue",`${e}: ${n}`),Oa(n))return new Ye(ke.UNAVAILABLE,`${e}: ${n}`);throw n}class Ll{constructor(e){this.comparator=e?(t,i)=>e(t,i)||pt.comparator(t.key,i.key):(t,i)=>pt.comparator(t.key,i.key),this.keyedMap=El(),this.sortedSet=new Lr(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Ll;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class w0{constructor(){this.Eu=new Lr(pt.comparator)}track(e){const t=e.doc.key,i=this.Eu.get(t);i?0!==e.type&&3===i.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==i.type?this.Eu=this.Eu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Eu=this.Eu.remove(t):1===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Rt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Mu{constructor(e,t,i,a,c,h,g,T,x){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=T,this.hasCachedResults=x}static fromInitialDocuments(e,t,i,a,c){const h=[];return t.forEach(g=>{h.push({type:0,doc:g})}),new Mu(e,t,Ll.emptySet(t),h,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class b0{constructor(){this.Ru=void 0,this.listeners=[]}}class T0{constructor(){this.queries=new wu(e=>oE(e),Fd),this.onlineState="Unknown",this.bu=new Set}}function Dp(){return Dp=(0,O.Z)(function*(n,e){const t=ut(n),i=e.query;let a=!1,c=t.queries.get(i);if(c||(a=!0,c=new b0),a)try{c.Ru=yield t.onListen(i)}catch(h){const g=Au(h,`Initialization of query '${Km(e.query)}' failed`);return void e.onError(g)}t.queries.set(i,c),c.listeners.push(e),e.Pu(t.onlineState),c.Ru&&e.vu(c.Ru)&&hh(t)}),Dp.apply(this,arguments)}function Yy(){return Yy=(0,O.Z)(function*(n,e){const t=ut(n),i=e.query;let a=!1;const c=t.queries.get(i);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),Yy.apply(this,arguments)}function C0(n,e){const t=ut(n);let i=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const g of h.listeners)g.vu(a)&&(i=!0);h.Ru=a}}i&&hh(t)}function Vw(n,e,t){const i=ut(n),a=i.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);i.queries.delete(e)}function hh(n){n.bu.forEach(e=>{e.next()})}class aa{constructor(e,t,i){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new Mu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class jw{constructor(e){this.key=e}}class M0{constructor(e){this.key=e}}class x0{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=mn(),this.mutatedKeys=mn(),this.Gu=Ym(e),this.Qu=new Ll(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new w0,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,g=!1;const T="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,x="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((j,re)=>{const Te=a.get(j),Ve=$f(this.query,re)?re:null,qe=!!Te&&this.mutatedKeys.has(Te.key),It=!!Ve&&(Ve.hasLocalMutations||this.mutatedKeys.has(Ve.key)&&Ve.hasCommittedMutations);let At=!1;Te&&Ve?Te.data.isEqual(Ve.data)?qe!==It&&(i.track({type:3,doc:Ve}),At=!0):this.Hu(Te,Ve)||(i.track({type:2,doc:Ve}),At=!0,(T&&this.Gu(Ve,T)>0||x&&this.Gu(Ve,x)<0)&&(g=!0)):!Te&&Ve?(i.track({type:0,doc:Ve}),At=!0):Te&&!Ve&&(i.track({type:1,doc:Te}),At=!0,(T||x)&&(g=!0)),At&&(Ve?(h=h.add(Ve),c=It?c.add(j):c.delete(j)):(h=h.delete(j),c=c.delete(j)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const j="F"===this.query.limitType?h.last():h.first();h=h.delete(j.key),c=c.delete(j.key),i.track({type:1,doc:j})}return{Qu:h,zu:i,$i:g,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Au();c.sort((x,j)=>function(re,Te){const Ve=qe=>{switch(qe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return Ve(re)-Ve(Te)}(x.type,j.type)||this.Gu(x.doc,j.doc)),this.Ju(i);const h=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,T=g!==this.qu;return this.qu=g,0!==c.length||T?{snapshot:new Mu(this.query,e.Qu,a,c,e.mutatedKeys,0===g,T,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new w0,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=mn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new M0(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new jw(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=mn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Mu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class $w{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Gw{constructor(e){this.key=e,this.nc=!1}}class R0{constructor(e,t,i,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new wu(g=>oE(g),Fd),this.rc=new Map,this.oc=new Set,this.uc=new Lr(pt.comparator),this.cc=new Map,this.ac=new Ty,this.hc={},this.lc=new Map,this.fc=Fa.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function pT(n,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,O.Z)(function*(n,e){const t=Lp(n);let i,a;const c=t.ic.get(e);if(c)i=c.targetId,t.sharedClientState.addLocalQueryTarget(i),a=c.view.ec();else{const h=yield Ml(t.localStore,ds(e));t.isPrimaryClient&&Vy(t.remoteStore,h);const g=t.sharedClientState.addLocalQueryTarget(h.targetId);i=h.targetId,a=yield Zy(t,e,i,"current"===g,h.resumeToken)}return a}),Tp.apply(this,arguments)}function Zy(n,e,t,i,a){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,O.Z)(function*(n,e,t,i,a){n._c=(re,Te,Ve)=>{return(qe=(0,O.Z)(function*(It,At,Wn,gr){let Xn=At.view.Wu(Wn);Xn.$i&&(Xn=yield sh(It.localStore,At.query,!1).then(({documents:Kn})=>At.view.Wu(Kn,Xn)));const Ei=gr&&gr.targetChanges.get(At.targetId),lr=At.view.applyChanges(Xn,It.isPrimaryClient,Ei);return t_(It,At.targetId,lr.Xu),lr.snapshot}),function(It,At,Wn,gr){return qe.apply(this,arguments)})(n,re,Te,Ve);var qe};const c=yield sh(n.localStore,e,!0),h=new x0(e,c.Hi),g=h.Wu(c.documents),T=Dl.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),x=h.applyChanges(g,n.isPrimaryClient,T);t_(n,t,x.Xu);const j=new $w(e,t,h);return n.ic.set(e,j),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),x.snapshot}),Cp.apply(this,arguments)}function gT(n,e){return fh.apply(this,arguments)}function fh(){return fh=(0,O.Z)(function*(n,e){const t=ut(n),i=t.ic.get(e),a=t.rc.get(i.targetId);if(a.length>1)return t.rc.set(i.targetId,a.filter(c=>!Fd(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xl(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),_p(t.remoteStore,i.targetId),wc(t,i.targetId)}).catch(xo))):(wc(t,i.targetId),yield xl(t.localStore,i.targetId,!0))}),fh.apply(this,arguments)}function Sp(){return Sp=(0,O.Z)(function*(n,e,t){const i=i_(n);try{const a=yield function(c,h){const g=ut(c),T=Sr.now(),x=h.reduce((Te,Ve)=>Te.add(Ve.key),mn());let j,re;return g.persistence.runTransaction("Locally write mutations","readwrite",Te=>{let Ve=Rs(),qe=mn();return g.Gi.getEntries(Te,x).next(It=>{Ve=It,Ve.forEach((At,Wn)=>{Wn.isValidDocument()||(qe=qe.add(At))})}).next(()=>g.localDocuments.getOverlayedDocuments(Te,Ve)).next(It=>{j=It;const At=[];for(const Wn of h){const gr=zf(Wn,j.get(Wn.key).overlayedDocument);null!=gr&&At.push(new na(Wn.key,gr,pl(gr.value.mapValue),Ar.exists(!0)))}return g.mutationQueue.addMutationBatch(Te,T,At,h)}).next(It=>{re=It;const At=It.applyToLocalDocumentSet(j,qe);return g.documentOverlayCache.saveOverlays(Te,It.batchId,At)})}).then(()=>({batchId:re.batchId,changes:ry(j)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,h,g){let T=c.hc[c.currentUser.toKey()];T||(T=new Lr(Wt)),T=T.insert(h,g),c.hc[c.currentUser.toKey()]=T}(i,a.batchId,t),yield xu(i,a.changes),yield Nl(i.remoteStore)}catch(a){const c=Au(a,"Failed to persist write");t.reject(c)}}),Sp.apply(this,arguments)}function Qy(n,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,O.Z)(function*(n,e){const t=ut(n);try{const i=yield Aw(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.cc.get(c);h&&($t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.nc=!0:a.modifiedDocuments.size>0?$t(h.nc):a.removedDocuments.size>0&&($t(h.nc),h.nc=!1))}),yield xu(t,i,e)}catch(i){yield xo(i)}}),Ap.apply(this,arguments)}function Xy(n,e,t){const i=ut(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ic.forEach((c,h)=>{const g=h.view.Pu(e);g.snapshot&&a.push(g.snapshot)}),function(c,h){const g=ut(c);g.onlineState=h;let T=!1;g.queries.forEach((x,j)=>{for(const re of j.listeners)re.Pu(h)&&(T=!0)}),T&&hh(g)}(i.eventManager,e),a.length&&i.sc.zo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Mp(n,e,t){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,O.Z)(function*(n,e,t){const i=ut(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.cc.get(e),c=a&&a.key;if(c){let h=new Lr(pt.comparator);h=h.insert(c,mr.newNoDocument(c,zt.min()));const g=mn().add(c),T=new Il(zt.min(),new Map,new ur(Wt),h,g);yield Qy(i,T),i.uc=i.uc.remove(c),i.cc.delete(e),U0(i)}else yield xl(i.localStore,e,!1).then(()=>wc(i,e,t)).catch(xo)}),Fl.apply(this,arguments)}function P0(n,e){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,O.Z)(function*(n,e){const t=ut(n),i=e.batch.batchId;try{const a=yield Sw(t.localStore,e);L0(t,i,null),k0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield xu(t,a)}catch(a){yield xo(a)}}),Jy.apply(this,arguments)}function N0(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,O.Z)(function*(n,e,t){const i=ut(n);try{const a=yield function(c,h){const g=ut(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",T=>{let x;return g.mutationQueue.lookupMutationBatch(T,h).next(j=>($t(null!==j),x=j.keys(),g.mutationQueue.removeMutationBatch(T,j))).next(()=>g.mutationQueue.performConsistencyCheck(T)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(T,x,h)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,x)).next(()=>g.localDocuments.getDocuments(T,x))})}(i.localStore,e);L0(i,e,t),k0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield xu(i,a)}catch(a){yield xo(a)}}),xp.apply(this,arguments)}function k0(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function L0(n,e,t){const i=ut(n);let a=i.hc[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.hc[i.currentUser.toKey()]=a}}function wc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||F0(n,i)})}function F0(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(_p(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),U0(n))}function t_(n,e,t){for(const i of t)i instanceof jw?(n.ac.addReference(i.key,e),zw(n,i)):i instanceof M0?(tt("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||F0(n,i.key)):Rt()}function zw(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(tt("SyncEngine","New document in limbo: "+t),n.oc.add(i),U0(n))}function U0(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new pt(Fn.fromString(e)),i=n.fc.next();n.cc.set(i,new Gw(t)),n.uc=n.uc.insert(t,i),Vy(n.remoteStore,new La(ds(ml(t.path)),i,2,As.at))}}function xu(n,e,t){return B0.apply(this,arguments)}function B0(){return B0=(0,O.Z)(function*(n,e,t){const i=ut(n),a=[],c=[],h=[];var g;i.ic.isEmpty()||(i.ic.forEach((g,T)=>{h.push(i._c(T,e,t).then(x=>{if((x||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(T.targetId,x?.fromCache?"not-current":"current"),x){a.push(x);const j=My.Ci(T.targetId,x);c.push(j)}}))}),yield Promise.all(h),i.sc.zo(a),yield(g=(0,O.Z)(function*(T,x){const j=ut(T);try{yield j.persistence.runTransaction("notifyLocalViewChanges","readwrite",re=>xe.forEach(x,Te=>xe.forEach(Te.Si,Ve=>j.persistence.referenceDelegate.addReference(re,Te.targetId,Ve)).next(()=>xe.forEach(Te.Di,Ve=>j.persistence.referenceDelegate.removeReference(re,Te.targetId,Ve)))))}catch(re){if(!Oa(re))throw re;tt("LocalStore","Failed to update sequence numbers: "+re)}for(const re of x){const Te=re.targetId;if(!re.fromCache){const Ve=j.Ui.get(Te),It=Ve.withLastLimboFreeSnapshotVersion(Ve.snapshotVersion);j.Ui=j.Ui.insert(Te,It)}}}),function(T,x){return g.apply(this,arguments)})(i.localStore,c))}),B0.apply(this,arguments)}function mT(n,e){return V0.apply(this,arguments)}function V0(){return V0=(0,O.Z)(function*(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){tt("SyncEngine","User change. New user:",e.toKey());const i=yield Ry(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(h=>{h.forEach(g=>{g.reject(new Ye(ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield xu(t,i.ji)}var a}),V0.apply(this,arguments)}function Ww(n,e){const t=ut(n),i=t.cc.get(e);if(i&&i.nc)return mn().add(i.key);{let a=mn();const c=t.rc.get(e);if(!c)return a;for(const h of c){const g=t.ic.get(h);a=a.unionWith(g.view.ju)}return a}}function Lp(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ww.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mp.bind(null,e),e.sc.zo=C0.bind(null,e.eventManager),e.sc.wc=Vw.bind(null,e.eventManager),e}function i_(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N0.bind(null,e),e}class H0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,O.Z)(function*(){t.It=Ol(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return xy(this.persistence,new Cw,e.initialUser,this.It)}yc(e){return new Sy(rh.Bs,this.It)}gc(e){return new o0}terminate(){var e=this;return(0,O.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Yw extends H0{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,O.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield i_(i.Ac.syncEngine),yield Nl(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return xy(this.persistence,new Cw,e.initialUser,this.It)}Tc(e,t){return new _w(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new kD(t,this.persistence);return new Gv(e.asyncQueue,i)}yc(e){const t=function Ay(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new up(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,function l0(){return typeof window<"u"?window:null}(),mp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new o0}}class Fp{initialize(e,t){var i=this;return(0,O.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>Xy(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=mT.bind(null,i.syncEngine),yield function Wy(n,e){return dh.apply(this,arguments)}(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new T0}createDatastore(e){const t=Ol(e.databaseInfo.databaseId),i=new c0(e.databaseInfo);return new f0(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,c=g=>Xy(this.syncEngine,g,0),h=Ly.C()?new Ly:new a0,new p0(t,i,a,c,h);var t,i,a,c,h}createSyncEngine(e,t){return function(i,a,c,h,g,T,x){const j=new R0(i,a,c,h,g,T);return x&&(j.dc=!0),j}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,O.Z)(function*(t){const i=ut(t);tt("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield ah(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Up(n,e,t){if(!t)throw new Ye(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W0(n){if(!pt.isDocumentKey(n))throw new Ye(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ul(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Rt()}function jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ye(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ul(n);throw new Ye(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}const Bp=new Map;class K0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ye(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ye(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Zw(n,e,t,i){if(!0===e&&!0===i)throw new Ye(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ye(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ye(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new uo;switch(t.type){case"gapi":return new al(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ye(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bp.get(e);t&&(tt("ComponentProvider","Removing Datastore"),Bp.delete(e),t.terminate())}(this),Promise.resolve()}}class ai{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ai(this.firestore,e,this._key)}}class ns{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class ua extends ns{constructor(e,t,i){super(e,t,ml(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ai(this.firestore,null,new pt(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function Qw(n,e,...t){if(n=(0,W.m9)(n),1===arguments.length&&(e=ic.R()),Up("doc","path",e),n instanceof mh){const i=Fn.fromString(e,...t);return W0(i),new ai(n,null,new pt(i))}{if(!(n instanceof ai||n instanceof ua))throw new Ye(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Fn.fromString(e,...t));return W0(i),new ai(n.firestore,n instanceof ua?n.converter:null,new pt(i))}}class Vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class r{constructor(e,t,i,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Ni.UNAUTHENTICATED,this.clientId=ic.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var h=(0,O.Z)(function*(g){tt("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(i,h=>(tt("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,O.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Au(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function s(n,e){return o.apply(this,arguments)}function o(){return o=(0,O.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,O.Z)(function*(c){i.isEqual(c)||(yield Ry(e.localStore,c),i=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),o.apply(this,arguments)}function u(n,e){return l.apply(this,arguments)}function l(){return l=(0,O.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield d(n);tt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>Bw(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>Bw(e.remoteStore,c)),n.onlineComponents=e}),l.apply(this,arguments)}function d(n){return f.apply(this,arguments)}function f(){return f=(0,O.Z)(function*(n){return n.offlineComponents||(tt("FirestoreClient","Using default OfflineComponentProvider"),yield s(n,new H0)),n.offlineComponents}),f.apply(this,arguments)}function v(n){return D.apply(this,arguments)}function D(){return D=(0,O.Z)(function*(n){return n.onlineComponents||(tt("FirestoreClient","Using default OnlineComponentProvider"),yield u(n,new Fp)),n.onlineComponents}),D.apply(this,arguments)}function Ge(n){return it.apply(this,arguments)}function it(){return it=(0,O.Z)(function*(n){const e=yield v(n),t=e.eventManager;return t.onListen=pT.bind(null,e.syncEngine),t.onUnlisten=gT.bind(null,e.syncEngine),t}),it.apply(this,arguments)}class u_{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Fy(this,"async_queue_retry"),this.Wc=()=>{const t=mp();t&&tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=mp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=mp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Dr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,O.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Oa(t))throw t;tt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,ii("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=Ky.createAndSchedule(this,e,t,i,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&Rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,O.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function yh(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class pr extends mh{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new u_,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CT(this),this._firestoreClient.terminate()}}function l_(n,e){const t="object"==typeof n?n:(0,ee.Mq)(),i="string"==typeof n?n:e||"(default)",a=(0,ee.qX)(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=(0,W.P0)("firestore");c&&function vT(n,e,t,i={}){var a;const c=(n=jn(n,mh))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&ta("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let h,g;if("string"==typeof i.mockUserToken)h=i.mockUserToken,g=Ni.MOCK_USER;else{h=(0,W.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ye(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ni(T)}n._authCredentials=new Rm(new bd(h,g))}}(a,...c)}return a}function Kr(n){return n._firestoreClient||CT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CT(n){var e;const t=n._freezeSettings(),i=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new UD(n._databaseId,c,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var c,g;n._firestoreClient=new r(n._authCredentials,n._appCheckCredentials,n._queue,i)}function iC(n,e){!function AT(n){if(n._initialized||n._terminated)throw new Ye(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(n=jn(n,pr));const t=Kr(n),i=n._freezeSettings(),a=new Fp;return function ST(n,e,t){const i=new Dr;return n.asyncQueue.enqueue((0,O.Z)(function*(){try{yield s(n,t),yield u(n,e),i.resolve()}catch(a){const c=a;if(!("FirebaseError"===(h=c).name?h.code===ke.FAILED_PRECONDITION||h.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw c;ta("Error enabling offline persistence. Falling back to persistence disabled: "+c),i.reject(c)}var h})).then(()=>i.promise)}(t,a,new Yw(a,i.cacheSizeBytes,e?.forceOwnership))}class _h{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _h(Li.fromBase64String(e))}catch(t){throw new Ye(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _h(Li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jp{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ye(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class MT{constructor(e){this._methodName=e}}class eb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ye(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ye(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const sC=/^__.*__$/;class oC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new na(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bd(e,this.data,t,this.fieldTransforms)}}function RT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class Z0{constructor(e,t,i,a,c,h){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Z0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.ua(e),a}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return X0(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(RT(this.sa)&&sC.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class aC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||Ol(e)}da(e,t,i,a=!1){return new Z0({sa:e,methodName:t,fa:i,path:zr.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function $p(n){const e=n._freezeSettings(),t=Ol(n._databaseId);return new aC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tb(n,e,t,i,a,c={}){const h=n.da(c.merge||c.mergeFields?2:0,e,t,a);rb("Data must be an object, but it was:",h,i);const g=LT(i,h);let T,x;if(c.merge)T=new Ms(h.fieldMask),x=h.fieldTransforms;else if(c.mergeFields){const j=[];for(const re of c.mergeFields){const Te=ib(e,re,t);if(!h.contains(Te))throw new Ye(ke.INVALID_ARGUMENT,`Field '${Te}' is specified in your field mask but missing from your input data.`);UT(j,Te)||j.push(Te)}T=new Ms(j),x=h.fieldTransforms.filter(re=>T.covers(re.field))}else T=null,x=h.fieldTransforms;return new oC(new gi(g),T,x)}function vh(n,e){if(FT(n=(0,W.m9)(n)))return rb("Unsupported field value:",e,n),LT(n,e);if(n instanceof MT)return function(t,i){if(!RT(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const a=[];let c=0;for(const h of t){let g=vh(h,i.aa(c));null==g&&(g={nullValue:"NULL_VALUE"}),a.push(g),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,W.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xm(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Sr.fromDate(t);return{timestampValue:Gd(i.It,a)}}if(t instanceof Sr){const a=new Sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Gd(i.It,a)}}if(t instanceof eb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _h)return{bytesValue:_E(i.It,t._byteString)};if(t instanceof ai){const a=i.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw i.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sy(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${Ul(t)}`)}(n,e)}function LT(n,e){const t={};return Ff(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gu(n,(i,a)=>{const c=vh(a,e.ra(i));null!=c&&(t[i]=c)}),{mapValue:{fields:t}}}function FT(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sr||n instanceof eb||n instanceof _h||n instanceof ai||n instanceof MT)}function rb(n,e,t){if(!FT(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Ul(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function ib(n,e,t){if((e=(0,W.m9)(e))instanceof jp)return e._internalPath;if("string"==typeof e)return Q0(n,e);throw X0("Field path arguments must be of type string or ",n,!1,void 0,t)}const dC=new RegExp("[~\\*/\\[\\]]");function Q0(n,e,t){if(e.search(dC)>=0)throw X0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jp(...e.split("."))._internalPath}catch{throw X0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function X0(n,e,t,i,a){const c=i&&!i.isEmpty(),h=void 0!==a;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let T="";return(c||h)&&(T+=" (found",c&&(T+=` in field ${i}`),h&&(T+=` in document ${a}`),T+=")"),new Ye(ke.INVALID_ARGUMENT,g+n+T)}function UT(n,e){return n.some(t=>t.isEqual(e))}class sb{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ai(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(J0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hC extends sb{data(){return super.data()}}function J0(n,e){return"string"==typeof e?Q0(n,e):e instanceof jp?e._internalPath:e._delegate._internalPath}class Eh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gp extends sb{constructor(e,t,i,a,c,h){super(e,t,i,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(J0("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class eI extends Gp{data(e={}){return super.data(e)}}class Hp{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Eh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new eI(this._firestore,this._userDataWriter,i.key,i,new Eh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ye(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>({type:"added",doc:new eI(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Eh(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:c++}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const g=new eI(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Eh(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let T=-1,x=-1;return 0!==h.type&&(T=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),x=c.indexOf(h.doc.key)),{type:mC(h.type),doc:g,oldIndex:T,newIndex:x}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt()}}class Bl extends class gC{convertValue(e,t="none"){switch(lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rt()}}convertObject(e,t){const i={};return gu(e.fields,(a,c)=>{i[a]=this.convertValue(c,t)}),i}convertGeoPoint(e){return new eb(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Fm(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Rd(e));default:return null}}convertTimestamp(e){const t=mu(e);return new Sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Fn.fromString(e);$t(ME(i));const a=new yu(i.get(1),i.get(3)),c=new pt(i.popFirst(5));return a.isEqual(t)||ii(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new _h(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}}function yC(n,e,t){n=jn(n,ai);const i=jn(n.firestore,pr),a=function ob(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}(n.converter,e,t);return function h_(n,e){return function(t,i){const a=new Dr;return t.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function O0(n,e,t){return Sp.apply(this,arguments)}(yield function fe(n){return v(n).then(e=>e.syncEngine)}(t),i,a)})),a.promise}(Kr(n),e)}(i,[tb($p(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Ar.none())])}function _C(n,...e){var t,i,a;n=(0,W.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||yh(e[h])||(c=e[h],h++);const g={includeMetadataChanges:c.includeMetadataChanges};if(yh(e[h])){const re=e[h];e[h]=null===(t=re.next)||void 0===t?void 0:t.bind(re),e[h+1]=null===(i=re.error)||void 0===i?void 0:i.bind(re),e[h+2]=null===(a=re.complete)||void 0===a?void 0:a.bind(re)}let T,x,j;if(n instanceof ai)x=jn(n.firestore,pr),j=ml(n._key.path),T={next:re=>{e[h]&&e[h](function ab(n,e,t){const i=t.docs.get(e._key),a=new Bl(n);return new Gp(n,a,e._key,i,new Eh(t.hasPendingWrites,t.fromCache),e.converter)}(x,n,re))},error:e[h+1],complete:e[h+2]};else{const re=jn(n,ns);x=jn(re.firestore,pr),j=re._query;const Te=new Bl(x);T={next:Ve=>{e[h]&&e[h](new Hp(x,Te,re,Ve))},error:e[h+1],complete:e[h+2]},function BT(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ye(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(re,Te,Ve,qe){const It=new Vp(qe),At=new aa(Te,It,Ve);return re.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function qy(n,e){return Dp.apply(this,arguments)}(yield Ge(re),At)})),()=>{It.bc(),re.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function wp(n,e){return Yy.apply(this,arguments)}(yield Ge(re),At)}))}}(Kr(x),j,g,T)}!function(n,e=!0){il=ee.Jn,(0,ee.Xd)(new G.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const c=t.getProvider("app").getImmediate(),h=new pr(new sl(t.getProvider("auth-internal")),new ul(t.getProvider("app-check-internal")),function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ye(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(g.options.projectId,T)}(c,i),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),(0,ee.KN)(Uv,"3.7.1",n),(0,ee.KN)(Uv,"3.7.1","esm2017")}();class nI{constructor(e){return e}}const qT="firestore",ub=new M.OlP("angularfire2.firestore-instances");function bC(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new nI(i)}}const TC={provide:class DC{constructor(){return(0,m.vb)(qT)}},deps:[[new M.FiY,ub]]},CC={provide:nI,useFactory:function wC(n,e){const t=(0,m.JM)(qT,n,e);return t&&new nI(t)},deps:[[new M.FiY,ub],F.Ot]};let SC=(()=>{class n{constructor(){(0,z.KN)("angularfire",m.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=M.oAB({type:n}),n.\u0275inj=M.cJS({providers:[CC,TC]}),n})();function AC(n,...e){return{ngModule:SC,providers:[{provide:ub,useFactory:bC(n),multi:!0,deps:[M.R0b,M.zs3,m.HU,F.z6,[new M.FiY,og],[new M.FiY,Gh],...e]}]}}const MC=(0,m.u3)(Qw,!0),xC=(0,m.u3)(iC,!0),RC=(0,m.u3)(l_,!0),OC=(0,m.u3)(_C,!0),PC=(0,m.u3)(yC,!0)},6351:(le,k,E)=>{E.d(k,{q4:()=>p,HU:()=>bs,vb:()=>oo,JM:()=>ji,u3:()=>ba});var m=E(4650),M=E(5867),F=E(5861),z=E(9681),O=E(2090),W=E(4859),ee=E(1877),Q=E(8766);const K="@firebase/installations",G="0.5.15",te=`w:${G}`,ye="FIS_v2",We=new O.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(b){return b instanceof O.ZR&&b.code.includes("request-failed")}function Pe({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Se(b){return{token:b.token,requestStatus:2,expiresIn:ne(b.expiresIn),creationTime:Date.now()}}function Le(b,A){return nt.apply(this,arguments)}function nt(){return(nt=(0,F.Z)(function*(b,A){const ie=(yield A.json()).error;return We.create("request-failed",{requestName:b,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function _t({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Be(b,{refreshToken:A}){const L=_t(b);return L.append("Authorization",function Ae(b){return`${ye} ${b}`}(A)),L}function Ke(b){return pe.apply(this,arguments)}function pe(){return(pe=(0,F.Z)(function*(b){const A=yield b();return A.status>=500&&A.status<600?b():A})).apply(this,arguments)}function ne(b){return Number(b.replace("s","000"))}function _e(b,A){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:A},{fid:L}){const ie=Pe(b),Ie=_t(b),Oe=A.getImmediate({optional:!0});if(Oe){const ln=yield Oe.getHeartbeatsHeader();ln&&Ie.append("x-firebase-client",ln)}const ht={method:"POST",headers:Ie,body:JSON.stringify({fid:L,authVersion:ye,appId:b.appId,sdkVersion:te})},jt=yield Ke(()=>fetch(ie,ht));if(jt.ok){const ln=yield jt.json();return{fid:ln.fid||L,registrationStatus:2,refreshToken:ln.refreshToken,authToken:Se(ln.authToken)}}throw yield Le("Create Installation",jt)})).apply(this,arguments)}function Xe(b){return new Promise(A=>{setTimeout(A,b)})}const rn=/^[cdef][\w-]{21}$/;function at(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const L=function dn(b){return function wt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return rn.test(L)?L:""}catch{return""}}function Sn(b){return`${b.appName}!${b.appId}`}const qt=new Map;function Qt(b,A){const L=Sn(b);Br(L,A),function yr(b,A){const L=function pn(){return!hn&&"BroadcastChannel"in self&&(hn=new BroadcastChannel("[Firebase] FID Change"),hn.onmessage=b=>{Br(b.data.key,b.data.fid)}),hn}();L&&L.postMessage({key:b,fid:A}),function rr(){0===qt.size&&hn&&(hn.close(),hn=null)}()}(L,A)}function Br(b,A){const L=qt.get(b);if(L)for(const ie of L)ie(A)}let hn=null;const xn="firebase-installations-store";let qr=null;function gn(){return qr||(qr=(0,Q.X3)("firebase-installations-database",1,{upgrade:(b,A)=>{0===A&&b.createObjectStore(xn)}})),qr}function rt(b,A){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,F.Z)(function*(b,A){const L=Sn(b),Ie=(yield gn()).transaction(xn,"readwrite"),Oe=Ie.objectStore(xn),Je=yield Oe.get(L);return yield Oe.put(A,L),yield Ie.done,(!Je||Je.fid!==A.fid)&&Qt(b,A.fid),A})).apply(this,arguments)}function Ii(b){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(b){const A=Sn(b),ie=(yield gn()).transaction(xn,"readwrite");yield ie.objectStore(xn).delete(A),yield ie.done})).apply(this,arguments)}function dr(b,A){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,F.Z)(function*(b,A){const L=Sn(b),Ie=(yield gn()).transaction(xn,"readwrite"),Oe=Ie.objectStore(xn),Je=yield Oe.get(L),ht=A(Je);return void 0===ht?yield Oe.delete(L):yield Oe.put(ht,L),yield Ie.done,ht&&(!Je||Je.fid!==ht.fid)&&Qt(b,ht.fid),ht})).apply(this,arguments)}function Un(b){return En.apply(this,arguments)}function En(){return(En=(0,F.Z)(function*(b){let A;const L=yield dr(b.appConfig,ie=>{const Ie=wn(ie),Oe=vt(b,Ie);return A=Oe.registrationPromise,Oe.installationEntry});return""===L.fid?{installationEntry:yield A}:{installationEntry:L,registrationPromise:A}})).apply(this,arguments)}function wn(b){return bt(b||{fid:at(),registrationStatus:0})}function vt(b,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(We.create("app-offline"))};const L={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},ie=function St(b,A){return tn.apply(this,arguments)}(b,L);return{installationEntry:L,registrationPromise:ie}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Jn(b)}:{installationEntry:A}}function tn(){return(tn=(0,F.Z)(function*(b,A){try{const L=yield _e(b,A);return rt(b.appConfig,L)}catch(L){throw ot(L)&&409===L.customData.serverCode?yield Ii(b.appConfig):yield rt(b.appConfig,{fid:A.fid,registrationStatus:0}),L}})).apply(this,arguments)}function Jn(b){return mt.apply(this,arguments)}function mt(){return(mt=(0,F.Z)(function*(b){let A=yield er(b.appConfig);for(;1===A.registrationStatus;)yield Xe(100),A=yield er(b.appConfig);if(0===A.registrationStatus){const{installationEntry:L,registrationPromise:ie}=yield Un(b);return ie||L}return A})).apply(this,arguments)}function er(b){return dr(b,A=>{if(!A)throw We.create("installation-not-found");return bt(A)})}function bt(b){return function sr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function In(b,A){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:A},L){const ie=Xt(b,L),Ie=Be(b,L),Oe=A.getImmediate({optional:!0});if(Oe){const ln=yield Oe.getHeartbeatsHeader();ln&&Ie.append("x-firebase-client",ln)}const ht={method:"POST",headers:Ie,body:JSON.stringify({installation:{sdkVersion:te,appId:b.appId}})},jt=yield Ke(()=>fetch(ie,ht));if(jt.ok)return Se(yield jt.json());throw yield Le("Generate Auth Token",jt)})).apply(this,arguments)}function Xt(b,{fid:A}){return`${Pe(b)}/${A}/authTokens:generate`}function bn(b){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,F.Z)(function*(b,A=!1){let L;const ie=yield dr(b.appConfig,Oe=>{if(!Vt(Oe))throw We.create("not-registered");const Je=Oe.authToken;if(!A&&de(Je))return Oe;if(1===Je.requestStatus)return L=lt(b,A),Oe;{if(!navigator.onLine)throw We.create("app-offline");const ht=ge(Oe);return L=Nt(b,ht),ht}});return L?yield L:ie.authToken})).apply(this,arguments)}function lt(b,A){return He.apply(this,arguments)}function He(){return(He=(0,F.Z)(function*(b,A){let L=yield yt(b.appConfig);for(;1===L.authToken.requestStatus;)yield Xe(100),L=yield yt(b.appConfig);const ie=L.authToken;return 0===ie.requestStatus?bn(b,A):ie})).apply(this,arguments)}function yt(b){return dr(b,A=>{if(!Vt(A))throw We.create("not-registered");return function ze(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Nt(b,A){return kt.apply(this,arguments)}function kt(){return(kt=(0,F.Z)(function*(b,A){try{const L=yield In(b,A),ie=Object.assign(Object.assign({},A),{authToken:L});return yield rt(b.appConfig,ie),L}catch(L){if(!ot(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const ie=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield rt(b.appConfig,ie)}else yield Ii(b.appConfig);throw L}})).apply(this,arguments)}function Vt(b){return void 0!==b&&2===b.registrationStatus}function de(b){return 2===b.requestStatus&&!function se(b){const A=Date.now();return A<b.creationTime||b.creationTime+b.expiresIn<A+36e5}(b)}function ge(b){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:A})}function st(){return(st=(0,F.Z)(function*(b){const A=b,{installationEntry:L,registrationPromise:ie}=yield Un(A);return ie?ie.catch(console.error):bn(A).catch(console.error),L.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,F.Z)(function*(b,A=!1){const L=b;return yield Tn(L),(yield bn(L,A)).token})).apply(this,arguments)}function Tn(b){return nn.apply(this,arguments)}function nn(){return(nn=(0,F.Z)(function*(b){const{registrationPromise:A}=yield Un(b);A&&(yield A)})).apply(this,arguments)}function or(b){return We.create("missing-app-config-values",{valueName:b})}const ui="installations",Zr=b=>{const A=b.getProvider("app").getImmediate(),L=function Zt(b){if(!b||!b.options)throw or("App Configuration");if(!b.name)throw or("App Name");const A=["projectId","apiKey","appId"];for(const L of A)if(!b.options[L])throw or(L);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(A);return{app:A,appConfig:L,heartbeatServiceProvider:(0,z.qX)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Qr=b=>{const A=b.getProvider("app").getImmediate(),L=(0,z.qX)(A,ui).getImmediate();return{getId:()=>function De(b){return st.apply(this,arguments)}(L),getToken:Ie=>function Dt(b){return Jt.apply(this,arguments)}(L,Ie)}};(function ps(){(0,z.Xd)(new W.wA(ui,Zr,"PUBLIC")),(0,z.Xd)(new W.wA("installations-internal",Qr,"PRIVATE"))})(),(0,z.KN)(K,G),(0,z.KN)(K,G,"esm2017");const Nn="@firebase/remote-config",tr=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ps{constructor(A,L,ie,Ie){this.client=A,this.storage=L,this.storageCache=ie,this.logger=Ie}isCachedDataFresh(A,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-L,Ie=ie<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Ie}.`),Ie}fetch(A){var L=this;return(0,F.Z)(function*(){const[ie,Ie]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(Ie&&L.isCachedDataFresh(A.cacheMaxAgeMillis,ie))return Ie;A.eTag=Ie&&Ie.eTag;const Oe=yield L.client.fetch(A),Je=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Oe.status&&Je.push(L.storage.setLastSuccessfulFetchResponse(Oe)),yield Promise.all(Je),Oe})()}}function oe(b=navigator){return b.languages&&b.languages[0]||b.language}class N{constructor(A,L,ie,Ie,Oe,Je){this.firebaseInstallations=A,this.sdkVersion=L,this.namespace=ie,this.projectId=Ie,this.apiKey=Oe,this.appId=Je}fetch(A){var L=this;return(0,F.Z)(function*(){var ie,Ie,Oe;const[Je,ht]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),ln=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,on={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Lt={sdk_version:L.sdkVersion,app_instance_id:Je,app_instance_id_token:ht,app_id:L.appId,language_code:oe()},ri={method:"POST",headers:on,body:JSON.stringify(Lt)},Jr=fetch(ln,ri),Yl=new Promise((Ca,Ks)=>{A.signal.addEventListener(()=>{const Sa=new Error("The operation was aborted.");Sa.name="AbortError",Ks(Sa)})});let Yo;try{yield Promise.race([Jr,Yl]),Yo=yield Jr}catch(Ca){let Ks="fetch-client-network";throw"AbortError"===(null===(ie=Ca)||void 0===ie?void 0:ie.name)&&(Ks="fetch-timeout"),tr.create(Ks,{originalErrorMessage:null===(Ie=Ca)||void 0===Ie?void 0:Ie.message})}let Ws=Yo.status;const ru=Yo.headers.get("ETag")||void 0;let Yu,Ta;if(200===Yo.status){let Ca;try{Ca=yield Yo.json()}catch(Ks){throw tr.create("fetch-client-parse",{originalErrorMessage:null===(Oe=Ks)||void 0===Oe?void 0:Oe.message})}Yu=Ca.entries,Ta=Ca.state}if("INSTANCE_STATE_UNSPECIFIED"===Ta?Ws=500:"NO_CHANGE"===Ta?Ws=304:("NO_TEMPLATE"===Ta||"EMPTY_CONFIG"===Ta)&&(Yu={}),304!==Ws&&200!==Ws)throw tr.create("fetch-status",{httpStatus:Ws});return{status:Ws,eTag:ru,config:Yu}})()}}class he{constructor(A,L){this.client=A,this.storage=L}fetch(A){var L=this;return(0,F.Z)(function*(){const ie=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(A,ie)})()}attemptFetch(A,{throttleEndTimeMillis:L,backoffCount:ie}){var Ie=this;return(0,F.Z)(function*(){yield function $(b,A){return new Promise((L,ie)=>{const Ie=Math.max(A-Date.now(),0),Oe=setTimeout(L,Ie);b.addEventListener(()=>{clearTimeout(Oe),ie(tr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,L);try{const Oe=yield Ie.client.fetch(A);return yield Ie.storage.deleteThrottleMetadata(),Oe}catch(Oe){if(!function q(b){if(!(b instanceof O.ZR&&b.customData))return!1;const A=Number(b.customData.httpStatus);return 429===A||500===A||503===A||504===A}(Oe))throw Oe;const Je={throttleEndTimeMillis:Date.now()+(0,O.$s)(ie),backoffCount:ie+1};return yield Ie.storage.setThrottleMetadata(Je),Ie.attemptFetch(A,Je)}})()}}class gt{constructor(A,L,ie,Ie,Oe){this.app=A,this._client=L,this._storageCache=ie,this._storage=Ie,this._logger=Oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bt(b,A){var L;const ie=b.target.error||void 0;return tr.create(A,{originalErrorMessage:ie&&(null===(L=ie)||void 0===L?void 0:L.message)})}const Mt="app_namespace_store";class Ui{constructor(A,L,ie,Ie=function nr(){return new Promise((b,A)=>{var L;try{const ie=indexedDB.open("firebase_remote_config",1);ie.onerror=Ie=>{A(Bt(Ie,"storage-open"))},ie.onsuccess=Ie=>{b(Ie.target.result)},ie.onupgradeneeded=Ie=>{0===Ie.oldVersion&&Ie.target.result.createObjectStore(Mt,{keyPath:"compositeKey"})}}catch(ie){A(tr.create("storage-open",{originalErrorMessage:null===(L=ie)||void 0===L?void 0:L.message}))}})}()){this.appId=A,this.appName=L,this.namespace=ie,this.openDbPromise=Ie}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var L=this;return(0,F.Z)(function*(){const ie=yield L.openDbPromise;return new Promise((Ie,Oe)=>{var Je;const jt=ie.transaction([Mt],"readonly").objectStore(Mt),ln=L.createCompositeKey(A);try{const on=jt.get(ln);on.onerror=Lt=>{Oe(Bt(Lt,"storage-get"))},on.onsuccess=Lt=>{const ri=Lt.target.result;Ie(ri?ri.value:void 0)}}catch(on){Oe(tr.create("storage-get",{originalErrorMessage:null===(Je=on)||void 0===Je?void 0:Je.message}))}})})()}set(A,L){var ie=this;return(0,F.Z)(function*(){const Ie=yield ie.openDbPromise;return new Promise((Oe,Je)=>{var ht;const ln=Ie.transaction([Mt],"readwrite").objectStore(Mt),on=ie.createCompositeKey(A);try{const Lt=ln.put({compositeKey:on,value:L});Lt.onerror=ri=>{Je(Bt(ri,"storage-set"))},Lt.onsuccess=()=>{Oe()}}catch(Lt){Je(tr.create("storage-set",{originalErrorMessage:null===(ht=Lt)||void 0===ht?void 0:ht.message}))}})})()}delete(A){var L=this;return(0,F.Z)(function*(){const ie=yield L.openDbPromise;return new Promise((Ie,Oe)=>{var Je;const jt=ie.transaction([Mt],"readwrite").objectStore(Mt),ln=L.createCompositeKey(A);try{const on=jt.delete(ln);on.onerror=Lt=>{Oe(Bt(Lt,"storage-delete"))},on.onsuccess=()=>{Ie()}}catch(on){Oe(tr.create("storage-delete",{originalErrorMessage:null===(Je=on)||void 0===Je?void 0:Je.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Rn{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,F.Z)(function*(){const L=A.storage.getLastFetchStatus(),ie=A.storage.getLastSuccessfulFetchTimestampMillis(),Ie=A.storage.getActiveConfig(),Oe=yield L;Oe&&(A.lastFetchStatus=Oe);const Je=yield ie;Je&&(A.lastSuccessfulFetchTimestampMillis=Je);const ht=yield Ie;ht&&(A.activeConfig=ht)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Ci(){return ko.apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch{return!1}})).apply(this,arguments)}!function Pr(){(0,z.Xd)(new W.wA("remote-config",function b(A,{instanceIdentifier:L}){const ie=A.getProvider("app").getImmediate(),Ie=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw tr.create("registration-window");if(!(0,O.hl)())throw tr.create("indexed-db-unavailable");const{projectId:Oe,apiKey:Je,appId:ht}=ie.options;if(!Oe)throw tr.create("registration-project-id");if(!Je)throw tr.create("registration-api-key");if(!ht)throw tr.create("registration-app-id");const jt=new Ui(ht,ie.name,L=L||"firebase"),ln=new Rn(jt),on=new ee.Yd(Nn);on.logLevel=ee.in.ERROR;const Lt=new N(Ie,z.Jn,L,Oe,Je,ht),ri=new he(Lt,jt),Jr=new Ps(ri,jt,ln,on),Yl=new gt(ie,Jr,ln,jt,on);return function $n(b){const A=(0,O.m9)(b);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Yl),Yl},"PUBLIC").setMultipleInstances(!0)),(0,z.KN)(Nn,"0.3.14"),(0,z.KN)(Nn,"0.3.14","esm2017")}();const is="/firebase-messaging-sw.js",Xs="/firebase-cloud-messaging-push-scope",po="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ti="google.c.a.c_id",la="google.c.a.c_l",go="google.c.a.ts",ja="google.c.a.e";var ss=(()=>{return(b=ss||(ss={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",ss;var b})();function Qi(b){const A=new Uint8Array(b);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nr(b){const L=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(L),Ie=new Uint8Array(ie.length);for(let Oe=0;Oe<ie.length;++Oe)Ie[Oe]=ie.charCodeAt(Oe);return Ie}const mo="fcm_token_details_db",yo="fcm_token_object_Store";function da(b){return ha.apply(this,arguments)}function ha(){return ha=(0,F.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Oe=>Oe.name).includes(mo))return null;let A=null;return(yield(0,Q.X3)(mo,5,{upgrade:(ie=(0,F.Z)(function*(Ie,Oe,Je,ht){var jt;if(Oe<2||!Ie.objectStoreNames.contains(yo))return;const ln=ht.objectStore(yo),on=yield ln.index("fcmSenderId").get(b);if(yield ln.clear(),on)if(2===Oe){const Lt=on;if(!Lt.auth||!Lt.p256dh||!Lt.endpoint)return;A={token:Lt.fcmToken,createTime:null!==(jt=Lt.createTime)&&void 0!==jt?jt:Date.now(),subscriptionOptions:{auth:Lt.auth,p256dh:Lt.p256dh,endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:"string"==typeof Lt.vapidKey?Lt.vapidKey:Qi(Lt.vapidKey)}}}else if(3===Oe){const Lt=on;A={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Qi(Lt.auth),p256dh:Qi(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Qi(Lt.vapidKey)}}}else if(4===Oe){const Lt=on;A={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Qi(Lt.auth),p256dh:Qi(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Qi(Lt.vapidKey)}}}}),function(Oe,Je,ht,jt){return ie.apply(this,arguments)})})).close(),yield(0,Q.Lj)(mo),yield(0,Q.Lj)("fcm_vapid_details_db"),yield(0,Q.Lj)("undefined"),On(A)?A:null;var ie}),ha.apply(this,arguments)}function On(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:A}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Si="firebase-messaging-store";let $r=null;function $a(){return $r||($r=(0,Q.X3)("firebase-messaging-database",1,{upgrade:(b,A)=>{0===A&&b.createObjectStore(Si)}})),$r}function Fo(b){return ms.apply(this,arguments)}function ms(){return(ms=(0,F.Z)(function*(b){const A=ar(b),ie=yield(yield $a()).transaction(Si).objectStore(Si).get(A);if(ie)return ie;{const Ie=yield da(b.appConfig.senderId);if(Ie)return yield Cn(b,Ie),Ie}})).apply(this,arguments)}function Cn(b,A){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,F.Z)(function*(b,A){const L=ar(b),Ie=(yield $a()).transaction(Si,"readwrite");return yield Ie.objectStore(Si).put(A,L),yield Ie.done,A})).apply(this,arguments)}function ys(b){return ks.apply(this,arguments)}function ks(){return(ks=(0,F.Z)(function*(b){const A=ar(b),ie=(yield $a()).transaction(Si,"readwrite");yield ie.objectStore(Si).delete(A),yield ie.done})).apply(this,arguments)}function ar({appConfig:b}){return b.appId}const Zn=new O.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ht(b,A){return _o.apply(this,arguments)}function _o(){return(_o=(0,F.Z)(function*(b,A){var L;const ie=yield os(b),Ie=Qe(A),Oe={method:"POST",headers:ie,body:JSON.stringify(Ie)};let Je;try{Je=yield(yield fetch(Ai(b.appConfig),Oe)).json()}catch(ht){throw Zn.create("token-subscribe-failed",{errorInfo:null===(L=ht)||void 0===L?void 0:L.toString()})}if(Je.error)throw Zn.create("token-subscribe-failed",{errorInfo:Je.error.message});if(!Je.token)throw Zn.create("token-subscribe-no-token");return Je.token})).apply(this,arguments)}function Ga(b,A){return _s.apply(this,arguments)}function _s(){return(_s=(0,F.Z)(function*(b,A){var L;const ie=yield os(b),Ie=Qe(A.subscriptionOptions),Oe={method:"PATCH",headers:ie,body:JSON.stringify(Ie)};let Je;try{Je=yield(yield fetch(`${Ai(b.appConfig)}/${A.token}`,Oe)).json()}catch(ht){throw Zn.create("token-update-failed",{errorInfo:null===(L=ht)||void 0===L?void 0:L.toString()})}if(Je.error)throw Zn.create("token-update-failed",{errorInfo:Je.error.message});if(!Je.token)throw Zn.create("token-update-no-token");return Je.token})).apply(this,arguments)}function Ha(b,A){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*(b,A){var L;const Ie={method:"DELETE",headers:yield os(b)};try{const Je=yield(yield fetch(`${Ai(b.appConfig)}/${A}`,Ie)).json();if(Je.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:Je.error.message})}catch(Oe){throw Zn.create("token-unsubscribe-failed",{errorInfo:null===(L=Oe)||void 0===L?void 0:L.toString()})}})).apply(this,arguments)}function Ai({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function os(b){return fa.apply(this,arguments)}function fa(){return(fa=(0,F.Z)(function*({appConfig:b,installations:A}){const L=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function Qe({p256dh:b,auth:A,endpoint:L,vapidKey:ie}){const Ie={web:{endpoint:L,auth:A,p256dh:b}};return ie!==po&&(Ie.web.applicationPubKey=ie),Ie}const fn=6048e5;function Ls(b){return Js.apply(this,arguments)}function Js(){return(Js=(0,F.Z)(function*(b){const A=yield Ac(b.swRegistration,b.vapidKey),L={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:A.endpoint,auth:Qi(A.getKey("auth")),p256dh:Qi(A.getKey("p256dh"))},ie=yield Fo(b.firebaseDependencies);if(ie){if(ga(ie.subscriptionOptions,L))return Date.now()>=ie.createTime+fn?pa(b,{token:ie.token,createTime:Date.now(),subscriptionOptions:L}):ie.token;try{yield Ha(b.firebaseDependencies,ie.token)}catch(Ie){console.warn(Ie)}return za(b.firebaseDependencies,L)}return za(b.firebaseDependencies,L)})).apply(this,arguments)}function hr(b){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,F.Z)(function*(b){const A=yield Fo(b.firebaseDependencies);A&&(yield Ha(b.firebaseDependencies,A.token),yield ys(b.firebaseDependencies));const L=yield b.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()})).apply(this,arguments)}function pa(b,A){return ni.apply(this,arguments)}function ni(){return(ni=(0,F.Z)(function*(b,A){try{const L=yield Ga(b.firebaseDependencies,A),ie=Object.assign(Object.assign({},A),{token:L,createTime:Date.now()});return yield Cn(b.firebaseDependencies,ie),L}catch(L){throw yield hr(b),L}})).apply(this,arguments)}function za(b,A){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,F.Z)(function*(b,A){const ie={token:yield Ht(b,A),createTime:Date.now(),subscriptionOptions:A};return yield Cn(b,ie),ie.token})).apply(this,arguments)}function Ac(b,A){return Us.apply(this,arguments)}function Us(){return(Us=(0,F.Z)(function*(b,A){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Nr(A)})})).apply(this,arguments)}function ga(b,A){return A.vapidKey===b.vapidKey&&A.endpoint===b.endpoint&&A.auth===b.auth&&A.p256dh===b.p256dh}function Mi(b){const A={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function br(b,A){if(!A.notification)return;b.notification={};const L=A.notification.title;L&&(b.notification.title=L);const ie=A.notification.body;ie&&(b.notification.body=ie);const Ie=A.notification.image;Ie&&(b.notification.image=Ie)}(A,b),function xi(b,A){!A.data||(b.data=A.data)}(A,b),function Wa(b,A){var L,ie,Ie,Oe,Je;if(!(A.fcmOptions||null!==(L=A.notification)&&void 0!==L&&L.click_action))return;b.fcmOptions={};const ht=null!==(Ie=null===(ie=A.fcmOptions)||void 0===ie?void 0:ie.link)&&void 0!==Ie?Ie:null===(Oe=A.notification)||void 0===Oe?void 0:Oe.click_action;ht&&(b.fcmOptions.link=ht);const jt=null===(Je=A.fcmOptions)||void 0===Je?void 0:Je.analytics_label;jt&&(b.fcmOptions.analyticsLabel=jt)}(A,b),A}function Bs(b){return"object"==typeof b&&!!b&&ti in b}function vs(b,A){const L=[];for(let ie=0;ie<b.length;ie++)L.push(b.charAt(ie)),ie<A.length&&L.push(A.charAt(ie));return L.join("")}function Io(b){return Zn.create("missing-app-config-values",{valueName:b})}vs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jl{constructor(A,L,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ie=function Vl(b){if(!b||!b.options)throw Io("App Configuration Object");if(!b.name)throw Io("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:L}=b;for(const ie of A)if(!L[ie])throw Io(ie);return{appName:b.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Ie,installations:L,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function Mc(b){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,F.Z)(function*(b){var A;try{b.swRegistration=yield navigator.serviceWorker.register(is,{scope:Xs}),b.swRegistration.update().catch(()=>{})}catch(L){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:null===(A=L)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function ma(b,A){return js.apply(this,arguments)}function js(){return(js=(0,F.Z)(function*(b,A){if(!A&&!b.swRegistration&&(yield Mc(b)),A||!b.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");b.swRegistration=A}})).apply(this,arguments)}function ya(b,A){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(b,A){A?b.vapidKey=A:b.vapidKey||(b.vapidKey=po)})).apply(this,arguments)}function eo(){return(eo=(0,F.Z)(function*(b,A){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield ya(b,A?.vapidKey),yield ma(b,A?.serviceWorkerRegistration),Ls(b)})).apply(this,arguments)}function xc(b,A,L){return Do.apply(this,arguments)}function Do(){return(Do=(0,F.Z)(function*(b,A,L){const ie=Ru(A);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:L[ti],message_name:L[la],message_time:L[go],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ru(b){switch(b){case ss.NOTIFICATION_CLICKED:return"notification_open";case ss.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function P(){return(P=(0,F.Z)(function*(b,A){const L=A.data;if(!L.isFirebaseMessaging)return;b.onMessageHandler&&L.messageType===ss.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Mi(L)):b.onMessageHandler.next(Mi(L)));const ie=L.data;Bs(ie)&&"1"===ie[ja]&&(yield xc(b,L.messageType,ie))})).apply(this,arguments)}const C="@firebase/messaging",V="0.9.19",ce=b=>{const A=new jl(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function I(b,A){return P.apply(this,arguments)}(A,L)),A},Me=b=>{const A=b.getProvider("messaging").getImmediate();return{getToken:ie=>function Vo(b,A){return eo.apply(this,arguments)}(A,ie)}};function Et(){return vn.apply(this,arguments)}function vn(){return(vn=(0,F.Z)(function*(){try{yield(0,O.eu)()}catch{return!1}return typeof window<"u"&&(0,O.hl)()&&(0,O.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fe(){(0,z.Xd)(new W.wA("messaging",ce,"PUBLIC")),(0,z.Xd)(new W.wA("messaging-internal",Me,"PRIVATE")),(0,z.KN)(C,V),(0,z.KN)(C,V,"esm2017")}();const Vi="analytics",Gs="firebase_id",Ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$l="https://www.googletagmanager.com/gtag/js",cr=new ee.Yd("@firebase/analytics");function as(b){return Promise.all(b.map(A=>A.catch(L=>L)))}function qa(b,A){const L=document.createElement("script");L.src=`${$l}?l=${b}&id=${A}`,L.async=!0,document.head.appendChild(L)}function Hl(b,A,L,ie,Ie,Oe){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,F.Z)(function*(b,A,L,ie,Ie,Oe){const Je=ie[Ie];try{if(Je)yield A[Je];else{const jt=(yield as(L)).find(ln=>ln.measurementId===Ie);jt&&(yield A[jt.appId])}}catch(ht){cr.error(ht)}b("config",Ie,Oe)})).apply(this,arguments)}function Ya(b,A,L,ie,Ie){return jo.apply(this,arguments)}function jo(){return(jo=(0,F.Z)(function*(b,A,L,ie,Ie){try{let Oe=[];if(Ie&&Ie.send_to){let Je=Ie.send_to;Array.isArray(Je)||(Je=[Je]);const ht=yield as(L);for(const jt of Je){const ln=ht.find(Lt=>Lt.measurementId===jt),on=ln&&A[ln.appId];if(!on){Oe=[];break}Oe.push(on)}}0===Oe.length&&(Oe=Object.values(A)),yield Promise.all(Oe),b("event",ie,Ie||{})}catch(Oe){cr.error(Oe)}})).apply(this,arguments)}function Pu(b){const A=window.document.getElementsByTagName("script");for(const L of Object.values(A))if(L.src&&L.src.includes($l)&&L.src.includes(b))return L;return null}const kr=new O.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_a=new class Wl{constructor(A={},L=1e3){this.throttleMetadata=A,this.intervalMillis=L}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,L){this.throttleMetadata[A]=L}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function zp(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Nu(b){return ku.apply(this,arguments)}function ku(){return(ku=(0,F.Z)(function*(b){var A;const{appId:L,apiKey:ie}=b,Ie={method:"GET",headers:zp(ie)},Oe=Ka.replace("{app-id}",L),Je=yield fetch(Oe,Ie);if(200!==Je.status&&304!==Je.status){let ht="";try{const jt=yield Je.json();null!==(A=jt.error)&&void 0!==A&&A.message&&(ht=jt.error.message)}catch{}throw kr.create("config-fetch-failed",{httpStatus:Je.status,responseMessage:ht})}return Je.json()})).apply(this,arguments)}function Lu(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,F.Z)(function*(b,A=_a,L){const{appId:ie,apiKey:Ie,measurementId:Oe}=b.options;if(!ie)throw kr.create("no-app-id");if(!Ie){if(Oe)return{measurementId:Oe,appId:ie};throw kr.create("no-api-key")}const Je=A.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new Go;return setTimeout((0,F.Z)(function*(){ht.abort()}),void 0!==L?L:6e4),Fu({appId:ie,apiKey:Ie,measurementId:Oe},Je,ht,A)})).apply(this,arguments)}function Fu(b,A,L){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,F.Z)(function*(b,{throttleEndTimeMillis:A,backoffCount:L},ie,Ie=_a){var Oe,Je;const{appId:ht,measurementId:jt}=b;try{yield Uu(ie,A)}catch(ln){if(jt)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${jt} provided in the "measurementId" field in the local Firebase config. [${null===(Oe=ln)||void 0===Oe?void 0:Oe.message}]`),{appId:ht,measurementId:jt};throw ln}try{const ln=yield Nu(b);return Ie.deleteThrottleMetadata(ht),ln}catch(ln){const on=ln;if(!Qa(on)){if(Ie.deleteThrottleMetadata(ht),jt)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${jt} provided in the "measurementId" field in the local Firebase config. [${on?.message}]`),{appId:ht,measurementId:jt};throw ln}const Lt=503===Number(null===(Je=on?.customData)||void 0===Je?void 0:Je.httpStatus)?(0,O.$s)(L,Ie.intervalMillis,30):(0,O.$s)(L,Ie.intervalMillis),ri={throttleEndTimeMillis:Date.now()+Lt,backoffCount:L+1};return Ie.setThrottleMetadata(ht,ri),cr.debug(`Calling attemptFetch again in ${Lt} millis`),Fu(b,ri,ie,Ie)}})).apply(this,arguments)}function Uu(b,A){return new Promise((L,ie)=>{const Ie=Math.max(A-Date.now(),0),Oe=setTimeout(L,Ie);b.addEventListener(()=>{clearTimeout(Oe),ie(kr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Qa(b){if(!(b instanceof O.ZR&&b.customData))return!1;const A=Number(b.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Go{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let no,ju;function Bu(){return(Bu=(0,F.Z)(function*(b,A,L,ie,Ie){if(Ie&&Ie.global)b("event",L,ie);else{const Oe=yield A;b("event",L,Object.assign(Object.assign({},ie),{send_to:Oe}))}})).apply(this,arguments)}function Hs(b){ju=b}function Pc(b){no=b}function $u(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,F.Z)(function*(){var b;if(!(0,O.hl)())return cr.warn(kr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,O.eu)()}catch(A){return cr.warn(kr.create("indexeddb-unavailable",{errorInfo:null===(b=A)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function va(){return(va=(0,F.Z)(function*(b,A,L,ie,Ie,Oe,Je){var ht;const jt=Lu(b);jt.then(Jr=>{L[Jr.measurementId]=Jr.appId,b.options.measurementId&&Jr.measurementId!==b.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Jr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Jr=>cr.error(Jr)),A.push(jt);const ln=$u().then(Jr=>{if(Jr)return ie.getId()}),[on,Lt]=yield Promise.all([jt,ln]);Pu(Oe)||qa(Oe,on.measurementId),ju&&(Ie("consent","default",ju),Hs(void 0)),Ie("js",new Date);const ri=null!==(ht=Je?.config)&&void 0!==ht?ht:{};return ri.origin="firebase",ri.update=!0,null!=Lt&&(ri[Gs]=Lt),Ie("config",on.measurementId,ri),no&&(Ie("set",no),Pc(void 0)),on.measurementId})).apply(this,arguments)}class Hu{constructor(A){this.app=A}_delete(){return delete Xr[this.app.options.appId],Promise.resolve()}}let Xr={},Wo=[];const ro={};let Ko,ws,Ds="dataLayer",Ea=!1;function zu(b,A,L){!function bh(){const b=[];if((0,O.ru)()&&b.push("This is a browser extension environment."),(0,O.zI)()||b.push("Cookies are not available."),b.length>0){const A=b.map((ie,Ie)=>`(${Ie+1}) ${ie}`).join(" "),L=kr.create("invalid-analytics-context",{errorInfo:A});cr.warn(L.message)}}();const ie=b.options.appId;if(!ie)throw kr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw kr.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xr[ie])throw kr.create("already-exists",{id:ie});if(!Ea){!function Gl(b){let A=[];Array.isArray(window[b])?A=window[b]:window[b]=A}(Ds);const{wrappedGtag:Oe,gtagCore:Je}=function Ou(b,A,L,ie,Ie){let Oe=function(...Je){window[ie].push(arguments)};return window[Ie]&&"function"==typeof window[Ie]&&(Oe=window[Ie]),window[Ie]=function Za(b,A,L,ie){function Oe(){return(Oe=(0,F.Z)(function*(Je,ht,jt){try{"event"===Je?yield Ya(b,A,L,ht,jt):"config"===Je?yield Hl(b,A,L,ie,ht,jt):"consent"===Je?b("consent","update",jt):b("set",ht)}catch(ln){cr.error(ln)}})).apply(this,arguments)}return function Ie(Je,ht,jt){return Oe.apply(this,arguments)}}(Oe,b,A,L),{gtagCore:Oe,wrappedGtag:window[Ie]}}(Xr,Wo,ro,Ds,"gtag");ws=Oe,Ko=Je,Ea=!0}return Xr[ie]=function wh(b,A,L,ie,Ie,Oe,Je){return va.apply(this,arguments)}(b,Wo,ro,A,Ko,Ds,L),new Hu(b)}function Th(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,F.Z)(function*(){if((0,O.ru)()||!(0,O.zI)()||!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch{return!1}})).apply(this,arguments)}const Sh="@firebase/analytics";!function fi(){(0,z.Xd)(new W.wA(Vi,(A,{options:L})=>zu(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,z.Xd)(new W.wA("analytics-internal",function b(A){try{const L=A.getProvider(Vi).getImmediate();return{logEvent:(ie,Ie,Oe)=>function eu(b,A,L,ie){b=(0,O.m9)(b),function Dh(b,A,L,ie,Ie){return Bu.apply(this,arguments)}(ws,Xr[b.app.options.appId],A,L,ie).catch(Ie=>cr.error(Ie))}(L,ie,Ie,Oe)}}catch(L){throw kr.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,z.KN)(Sh,"0.8.3"),(0,z.KN)(Sh,"0.8.3","esm2017")}();var so=E(233),Ia=E(4986),nu=E(9751),qo=E(8505),y=E(9468),_=E(5363);const p=new m.GfV("7.4.1"),w="__angularfire_symbol__analyticsIsSupportedValue",S="__angularfire_symbol__analyticsIsSupported",U="__angularfire_symbol__remoteConfigIsSupportedValue",J="__angularfire_symbol__remoteConfigIsSupported",ae="__angularfire_symbol__messagingIsSupportedValue",Ne="__angularfire_symbol__messagingIsSupported";function ji(b,A,L){if(A){if(1===A.length)return A[0];const Oe=A.filter(Je=>Je.app===L);if(1===Oe.length)return Oe[0]}return L.container.getProvider(b).getImmediate({optional:!0})}globalThis[S]||(globalThis[S]=Th().then(b=>globalThis[w]=b).catch(()=>globalThis[w]=!1)),globalThis[Ne]||(globalThis[Ne]=Et().then(b=>globalThis[ae]=b).catch(()=>globalThis[ae]=!1)),globalThis[J]||(globalThis[J]=Ci().then(b=>globalThis[U]=b).catch(()=>globalThis[U]=!1));const oo=(b,A)=>{const L=A?[A]:(0,M.C6)(),ie=[];return L.forEach(Ie=>{Ie.container.getProvider(b).instances.forEach(Je=>{ie.includes(Je)||ie.push(Je)})}),ie};function us(){}class Ri{constructor(A,L=so.N){this.zone=A,this.delegate=L}now(){return this.delegate.now()}schedule(A,L,ie){const Ie=this.zone;return this.delegate.schedule(function(Je){Ie.runGuarded(()=>{A.apply(this,[Je])})},L,ie)}}class qu{constructor(A){this.zone=A,this.task=null}call(A,L){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",us,{},us,us)),L.pipe((0,qo.b)({next:ie,complete:ie,error:ie})).subscribe(A).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bs=(()=>{class b{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new Ri(Zone.current)),this.insideAngular=L.run(()=>new Ri(Zone.current,Ia.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(L){return new(L||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Da(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function wa(b){return Da().ngZone.runOutsideAngular(()=>b())}function zs(b){return Da().ngZone.run(()=>b())}function qp(b){return Da(),function Yp(b){return function(L){return(L=L.lift(new qu(b.ngZone))).pipe((0,y.R)(b.outsideAngular),(0,_.Q)(b.insideAngular))}}(Da())(b)}const Fc=(b,A)=>function(){const ie=arguments;return A&&setTimeout(()=>{"scheduled"===A.state&&A.invoke()},10),zs(()=>b.apply(void 0,ie))},ba=(b,A)=>function(){let L;const ie=arguments;for(let Oe=0;Oe<arguments.length;Oe++)"function"==typeof ie[Oe]&&(A&&(L||(L=zs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",us,{},us,us)))),ie[Oe]=Fc(ie[Oe],L));const Ie=wa(()=>b.apply(this,ie));if(!A){if(Ie instanceof nu.y){const Oe=Da();return Ie.pipe((0,y.R)(Oe.outsideAngular),(0,_.Q)(Oe.insideAngular))}return zs(()=>Ie)}return Ie instanceof nu.y?Ie.pipe(qp):Ie instanceof Promise?zs(()=>new Promise((Oe,Je)=>Ie.then(ht=>zs(()=>Oe(ht)),ht=>zs(()=>Je(ht))))):"function"==typeof Ie&&L?function(){return setTimeout(()=>{L&&"scheduled"===L.state&&L.invoke()},10),Ie.apply(this,arguments)}:zs(()=>Ie)}},2090:(le,k,E)=>{E.d(k,{$s:()=>yt,BH:()=>Ft,G6:()=>Le,L:()=>Q,LL:()=>qt,P0:()=>Xe,Pz:()=>rn,Sg:()=>at,US:()=>W,ZR:()=>Sn,aH:()=>wt,b$:()=>Ee,eu:()=>_t,hl:()=>nt,m9:()=>Vt,ne:()=>En,ru:()=>we,tV:()=>K,uI:()=>ve,vZ:()=>rt,xO:()=>qn,z$:()=>ye,zI:()=>Be});const z=function(de){const se=[];let ge=0;for(let ze=0;ze<de.length;ze++){let De=de.charCodeAt(ze);De<128?se[ge++]=De:De<2048?(se[ge++]=De>>6|192,se[ge++]=63&De|128):55296==(64512&De)&&ze+1<de.length&&56320==(64512&de.charCodeAt(ze+1))?(De=65536+((1023&De)<<10)+(1023&de.charCodeAt(++ze)),se[ge++]=De>>18|240,se[ge++]=De>>12&63|128,se[ge++]=De>>6&63|128,se[ge++]=63&De|128):(se[ge++]=De>>12|224,se[ge++]=De>>6&63|128,se[ge++]=63&De|128)}return se},W={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,se){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,ze=[];for(let De=0;De<de.length;De+=3){const st=de[De],Dt=De+1<de.length,Jt=Dt?de[De+1]:0,Tn=De+2<de.length,nn=Tn?de[De+2]:0;let Z=(15&Jt)<<2|nn>>6,be=63&nn;Tn||(be=64,Dt||(Z=64)),ze.push(ge[st>>2],ge[(3&st)<<4|Jt>>4],ge[Z],ge[be])}return ze.join("")},encodeString(de,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(de):this.encodeByteArray(z(de),se)},decodeString(de,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(de):function(de){const se=[];let ge=0,ze=0;for(;ge<de.length;){const De=de[ge++];if(De<128)se[ze++]=String.fromCharCode(De);else if(De>191&&De<224){const st=de[ge++];se[ze++]=String.fromCharCode((31&De)<<6|63&st)}else if(De>239&&De<365){const Tn=((7&De)<<18|(63&de[ge++])<<12|(63&de[ge++])<<6|63&de[ge++])-65536;se[ze++]=String.fromCharCode(55296+(Tn>>10)),se[ze++]=String.fromCharCode(56320+(1023&Tn))}else{const st=de[ge++],Dt=de[ge++];se[ze++]=String.fromCharCode((15&De)<<12|(63&st)<<6|63&Dt)}}return se.join("")}(this.decodeStringToByteArray(de,se))},decodeStringToByteArray(de,se){this.init_();const ge=se?this.charToByteMapWebSafe_:this.charToByteMap_,ze=[];for(let De=0;De<de.length;){const st=ge[de.charAt(De++)],Jt=De<de.length?ge[de.charAt(De)]:0;++De;const nn=De<de.length?ge[de.charAt(De)]:64;++De;const X=De<de.length?ge[de.charAt(De)]:64;if(++De,null==st||null==Jt||null==nn||null==X)throw Error();ze.push(st<<2|Jt>>4),64!==nn&&(ze.push(Jt<<4&240|nn>>2),64!==X&&ze.push(nn<<6&192|X))}return ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}},Q=function(de){return function(de){const se=z(de);return W.encodeByteArray(se,!0)}(de).replace(/\./g,"")},K=function(de){try{return W.decodeString(de,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())}function we(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return!function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nt(){return"object"==typeof indexedDB}function _t(){return new Promise((de,se)=>{try{let ge=!0;const ze="validate-browser-context-for-indexeddb-analytics-module",De=self.indexedDB.open(ze);De.onsuccess=()=>{De.result.close(),ge||self.indexedDB.deleteDatabase(ze),de(!0)},De.onupgradeneeded=()=>{ge=!1},De.onerror=()=>{var st;se((null===(st=De.error)||void 0===st?void 0:st.message)||"")}}catch(ge){se(ge)}})}function Be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const _e=()=>{try{return function Ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const de=process.env.__FIREBASE_DEFAULTS__;return de?JSON.parse(de):void 0})()||(()=>{if(typeof document>"u")return;let de;try{de=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const se=de&&K(de[1]);return se&&JSON.parse(se)})()}catch(de){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${de}`)}},Xe=de=>{const se=(de=>{var se,ge;return null===(ge=null===(se=_e())||void 0===se?void 0:se.emulatorHosts)||void 0===ge?void 0:ge[de]})(de);if(!se)return;const ge=se.lastIndexOf(":");if(ge<=0||ge+1===se.length)throw new Error(`Invalid host ${se} with no separate hostname and port!`);const ze=parseInt(se.substring(ge+1),10);return"["===se[0]?[se.substring(1,ge-1),ze]:[se.substring(0,ge),ze]},wt=()=>{var de;return null===(de=_e())||void 0===de?void 0:de.config},rn=de=>{var se;return null===(se=_e())||void 0===se?void 0:se[`_${de}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,ge)=>{this.resolve=se,this.reject=ge})}wrapCallback(se){return(ge,ze)=>{ge?this.reject(ge):this.resolve(ze),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(ge):se(ge,ze))}}}function at(de,se){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ze=se||"demo-project",De=de.iat||0,st=de.sub||de.user_id;if(!st)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Dt=Object.assign({iss:`https://securetoken.google.com/${ze}`,aud:ze,iat:De,exp:De+3600,auth_time:De,sub:st,user_id:st,firebase:{sign_in_provider:"custom",identities:{}}},de);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(Dt)),""].join(".")}class Sn extends Error{constructor(se,ge,ze){super(ge),this.code=se,this.customData=ze,this.name="FirebaseError",Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}}class qt{constructor(se,ge,ze){this.service=se,this.serviceName=ge,this.errors=ze}create(se,...ge){const ze=ge[0]||{},De=`${this.service}/${se}`,st=this.errors[se],Dt=st?function Qt(de,se){return de.replace(Ct,(ge,ze)=>{const De=se[ze];return null!=De?String(De):`<${ze}?>`})}(st,ze):"Error";return new Sn(De,`${this.serviceName}: ${Dt} (${De}).`,ze)}}const Ct=/\{\$([^}]+)}/g;function rt(de,se){if(de===se)return!0;const ge=Object.keys(de),ze=Object.keys(se);for(const De of ge){if(!ze.includes(De))return!1;const st=de[De],Dt=se[De];if(Pn(st)&&Pn(Dt)){if(!rt(st,Dt))return!1}else if(st!==Dt)return!1}for(const De of ze)if(!ge.includes(De))return!1;return!0}function Pn(de){return null!==de&&"object"==typeof de}function qn(de){const se=[];for(const[ge,ze]of Object.entries(de))Array.isArray(ze)?ze.forEach(De=>{se.push(encodeURIComponent(ge)+"="+encodeURIComponent(De))}):se.push(encodeURIComponent(ge)+"="+encodeURIComponent(ze));return se.length?"&"+se.join("&"):""}function En(de,se){const ge=new wn(de,se);return ge.subscribe.bind(ge)}class wn{constructor(se,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{se(this)}).catch(ze=>{this.error(ze)})}next(se){this.forEachObserver(ge=>{ge.next(se)})}error(se){this.forEachObserver(ge=>{ge.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,ge,ze){let De;if(void 0===se&&void 0===ge&&void 0===ze)throw new Error("Missing Observer.");De=function St(de,se){if("object"!=typeof de||null===de)return!1;for(const ge of se)if(ge in de&&"function"==typeof de[ge])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:ge,complete:ze},void 0===De.next&&(De.next=tn),void 0===De.error&&(De.error=tn),void 0===De.complete&&(De.complete=tn);const st=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?De.error(this.finalError):De.complete()}catch{}}),this.observers.push(De),st}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,se)}sendOne(se,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{ge(this.observers[se])}catch(ze){typeof console<"u"&&console.error&&console.error(ze)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function yt(de,se=1e3,ge=2){const ze=se*Math.pow(ge,de),De=Math.round(.5*ze*(Math.random()-.5)*2);return Math.min(144e5,ze+De)}function Vt(de){return de&&de._delegate?de._delegate:de}},1899:(le,k,E)=>{E.d(k,{S:()=>ye});var m=E(7332),M=E(1365),F=E(9300),z=E(4004),O=E(8505),W=E(8675),ee=E(9751),G=E(4650),H=E(3602),te=E(8418);let ye=(()=>{class ve{constructor(Ue,we,Ee){this.store=Ue,this.gameService=we,this.networkService=Ee,this.dailyGameData$=this.selectTodaysDaily().pipe((0,M.M)(this.networkService.networkStatus$),(0,F.h)(([,We])=>!!We),(0,z.U)(([We])=>We),(0,O.b)(We=>{We||this.setDaily()}),(0,W.O)(null)),(0,m.ST)(Ue)}selectTodaysDaily(){return this.selectDaily((new Date).toLocaleDateString("sv"))}selectDaily(Ue){return new ee.y(we=>(0,m.cf)((0,m.JU)(this.store,"daily",Ue),Ee=>{const We=Ee.data();we.next(We?function Q(ve){const Ue=ve.board,we=ve.date,Ee=ve.title;return Ue?{difficulty:ve.difficulty,board:JSON.parse(Ue),date:new Date(we),title:Ee}:null}(We):null)},Ee=>we.error(Ee.message)))}setDaily(){const Ue=this.gameService.generateGameData(),we=(new Date).toLocaleDateString("sv");(0,m.pl)((0,m.JU)(this.store,"daily",we),function K(ve){return{difficulty:ve.difficulty,board:JSON.stringify(ve.board),date:ve.date?.getTime(),title:ve.title}}({...Ue,title:"Daily sudoku"}))}}return ve.\u0275fac=function(Ue){return new(Ue||ve)(G.LFG(m.gg),G.LFG(H.h),G.LFG(te.S))},ve.\u0275prov=G.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})()},3602:(le,k,E)=>{E.d(k,{h:()=>W});var m=E(5697),M=E(2340),F=E(4650),z=E(4759);let O=(()=>{class ee{saveGame(K){if(K===z.E||!K.date)return;const G=K.date.getTime().toString();localStorage.setItem(G,JSON.stringify(K)),localStorage.setItem("last-game",G)}loadGame(K){const G=localStorage.getItem(K);if(!G)return;const H=JSON.parse(G);return{...H,date:new Date(H.date)}}}return ee.\u0275fac=function(K){return new(K||ee)},ee.\u0275prov=F.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})(),W=(()=>{class ee{constructor(K){this.gameSaveRepository=K}setCellValue(K,G,H){return G&&H&&!H.readonly?G.map((te,ye)=>te.map((ve,me)=>ye===H.row&&me===H.col?{...ve,value:K}:ve)):G}clearCellValue(K,G){return K&&G&&!G.readonly?K.map((H,te)=>H.map((ye,ve)=>te===G.row&&ve===G.col?{...ye,value:void 0}:ye)):K}generateGameData(K){const G=[...Array(M.N.puzzleSize)].map(()=>Array(M.N.puzzleSize)),H=(0,m.V)(K),te=H.difficulty,ye=Array.from(H.puzzle),ve=Array.from(H.solution);return ye.forEach((me,Ue)=>{const we=~~(Ue/M.N.puzzleSize),Ee=Ue%M.N.puzzleSize,We="-"!==me?Number(me):void 0,ot="-"!==ve[Ue]?Number(ve[Ue]):void 0;G[we][Ee]={value:We,answer:ot,readonly:!!We}}),{difficulty:te,board:G,date:new Date}}isComplete(K){return!!K&&!K?.some(G=>G.some(H=>H.value!==H.answer))}saveGame(K){this.gameSaveRepository.saveGame(K)}loadGame(K){if(K)return this.gameSaveRepository.loadGame(K)}}return ee.\u0275fac=function(K){return new(K||ee)(F.LFG(O))},ee.\u0275prov=F.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})()},8418:(le,k,E)=>{E.d(k,{S:()=>W});var m=E(6451),M=E(9646),F=E(4968),z=E(4004),O=E(4650);let W=(()=>{class ee{constructor(){this.networkStatus$=(0,m.T)((0,M.of)(null),(0,F.R)(window,"online"),(0,F.R)(window,"offline")).pipe((0,z.U)(()=>navigator.onLine))}}return ee.\u0275fac=function(K){return new(K||ee)},ee.\u0275prov=O.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})()},6511:(le,k,E)=>{E.d(k,{EU:()=>G,G1:()=>W,O7:()=>F,Qx:()=>H,_N:()=>O,aT:()=>ee,iN:()=>te,qN:()=>Q,sO:()=>K,tU:()=>M,wc:()=>z});var m=E(2997);const M=(0,m.PH)("[GAME - app] set board",(0,m.Ky)()),F=(0,m.PH)("[GAME - app] game won"),z=(0,m.PH)("[GAME - app] load game",(0,m.Ky)()),O=(0,m.PH)("[GAME - app] load new game",(0,m.Ky)()),W=(0,m.PH)("[GAME - app] detected incorrect answer"),ee=(0,m.PH)("[GAME - app] add second to gameTime"),Q=(0,m.PH)("[GAME - user] set active cell",(0,m.Ky)()),K=(0,m.PH)("[GAME - user] set value",(0,m.Ky)()),G=(0,m.PH)("[GAME - user] Clear value"),H=(0,m.PH)("[GAME - user] start new game",(0,m.Ky)()),te=(0,m.PH)("[GAME - user] start daily game")},4759:(le,k,E)=>{E.d(k,{E:()=>F,F:()=>z});var m=E(2997),M=E(6511);const F={difficulty:null,board:null,date:null,activeCell:null,errors:0,timeInSeconds:0},z=(0,m.Lq)(F,(0,m.on)(M.wc,(O,{game:W})=>W),(0,m.on)(M._N,(O,{board:W,difficulty:ee,date:Q,title:K})=>({board:W,difficulty:ee,date:Q,title:K,activeCell:null,errors:0,timeInSeconds:0})),(0,m.on)(M.qN,(O,{cell:W})=>({...O,activeCell:W})),(0,m.on)(M.tU,(O,{board:W})=>({...O,board:W})),(0,m.on)(M.G1,(O,{})=>({...O,errors:O.errors+1})),(0,m.on)(M.aT,(O,{})=>({...O,timeInSeconds:O.timeInSeconds+1})))},6767:(le,k,E)=>{E.d(k,{AG:()=>O,Hf:()=>M,I3:()=>F,Jr:()=>G,XR:()=>te,fS:()=>H,i2:()=>Q,pK:()=>ee,qR:()=>K,vj:()=>W});var m=E(2997);const M=(0,m.ZF)("gameState"),F=(0,m.P1)(M,ye=>ye.board),z=(0,m.P1)(M,ye=>ye.activeCell),O=(0,m.P1)(M,ye=>ye.difficulty),W=(0,m.P1)(M,ye=>ye.date),ee=(0,m.P1)(M,ye=>ye.title),Q=(0,m.P1)(M,ye=>ye.errors),K=(0,m.P1)(M,ye=>ye.timeInSeconds),G=(0,m.P1)(F,z,(ye,ve)=>ye&&ve&&null!==ve.row&&null!==ve.col?{...ye[ve.row][ve.col],...ve}:null),H=(0,m.P1)(F,G,(ye,ve)=>({board:ye,activeFieldCell:ve})),te=(0,m.P1)(F,ye=>{const ve=Array(9).fill(0);return ye?.forEach(me=>me.forEach(Ue=>{void 0!==Ue.value&&Ue.value===Ue.answer&&(ve[Ue.value-1]+=1)})),ve})},7753:(le,k,E)=>{function M(z){return null!=z}E.d(k,{BX:()=>M})},2340:(le,k,E)=>{E.d(k,{N:()=>m});const m={production:!0,puzzleSize:9,maxErrors:3,firebase:{apiKey:"AIzaSyAgbFRxiUZqSXgGHBGpVDZFIpzoHrT9dME",authDomain:"sudoku-cef3b.firebaseapp.com",projectId:"sudoku-cef3b",storageBucket:"sudoku-cef3b.appspot.com",messagingSenderId:"784903023710",appId:"1:784903023710:web:d577d5b4011f864cbdd8cf",measurementId:"G-YL75TXC1Y9"}}},8811:(le,k,E)=>{var m=E(1481),M=E(4650),F=E(1869),z=E(6895),O=E(9770),W=E(2843),ee=E(4968),Q=E(9646),K=E(7272),G=E(7579),H=E(9751),te=E(5032);const ye=new H.y(te.Z);var me=E(6451),Ue=E(4004),we=E(9300),Ee=E(3900),We=E(4033),ot=E(576),Pe=E(8421),Se=E(4482);const nt={connector:()=>new G.x};function _t(oe,N=nt){const{connector:$}=N;return(0,Se.e)((q,he)=>{const Re=$();(0,Pe.Xf)(oe(function Le(oe){return new H.y(N=>oe.subscribe(N))}(Re))).subscribe(he),he.add(q.subscribe(Re))})}var pe=E(5698),ne=E(8505),Ae=E(4986),_e=E(5403);function Ze(){return(0,Se.e)((oe,N)=>{oe.subscribe((0,_e.x)(N,te.Z))})}var Xe=E(9718),wt=E(5577);function rn(oe,N){return N?$=>(0,K.z)(N.pipe((0,pe.q)(1),Ze()),$.pipe(rn(oe))):(0,wt.z)(($,q)=>oe($,q).pipe((0,pe.q)(1),(0,Xe.h)($)))}var Ft=E(2805);function at(oe,N=Ae.z){const $=(0,Ft.H)(oe,N);return rn(()=>$)}const dn="Service workers are disabled or not supported by this browser";class qt{constructor(N){if(this.serviceWorker=N,N){const q=(0,ee.R)(N,"controllerchange").pipe((0,Ue.U)(()=>N.controller)),he=(0,O.P)(()=>(0,Q.of)(N.controller)),Re=(0,K.z)(he,q);this.worker=Re.pipe((0,we.h)(yn=>!!yn)),this.registration=this.worker.pipe((0,Ee.w)(()=>N.getRegistration()));const Mt=(0,ee.R)(N,"message").pipe((0,Ue.U)(yn=>yn.data)).pipe((0,we.h)(yn=>yn&&yn.type)).pipe(function Ke(oe){return oe?N=>_t(oe)(N):N=>function Be(oe,N){const $=(0,ot.m)(oe)?oe:()=>oe;return(0,ot.m)(N)?_t(N,{connector:$}):q=>new We.c(q,$)}(new G.x)(N)}());Mt.connect(),this.events=Mt}else this.worker=this.events=this.registration=function Sn(oe){return(0,O.P)(()=>(0,W._)(new Error(oe)))}(dn)}postMessage(N,$){return this.worker.pipe((0,pe.q)(1),(0,ne.b)(q=>{q.postMessage({action:N,...$})})).toPromise().then(()=>{})}postMessageWithOperation(N,$,q){const he=this.waitForOperationCompleted(q),Re=this.postMessage(N,$);return Promise.all([Re,he]).then(([,$e])=>$e)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(N){let $;return $="string"==typeof N?q=>q.type===N:q=>N.includes(q.type),this.events.pipe((0,we.h)($))}nextEventOfType(N){return this.eventsOfType(N).pipe((0,pe.q)(1))}waitForOperationCompleted(N){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,we.h)($=>$.nonce===N),(0,pe.q)(1),(0,Ue.U)($=>{if(void 0!==$.result)return $.result;throw new Error($.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Qt=(()=>{class oe{constructor($){if(this.sw=$,this.subscriptionChanges=new G.x,!$.isEnabled)return this.messages=ye,this.notificationClicks=ye,void(this.subscription=ye);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ue.U)(he=>he.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ue.U)(he=>he.data)),this.pushManager=this.sw.registration.pipe((0,Ue.U)(he=>he.pushManager));const q=this.pushManager.pipe((0,Ee.w)(he=>he.getSubscription()));this.subscription=(0,me.T)(q,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription($){if(!this.sw.isEnabled)return Promise.reject(new Error(dn));const q={userVisibleOnly:!0};let he=this.decodeBase64($.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Re=new Uint8Array(new ArrayBuffer(he.length));for(let $e=0;$e<he.length;$e++)Re[$e]=he.charCodeAt($e);return q.applicationServerKey=Re,this.pushManager.pipe((0,Ee.w)($e=>$e.subscribe(q)),(0,pe.q)(1)).toPromise().then($e=>(this.subscriptionChanges.next($e),$e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,pe.q)(1),(0,Ee.w)(q=>{if(null===q)throw new Error("Not subscribed to push notifications.");return q.unsubscribe().then(he=>{if(!he)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(dn))}decodeBase64($){return atob($)}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(qt))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),Ct=(()=>{class oe{constructor($){if(this.sw=$,!$.isEnabled)return this.versionUpdates=ye,this.available=ye,this.activated=ye,void(this.unrecoverable=ye);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,we.h)(q=>"VERSION_READY"===q.type),(0,Ue.U)(q=>({type:"UPDATE_AVAILABLE",current:q.currentVersion,available:q.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(dn));const $=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:$},$)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(dn));const $=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:$},$)}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(qt))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class sn{}const Br=new M.OlP("NGSW_REGISTER_SCRIPT");function yr(oe,N,$,q){return()=>{if(!(0,z.NF)(q)||!("serviceWorker"in navigator)||!1===$.enabled)return;let he;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof $.registrationStrategy)he=$.registrationStrategy();else{const[$e,...gt]=($.registrationStrategy||"registerWhenStable:30000").split(":");switch($e){case"registerImmediately":he=(0,Q.of)(null);break;case"registerWithDelay":he=hn(+gt[0]||0);break;case"registerWhenStable":he=gt[0]?(0,me.T)(pn(oe),hn(+gt[0])):pn(oe);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${$.registrationStrategy}`)}}oe.get(M.R0b).runOutsideAngular(()=>he.pipe((0,pe.q)(1)).subscribe(()=>navigator.serviceWorker.register(N,{scope:$.scope}).catch($e=>console.error("Service worker registration failed with:",$e))))}}function hn(oe){return(0,Q.of)(null).pipe(at(oe))}function pn(oe){return oe.get(M.z2F).isStable.pipe((0,we.h)($=>$))}function rr(oe,N){return new qt((0,z.NF)(N)&&!1!==oe.enabled?navigator.serviceWorker:void 0)}let xr=(()=>{class oe{static register($,q={}){return{ngModule:oe,providers:[{provide:Br,useValue:$},{provide:sn,useValue:q},{provide:qt,useFactory:rr,deps:[sn,M.Lbi]},{provide:M.ip1,useFactory:yr,deps:[M.zs3,Br,sn,M.Lbi],multi:!0}]}}}return oe.\u0275fac=function($){return new($||oe)},oe.\u0275mod=M.oAB({type:oe}),oe.\u0275inj=M.cJS({providers:[Qt,Ct]}),oe})(),ir=(()=>{class oe{constructor($){this.updates=$,console.log("updates..."),this.updates.versionUpdates.subscribe(q=>{console.log(q),"VERSION_READY"===q.type&&this.showAppUpdateAlert()})}showAppUpdateAlert(){confirm("There's an update ready, update now?")&&this.doAppUpdate()}doAppUpdate(){this.updates.activateUpdate().then($=>{console.log("update installed..."),document.location.reload()})}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(Ct))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})();var xn=E(8418);let qr=(()=>{class oe{constructor($,q){this.title="sudoku-app"}}return oe.\u0275fac=function($){return new($||oe)(M.Y36(ir),M.Y36(xn.S))},oe.\u0275cmp=M.Xpm({type:oe,selectors:[["app-root"]],decls:1,vars:0,template:function($,q){1&$&&M._UZ(0,"router-outlet")},dependencies:[F.lC],encapsulation:2}),oe})();var gn=E(6767),rt=E(2997);const Ii=[{path:"",loadChildren:()=>Promise.all([E.e(592),E.e(651)]).then(E.bind(E,651)).then(oe=>oe.HomeModule)},{path:"game",canActivate:[(()=>{class oe{constructor($,q){this.store=$,this.router=q}canActivate($,q){return this.store.select(gn.fS).pipe((0,Ue.U)(he=>!!he.board),(0,ne.b)(he=>{he||this.router.navigate([""],{queryParams:{returnUrl:q.url}})}))}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(rt.yh),M.LFG(F.F0))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})()],loadChildren:()=>Promise.all([E.e(592),E.e(544)]).then(E.bind(E,9544)).then(oe=>oe.GameModule)}];var qn=E(3692),dr=E(7332),Yr=E(825),Un=E(9635),En=E(515);class vt{constructor(N,$,q){this.kind=N,this.value=$,this.error=q,this.hasValue="N"===N}observe(N){return St(this,N)}do(N,$,q){const{kind:he,value:Re,error:$e}=this;return"N"===he?N?.(Re):"E"===he?$?.($e):q?.()}accept(N,$,q){var he;return(0,ot.m)(null===(he=N)||void 0===he?void 0:he.next)?this.observe(N):this.do(N,$,q)}toObservable(){const{kind:N,value:$,error:q}=this,he="N"===N?(0,Q.of)($):"E"===N?(0,W._)(()=>q):"C"===N?En.E:0;if(!he)throw new TypeError(`Unexpected notification kind ${N}`);return he}static createNext(N){return new vt("N",N)}static createError(N){return new vt("E",void 0,N)}static createComplete(){return vt.completeNotification}}function St(oe,N){var $,q,he;const{kind:Re,value:$e,error:gt}=oe;if("string"!=typeof Re)throw new TypeError('Invalid notification, missing "kind"');"N"===Re?null===($=N.next)||void 0===$||$.call(N,$e):"E"===Re?null===(q=N.error)||void 0===q||q.call(N,gt):null===(he=N.complete)||void 0===he||he.call(N)}vt.completeNotification=new vt("C");var Jn=E(262);function mt(oe,N,$,q){return(0,Se.e)((he,Re)=>{let $e;N&&"function"!=typeof N?({duration:$,element:$e,connector:q}=N):$e=N;const gt=new Map,Bt=Rn=>{gt.forEach(Rn),Rn(Re)},Mt=Rn=>Bt(Pr=>Pr.error(Rn));let yn=0,un=!1;const nr=new _e.Q(Re,Rn=>{try{const Pr=oe(Rn);let bi=gt.get(Pr);if(!bi){gt.set(Pr,bi=q?q():new G.x);const Ti=function Ui(Rn,Pr){const bi=new H.y(Ti=>{yn++;const Ci=Pr.subscribe(Ti);return()=>{Ci.unsubscribe(),0==--yn&&un&&nr.unsubscribe()}});return bi.key=Rn,bi}(Pr,bi);if(Re.next(Ti),$){const Ci=(0,_e.x)(bi,()=>{bi.complete(),Ci?.unsubscribe()},void 0,void 0,()=>gt.delete(Pr));nr.add((0,Pe.Xf)($(Ti)).subscribe(Ci))}}bi.next($e?$e(Rn):Rn)}catch(Pr){Mt(Pr)}},()=>Bt(Rn=>Rn.complete()),Mt,()=>gt.clear(),()=>(un=!0,0===yn));he.subscribe(nr)})}function er(oe,N){return N?$=>$.pipe(er((q,he)=>(0,Pe.Xf)(oe(q,he)).pipe((0,Ue.U)((Re,$e)=>N(q,Re,he,$e))))):(0,Se.e)(($,q)=>{let he=0,Re=null,$e=!1;$.subscribe((0,_e.x)(q,gt=>{Re||(Re=(0,_e.x)(q,void 0,()=>{Re=null,$e&&q.complete()}),(0,Pe.Xf)(oe(gt,he++)).subscribe(Re))},()=>{$e=!0,!Re&&q.complete()}))})}var sr=E(4351),In=E(1365);const Rr={dispatch:!0,useEffectsErrorHandler:!0},Xt="__@ngrx/effects_create__";function bn(oe,N){const $=oe(),q={...Rr,...N};return Object.defineProperty($,Xt,{value:q}),$}function Gn(oe){return Object.getOwnPropertyNames(oe).filter(q=>!(!oe[q]||!oe[q].hasOwnProperty(Xt))&&oe[q][Xt].hasOwnProperty("dispatch")).map(q=>({propertyName:q,...oe[q][Xt]}))}function lt(oe){return Object.getPrototypeOf(oe)}const He="__@ngrx/effects__";function Nt(oe){return(0,rt.qC)(de,lt)(oe)}function de(oe){return function kt(oe){return oe.constructor.hasOwnProperty(He)}(oe)?oe.constructor[He]:[]}function ze(oe,N,$){const q=lt(oe).constructor.name,he=function ge(oe){return[Nt,Gn].reduce(($,q)=>$.concat(q(oe)),[])}(oe).map(({propertyName:Re,dispatch:$e,useEffectsErrorHandler:gt})=>{const Bt="function"==typeof oe[Re]?oe[Re]():oe[Re],Mt=gt?$(Bt,N):Bt;return!1===$e?Mt.pipe(Ze()):Mt.pipe(function tn(){return(0,Se.e)((oe,N)=>{oe.subscribe((0,_e.x)(N,$=>{N.next(vt.createNext($))},()=>{N.next(vt.createComplete()),N.complete()},$=>{N.next(vt.createError($)),N.complete()}))})}()).pipe((0,Ue.U)(un=>({effect:oe[Re],notification:un,propertyName:Re,sourceName:q,sourceInstance:oe})))});return(0,me.T)(...he)}function st(oe,N,$=10){return oe.pipe((0,Jn.K)(q=>(N&&N.handleError(q),$<=1?oe:st(oe,N,$-1))))}let Dt=(()=>{class oe extends H.y{constructor($){super(),$&&(this.source=$)}lift($){const q=new oe;return q.source=this,q.operator=$,q}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(rt.Y$))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})();function Jt(...oe){return(0,we.h)(N=>oe.some($=>"string"==typeof $?$===N.type:$.type===N.type))}const Tn=new M.OlP("@ngrx/effects Internal Root Guard"),nn=new M.OlP("@ngrx/effects User Provided Effects"),ue=new M.OlP("@ngrx/effects Internal Root Effects"),X=new M.OlP("@ngrx/effects Root Effects"),Z=new M.OlP("@ngrx/effects Internal Feature Effects"),be=new M.OlP("@ngrx/effects Feature Effects"),je=new M.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>st}),dt="@ngrx/effects/init";function wr(oe){return Vr(oe,"ngrxOnInitEffects")}function Vr(oe,N){return oe&&N in oe&&"function"==typeof oe[N]}(0,rt.PH)(dt);let Or=(()=>{class oe extends G.x{constructor($,q){super(),this.errorHandler=$,this.effectsErrorHandler=q}addEffects($){this.next($)}toActions(){return this.pipe(mt(lt),(0,wt.z)($=>$.pipe(mt(tr))),(0,wt.z)($=>{const q=$.pipe(er(Re=>function Qs(oe,N){return $=>{const q=ze($,oe,N);return function Nn(oe){return Vr(oe,"ngrxOnRunEffects")}($)?$.ngrxOnRunEffects(q):q}}(this.errorHandler,this.effectsErrorHandler)(Re)),(0,Ue.U)(Re=>(function Zt(oe,N){if("N"===oe.notification.kind){const $=oe.notification.value;!function or(oe){return"function"!=typeof oe&&oe&&oe.type&&"string"==typeof oe.type}($)&&N.handleError(new Error(`Effect ${function ui({propertyName:oe,sourceInstance:N,sourceName:$}){const q="function"==typeof N[oe];return`"${$}.${String(oe)}${q?"()":""}"`}(oe)} dispatched an invalid action: ${function Pt(oe){try{return JSON.stringify(oe)}catch{return oe}}($)}`))}}(Re,this.errorHandler),Re.notification)),(0,we.h)(Re=>"N"===Re.kind&&null!=Re.value),function bt(){return(0,Se.e)((oe,N)=>{oe.subscribe((0,_e.x)(N,$=>St($,N)))})}()),he=$.pipe((0,pe.q)(1),(0,we.h)(wr),(0,Ue.U)(Re=>Re.ngrxOnInitEffects()));return(0,me.T)(q,he)}))}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(M.qLn),M.LFG(je))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})();function tr(oe){return function Qr(oe){return Vr(oe,"ngrxOnIdentifyEffects")}(oe)?oe.ngrxOnIdentifyEffects():""}let Dn=(()=>{class oe{constructor($,q){this.effectSources=$,this.store=q,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(Or),M.LFG(rt.yh))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})(),ci=(()=>{class oe{constructor($,q,he,Re,$e,gt,Bt){this.sources=$,q.start(),Re.forEach(Mt=>$.addEffects(Mt)),he.dispatch({type:dt})}addEffects($){this.sources.addEffects($)}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(Or),M.LFG(Dn),M.LFG(rt.yh),M.LFG(X),M.LFG(rt.cr,8),M.LFG(rt.CK,8),M.LFG(Tn,8))},oe.\u0275mod=M.oAB({type:oe}),oe.\u0275inj=M.cJS({}),oe})(),rs=(()=>{class oe{constructor($,q,he,Re){q.forEach($e=>$e.forEach(gt=>$.addEffects(gt)))}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(ci),M.LFG(be),M.LFG(rt.cr,8),M.LFG(rt.CK,8))},oe.\u0275mod=M.oAB({type:oe}),oe.\u0275inj=M.cJS({}),oe})(),Di=(()=>{class oe{static forFeature($=[]){return{ngModule:rs,providers:[$,{provide:Z,multi:!0,useValue:$},{provide:nn,multi:!0,useValue:[]},{provide:be,multi:!0,useFactory:li,deps:[M.zs3,Z,nn]}]}}static forRoot($=[]){return{ngModule:ci,providers:[$,{provide:ue,useValue:[$]},{provide:Tn,useFactory:wi,deps:[[Dn,new M.FiY,new M.tp0],[ue,new M.PiD]]},{provide:nn,multi:!0,useValue:[]},{provide:X,useFactory:li,deps:[M.zs3,ue,nn]}]}}}return oe.\u0275fac=function($){return new($||oe)},oe.\u0275mod=M.oAB({type:oe}),oe.\u0275inj=M.cJS({}),oe})();function li(oe,N,$){const q=[];for(const he of N)q.push(...he);for(const he of $)q.push(...he);return function qi(oe,N){return N.map($=>oe.get($))}(oe,q)}function wi(oe,N){if((1!==N.length||0!==N[0].length)&&oe)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}function $n(oe){return(0,Un.z)((0,sr.b)(N=>{const $=oe(N),q=Array.isArray($)?$:[$];return(0,Q.of)(N).pipe((0,In.M)(...q))}))}var kn=E(2340),jr=E(4759),Yi=E(7753),vr=E(6511),Zi=E(3602),Er=E(1899);let gs=(()=>{class oe{constructor($,q,he,Re,$e){this.store=$,this.actions$=q,this.gameService=he,this.dailyService=Re,this.router=$e,this.setBoard$=bn(()=>this.store.select(gn.Hf).pipe((0,ne.b)(gt=>this.gameService.saveGame(gt))),{dispatch:!1}),this.setValue$=bn(()=>this.actions$.pipe(Jt(vr.sO),$n(()=>[this.store.select(gn.I3),this.store.select(gn.Jr),this.store.select(gn.i2)]),(0,Ee.w)(([{value:gt},Bt,Mt,yn])=>{const un=this.gameService.setCellValue(gt,Bt,Mt),nr=Mt&&Mt?.answer!==gt&&Mt?.value!==gt&&!Mt.readonly,Ui=this.gameService.isComplete(un);return(0,K.z)([(0,vr.tU)({board:un}),...nr?[(0,vr.G1)()]:[],...Ui?[(0,vr.O7)()]:[]])}))),this.clearValue$=bn(()=>this.actions$.pipe(Jt(vr.EU),$n(()=>[this.store.select(gn.I3),this.store.select(gn.Jr)]),(0,Ee.w)(([{},gt,Bt])=>(0,Q.of)((0,vr.tU)({board:this.gameService.clearCellValue(gt,Bt)}))))),this.startNewGame$=bn(()=>this.actions$.pipe(Jt(vr.Qx),(0,Ee.w)(({difficulty:gt})=>(0,Q.of)((0,vr._N)(this.gameService.generateGameData(gt)))))),this.startDailyGame$=bn(()=>this.actions$.pipe(Jt(vr.iN),(0,Ee.w)(()=>this.dailyService.dailyGameData$),(0,we.h)(Yi.BX),(0,Ue.U)(gt=>(0,vr._N)(gt)))),this.goToNewGame$=bn(()=>this.actions$.pipe(Jt(vr._N,vr.wc),(0,ne.b)(()=>this.router.navigate(["/","game"]))),{dispatch:!1}),this.winGame$=bn(()=>this.actions$.pipe(Jt(vr.O7),(0,ne.b)(()=>this.router.navigate(["/","game","winner"]))),{dispatch:!1})}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(rt.yh),M.LFG(Dt),M.LFG(Zi.h),M.LFG(Er.S),M.LFG(F.F0))},oe.\u0275prov=M.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),No=(()=>{class oe{constructor($){if($)throw new Error("CoreModule is already loaded. Import it in the AppModule only.")}}return oe.\u0275fac=function($){return new($||oe)(M.LFG(oe,12))},oe.\u0275mod=M.oAB({type:oe}),oe.\u0275inj=M.cJS({providers:[ir],imports:[z.ez,m.b2,(0,qn.hX)(()=>(0,qn.ZF)(kn.N.firebase)),(0,dr.Cm)(()=>(0,dr.ad)()),rt.Aw.forRoot({gameState:jr.F}),Di.forRoot([gs]),Yr.FT.instrument({maxAge:25,logOnly:kn.N.production,autoPause:!0})]}),oe})(),Ps=(()=>{class oe{}return oe.\u0275fac=function($){return new($||oe)},oe.\u0275mod=M.oAB({type:oe,bootstrap:[qr]}),oe.\u0275inj=M.cJS({imports:[No,F.Bz.forRoot(Ii),xr.register("ngsw-worker.js",{enabled:kn.N.production,registrationStrategy:"registerWhenStable:30000"})]}),oe})();kn.N.production&&(0,M.G48)(),m.q6().bootstrapModule(Ps).catch(oe=>console.error(oe))},5867:(le,k,E)=>{E.d(k,{C6:()=>m.C6,KN:()=>m.KN,Mq:()=>m.Mq,ZF:()=>m.ZF});var m=E(9681);(0,m.KN)("firebase","9.12.1","app")},1135:(le,k,E)=>{E.d(k,{X:()=>M});var m=E(7579);class M extends m.x{constructor(z){super(),this._value=z}get value(){return this.getValue()}_subscribe(z){const O=super._subscribe(z);return!O.closed&&z.next(this._value),O}getValue(){const{hasError:z,thrownError:O,_value:W}=this;if(z)throw O;return this._throwIfClosed(),W}next(z){super.next(this._value=z)}}},9751:(le,k,E)=>{E.d(k,{y:()=>Q});var m=E(930),M=E(727),F=E(8822),z=E(9635),O=E(2416),W=E(576),ee=E(2806);let Q=(()=>{class te{constructor(ve){ve&&(this._subscribe=ve)}lift(ve){const me=new te;return me.source=this,me.operator=ve,me}subscribe(ve,me,Ue){const we=function H(te){return te&&te instanceof m.Lv||function G(te){return te&&(0,W.m)(te.next)&&(0,W.m)(te.error)&&(0,W.m)(te.complete)}(te)&&(0,M.Nn)(te)}(ve)?ve:new m.Hp(ve,me,Ue);return(0,ee.x)(()=>{const{operator:Ee,source:We}=this;we.add(Ee?Ee.call(we,We):We?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(ve){try{return this._subscribe(ve)}catch(me){ve.error(me)}}forEach(ve,me){return new(me=K(me))((Ue,we)=>{const Ee=new m.Hp({next:We=>{try{ve(We)}catch(ot){we(ot),Ee.unsubscribe()}},error:we,complete:Ue});this.subscribe(Ee)})}_subscribe(ve){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(ve)}[F.L](){return this}pipe(...ve){return(0,z.U)(ve)(this)}toPromise(ve){return new(ve=K(ve))((me,Ue)=>{let we;this.subscribe(Ee=>we=Ee,Ee=>Ue(Ee),()=>me(we))})}}return te.create=ye=>new te(ye),te})();function K(te){var ye;return null!==(ye=te??O.v.Promise)&&void 0!==ye?ye:Promise}},4707:(le,k,E)=>{E.d(k,{t:()=>F});var m=E(7579),M=E(6063);class F extends m.x{constructor(O=1/0,W=1/0,ee=M.l){super(),this._bufferSize=O,this._windowTime=W,this._timestampProvider=ee,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=W===1/0,this._bufferSize=Math.max(1,O),this._windowTime=Math.max(1,W)}next(O){const{isStopped:W,_buffer:ee,_infiniteTimeWindow:Q,_timestampProvider:K,_windowTime:G}=this;W||(ee.push(O),!Q&&ee.push(K.now()+G)),this._trimBuffer(),super.next(O)}_subscribe(O){this._throwIfClosed(),this._trimBuffer();const W=this._innerSubscribe(O),{_infiniteTimeWindow:ee,_buffer:Q}=this,K=Q.slice();for(let G=0;G<K.length&&!O.closed;G+=ee?1:2)O.next(K[G]);return this._checkFinalizedStatuses(O),W}_trimBuffer(){const{_bufferSize:O,_timestampProvider:W,_buffer:ee,_infiniteTimeWindow:Q}=this,K=(Q?1:2)*O;if(O<1/0&&K<ee.length&&ee.splice(0,ee.length-K),!Q){const G=W.now();let H=0;for(let te=1;te<ee.length&&ee[te]<=G;te+=2)H=te;H&&ee.splice(0,H+1)}}}},7579:(le,k,E)=>{E.d(k,{x:()=>ee});var m=E(9751),M=E(727);const z=(0,E(3888).d)(K=>function(){K(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var O=E(8737),W=E(2806);let ee=(()=>{class K extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const te=new Q(this,this);return te.operator=H,te}_throwIfClosed(){if(this.closed)throw new z}next(H){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(H)}})}error(H){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:te}=this;for(;te.length;)te.shift().error(H)}})}complete(){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:te,isStopped:ye,observers:ve}=this;return te||ye?M.Lc:(this.currentObservers=null,ve.push(H),new M.w0(()=>{this.currentObservers=null,(0,O.P)(ve,H)}))}_checkFinalizedStatuses(H){const{hasError:te,thrownError:ye,isStopped:ve}=this;te?H.error(ye):ve&&H.complete()}asObservable(){const H=new m.y;return H.source=this,H}}return K.create=(G,H)=>new Q(G,H),K})();class Q extends ee{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===te||te.call(H,G)}error(G){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===te||te.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,te;return null!==(te=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==te?te:M.Lc}}},930:(le,k,E)=>{E.d(k,{Hp:()=>Ue,Lv:()=>te});var m=E(576),M=E(727),F=E(2416),z=E(7849),O=E(5032);const W=K("C",void 0,void 0);function K(Pe,Se,Le){return{kind:Pe,value:Se,error:Le}}var G=E(3410),H=E(2806);class te extends M.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,M.Nn)(Se)&&Se.add(this)):this.destination=ot}static create(Se,Le,nt){return new Ue(Se,Le,nt)}next(Se){this.isStopped?We(function Q(Pe){return K("N",Pe,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?We(function ee(Pe){return K("E",void 0,Pe)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?We(W,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ye=Function.prototype.bind;function ve(Pe,Se){return ye.call(Pe,Se)}class me{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Le}=this;if(Le.next)try{Le.next(Se)}catch(nt){we(nt)}}error(Se){const{partialObserver:Le}=this;if(Le.error)try{Le.error(Se)}catch(nt){we(nt)}else we(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Le){we(Le)}}}class Ue extends te{constructor(Se,Le,nt){let _t;if(super(),(0,m.m)(Se)||!Se)_t={next:Se??void 0,error:Le??void 0,complete:nt??void 0};else{let Be;this&&F.v.useDeprecatedNextContext?(Be=Object.create(Se),Be.unsubscribe=()=>this.unsubscribe(),_t={next:Se.next&&ve(Se.next,Be),error:Se.error&&ve(Se.error,Be),complete:Se.complete&&ve(Se.complete,Be)}):_t=Se}this.destination=new me(_t)}}function we(Pe){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Pe):(0,z.h)(Pe)}function We(Pe,Se){const{onStoppedNotification:Le}=F.v;Le&&G.z.setTimeout(()=>Le(Pe,Se))}const ot={closed:!0,next:O.Z,error:function Ee(Pe){throw Pe},complete:O.Z}},727:(le,k,E)=>{E.d(k,{Lc:()=>W,w0:()=>O,Nn:()=>ee});var m=E(576);const F=(0,E(3888).d)(K=>function(H){K(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((te,ye)=>`${ye+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var z=E(8737);class O{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const ve of H)ve.remove(this);else H.remove(this);const{initialTeardown:te}=this;if((0,m.m)(te))try{te()}catch(ve){G=ve instanceof F?ve.errors:[ve]}const{_finalizers:ye}=this;if(ye){this._finalizers=null;for(const ve of ye)try{Q(ve)}catch(me){G=G??[],me instanceof F?G=[...G,...me.errors]:G.push(me)}}if(G)throw new F(G)}}add(G){var H;if(G&&G!==this)if(this.closed)Q(G);else{if(G instanceof O){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,z.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,z.P)(H,G),G instanceof O&&G._removeParent(this)}}O.EMPTY=(()=>{const K=new O;return K.closed=!0,K})();const W=O.EMPTY;function ee(K){return K instanceof O||K&&"closed"in K&&(0,m.m)(K.remove)&&(0,m.m)(K.add)&&(0,m.m)(K.unsubscribe)}function Q(K){(0,m.m)(K)?K():K.unsubscribe()}},2416:(le,k,E)=>{E.d(k,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(le,k,E)=>{E.d(k,{c:()=>W});var m=E(9751),M=E(727),F=E(8343),z=E(5403),O=E(4482);class W extends m.y{constructor(Q,K){super(),this.source=Q,this.subjectFactory=K,this._subject=null,this._refCount=0,this._connection=null,(0,O.A)(Q)&&(this.lift=Q.lift)}_subscribe(Q){return this.getSubject().subscribe(Q)}getSubject(){const Q=this._subject;return(!Q||Q.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Q}=this;this._subject=this._connection=null,Q?.unsubscribe()}connect(){let Q=this._connection;if(!Q){Q=this._connection=new M.w0;const K=this.getSubject();Q.add(this.source.subscribe((0,z.x)(K,void 0,()=>{this._teardown(),K.complete()},G=>{this._teardown(),K.error(G)},()=>this._teardown()))),Q.closed&&(this._connection=null,Q=M.w0.EMPTY)}return Q}refCount(){return(0,F.x)()(this)}}},1577:(le,k,E)=>{E.d(k,{a:()=>me});var m=E(9751);const{isArray:M}=Array,{getPrototypeOf:F,prototype:z,keys:O}=Object;var Q=E(8996),K=E(4671),G=E(3268),H=E(3269),ye=E(5403),ve=E(9672);function me(...Ee){const We=(0,H.yG)(Ee),ot=(0,H.jO)(Ee),{args:Pe,keys:Se}=function W(Ee){if(1===Ee.length){const We=Ee[0];if(M(We))return{args:We,keys:null};if(function ee(Ee){return Ee&&"object"==typeof Ee&&F(Ee)===z}(We)){const ot=O(We);return{args:ot.map(Pe=>We[Pe]),keys:ot}}}return{args:Ee,keys:null}}(Ee);if(0===Pe.length)return(0,Q.D)([],We);const Le=new m.y(function Ue(Ee,We,ot=K.y){return Pe=>{we(We,()=>{const{length:Se}=Ee,Le=new Array(Se);let nt=Se,_t=Se;for(let Be=0;Be<Se;Be++)we(We,()=>{const Ke=(0,Q.D)(Ee[Be],We);let pe=!1;Ke.subscribe((0,ye.x)(Pe,ne=>{Le[Be]=ne,pe||(pe=!0,_t--),_t||Pe.next(ot(Le.slice()))},()=>{--nt||Pe.complete()}))},Pe)},Pe)}}(Pe,We,Se?nt=>function te(Ee,We){return Ee.reduce((ot,Pe,Se)=>(ot[Pe]=We[Se],ot),{})}(Se,nt):K.y));return ot?Le.pipe((0,G.Z)(ot)):Le}function we(Ee,We,ot){Ee?(0,ve.f)(ot,Ee,We):We()}},7272:(le,k,E)=>{E.d(k,{z:()=>O});var m=E(8189),F=E(3269),z=E(8996);function O(...W){return function M(){return(0,m.J)(1)}()((0,z.D)(W,(0,F.yG)(W)))}},9770:(le,k,E)=>{E.d(k,{P:()=>F});var m=E(9751),M=E(8421);function F(z){return new m.y(O=>{(0,M.Xf)(z()).subscribe(O)})}},515:(le,k,E)=>{E.d(k,{E:()=>M});const M=new(E(9751).y)(O=>O.complete())},8996:(le,k,E)=>{E.d(k,{D:()=>Se});var m=E(8421),M=E(5363),F=E(9468),W=E(9751),Q=E(2202),K=E(576),G=E(9672);function te(Le,nt){if(!Le)throw new Error("Iterable cannot be null");return new W.y(_t=>{(0,G.f)(_t,nt,()=>{const Be=Le[Symbol.asyncIterator]();(0,G.f)(_t,nt,()=>{Be.next().then(Ke=>{Ke.done?_t.complete():_t.next(Ke.value)})},0,!0)})})}var ye=E(3670),ve=E(8239),me=E(1144),Ue=E(6495),we=E(2206),Ee=E(4532),We=E(3260);function Se(Le,nt){return nt?function Pe(Le,nt){if(null!=Le){if((0,ye.c)(Le))return function z(Le,nt){return(0,m.Xf)(Le).pipe((0,F.R)(nt),(0,M.Q)(nt))}(Le,nt);if((0,me.z)(Le))return function ee(Le,nt){return new W.y(_t=>{let Be=0;return nt.schedule(function(){Be===Le.length?_t.complete():(_t.next(Le[Be++]),_t.closed||this.schedule())})})}(Le,nt);if((0,ve.t)(Le))return function O(Le,nt){return(0,m.Xf)(Le).pipe((0,F.R)(nt),(0,M.Q)(nt))}(Le,nt);if((0,we.D)(Le))return te(Le,nt);if((0,Ue.T)(Le))return function H(Le,nt){return new W.y(_t=>{let Be;return(0,G.f)(_t,nt,()=>{Be=Le[Q.h](),(0,G.f)(_t,nt,()=>{let Ke,pe;try{({value:Ke,done:pe}=Be.next())}catch(ne){return void _t.error(ne)}pe?_t.complete():_t.next(Ke)},0,!0)}),()=>(0,K.m)(Be?.return)&&Be.return()})}(Le,nt);if((0,We.L)(Le))return function ot(Le,nt){return te((0,We.Q)(Le),nt)}(Le,nt)}throw(0,Ee.z)(Le)}(Le,nt):(0,m.Xf)(Le)}},4968:(le,k,E)=>{E.d(k,{R:()=>G});var m=E(8421),M=E(9751),F=E(5577),z=E(1144),O=E(576),W=E(3268);const ee=["addListener","removeListener"],Q=["addEventListener","removeEventListener"],K=["on","off"];function G(me,Ue,we,Ee){if((0,O.m)(we)&&(Ee=we,we=void 0),Ee)return G(me,Ue,we).pipe((0,W.Z)(Ee));const[We,ot]=function ve(me){return(0,O.m)(me.addEventListener)&&(0,O.m)(me.removeEventListener)}(me)?Q.map(Pe=>Se=>me[Pe](Ue,Se,we)):function te(me){return(0,O.m)(me.addListener)&&(0,O.m)(me.removeListener)}(me)?ee.map(H(me,Ue)):function ye(me){return(0,O.m)(me.on)&&(0,O.m)(me.off)}(me)?K.map(H(me,Ue)):[];if(!We&&(0,z.z)(me))return(0,F.z)(Pe=>G(Pe,Ue,we))((0,m.Xf)(me));if(!We)throw new TypeError("Invalid event target");return new M.y(Pe=>{const Se=(...Le)=>Pe.next(1<Le.length?Le:Le[0]);return We(Se),()=>ot(Se)})}function H(me,Ue){return we=>Ee=>me[we](Ue,Ee)}},8421:(le,k,E)=>{E.d(k,{Xf:()=>ye});var m=E(655),M=E(1144),F=E(8239),z=E(9751),O=E(3670),W=E(2206),ee=E(4532),Q=E(6495),K=E(3260),G=E(576),H=E(7849),te=E(8822);function ye(Pe){if(Pe instanceof z.y)return Pe;if(null!=Pe){if((0,O.c)(Pe))return function ve(Pe){return new z.y(Se=>{const Le=Pe[te.L]();if((0,G.m)(Le.subscribe))return Le.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,M.z)(Pe))return function me(Pe){return new z.y(Se=>{for(let Le=0;Le<Pe.length&&!Se.closed;Le++)Se.next(Pe[Le]);Se.complete()})}(Pe);if((0,F.t)(Pe))return function Ue(Pe){return new z.y(Se=>{Pe.then(Le=>{Se.closed||(Se.next(Le),Se.complete())},Le=>Se.error(Le)).then(null,H.h)})}(Pe);if((0,W.D)(Pe))return Ee(Pe);if((0,Q.T)(Pe))return function we(Pe){return new z.y(Se=>{for(const Le of Pe)if(Se.next(Le),Se.closed)return;Se.complete()})}(Pe);if((0,K.L)(Pe))return function We(Pe){return Ee((0,K.Q)(Pe))}(Pe)}throw(0,ee.z)(Pe)}function Ee(Pe){return new z.y(Se=>{(function ot(Pe,Se){var Le,nt,_t,Be;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Le=(0,m.KL)(Pe);!(nt=yield Le.next()).done;)if(Se.next(nt.value),Se.closed)return}catch(Ke){_t={error:Ke}}finally{try{nt&&!nt.done&&(Be=Le.return)&&(yield Be.call(Le))}finally{if(_t)throw _t.error}}Se.complete()})})(Pe,Se).catch(Le=>Se.error(Le))})}},6451:(le,k,E)=>{E.d(k,{T:()=>W});var m=E(8189),M=E(8421),F=E(515),z=E(3269),O=E(8996);function W(...ee){const Q=(0,z.yG)(ee),K=(0,z._6)(ee,1/0),G=ee;return G.length?1===G.length?(0,M.Xf)(G[0]):(0,m.J)(K)((0,O.D)(G,Q)):F.E}},9646:(le,k,E)=>{E.d(k,{of:()=>F});var m=E(3269),M=E(8996);function F(...z){const O=(0,m.yG)(z);return(0,M.D)(z,O)}},2843:(le,k,E)=>{E.d(k,{_:()=>F});var m=E(9751),M=E(576);function F(z,O){const W=(0,M.m)(z)?z:()=>z,ee=Q=>Q.error(W());return new m.y(O?Q=>O.schedule(ee,0,Q):ee)}},2805:(le,k,E)=>{E.d(k,{H:()=>O});var m=E(9751),M=E(4986),F=E(3532),z=E(1165);function O(W=0,ee,Q=M.P){let K=-1;return null!=ee&&((0,F.K)(ee)?Q=ee:K=ee),new m.y(G=>{let H=(0,z.q)(W)?+W-Q.now():W;H<0&&(H=0);let te=0;return Q.schedule(function(){G.closed||(G.next(te++),0<=K?this.schedule(void 0,K):G.complete())},H)})}},5403:(le,k,E)=>{E.d(k,{Q:()=>F,x:()=>M});var m=E(930);function M(z,O,W,ee,Q){return new F(z,O,W,ee,Q)}class F extends m.Lv{constructor(O,W,ee,Q,K,G){super(O),this.onFinalize=K,this.shouldUnsubscribe=G,this._next=W?function(H){try{W(H)}catch(te){O.error(te)}}:super._next,this._error=Q?function(H){try{Q(H)}catch(te){O.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ee?function(){try{ee()}catch(H){O.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var O;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:W}=this;super.unsubscribe(),!W&&(null===(O=this.onFinalize)||void 0===O||O.call(this))}}}},262:(le,k,E)=>{E.d(k,{K:()=>z});var m=E(8421),M=E(5403),F=E(4482);function z(O){return(0,F.e)((W,ee)=>{let G,Q=null,K=!1;Q=W.subscribe((0,M.x)(ee,void 0,void 0,H=>{G=(0,m.Xf)(O(H,z(O)(W))),Q?(Q.unsubscribe(),Q=null,G.subscribe(ee)):K=!0})),K&&(Q.unsubscribe(),Q=null,G.subscribe(ee))})}},4351:(le,k,E)=>{E.d(k,{b:()=>F});var m=E(5577),M=E(576);function F(z,O){return(0,M.m)(O)?(0,m.z)(z,O,1):(0,m.z)(z,1)}},8372:(le,k,E)=>{E.d(k,{b:()=>z});var m=E(4986),M=E(4482),F=E(5403);function z(O,W=m.z){return(0,M.e)((ee,Q)=>{let K=null,G=null,H=null;const te=()=>{if(K){K.unsubscribe(),K=null;const ve=G;G=null,Q.next(ve)}};function ye(){const ve=H+O,me=W.now();if(me<ve)return K=this.schedule(void 0,ve-me),void Q.add(K);te()}ee.subscribe((0,F.x)(Q,ve=>{G=ve,H=W.now(),K||(K=W.schedule(ye,O),Q.add(K))},()=>{te(),Q.complete()},void 0,()=>{G=K=null}))})}},9300:(le,k,E)=>{E.d(k,{h:()=>F});var m=E(4482),M=E(5403);function F(z,O){return(0,m.e)((W,ee)=>{let Q=0;W.subscribe((0,M.x)(ee,K=>z.call(O,K,Q++)&&ee.next(K)))})}},4004:(le,k,E)=>{E.d(k,{U:()=>F});var m=E(4482),M=E(5403);function F(z,O){return(0,m.e)((W,ee)=>{let Q=0;W.subscribe((0,M.x)(ee,K=>{ee.next(z.call(O,K,Q++))}))})}},9718:(le,k,E)=>{E.d(k,{h:()=>M});var m=E(4004);function M(F){return(0,m.U)(()=>F)}},8189:(le,k,E)=>{E.d(k,{J:()=>F});var m=E(5577),M=E(4671);function F(z=1/0){return(0,m.z)(M.y,z)}},5577:(le,k,E)=>{E.d(k,{z:()=>Q});var m=E(4004),M=E(8421),F=E(4482),z=E(9672),O=E(5403),ee=E(576);function Q(K,G,H=1/0){return(0,ee.m)(G)?Q((te,ye)=>(0,m.U)((ve,me)=>G(te,ve,ye,me))((0,M.Xf)(K(te,ye))),H):("number"==typeof G&&(H=G),(0,F.e)((te,ye)=>function W(K,G,H,te,ye,ve,me,Ue){const we=[];let Ee=0,We=0,ot=!1;const Pe=()=>{ot&&!we.length&&!Ee&&G.complete()},Se=nt=>Ee<te?Le(nt):we.push(nt),Le=nt=>{ve&&G.next(nt),Ee++;let _t=!1;(0,M.Xf)(H(nt,We++)).subscribe((0,O.x)(G,Be=>{ye?.(Be),ve?Se(Be):G.next(Be)},()=>{_t=!0},void 0,()=>{if(_t)try{for(Ee--;we.length&&Ee<te;){const Be=we.shift();me?(0,z.f)(G,me,()=>Le(Be)):Le(Be)}Pe()}catch(Be){G.error(Be)}}))};return K.subscribe((0,O.x)(G,Se,()=>{ot=!0,Pe()})),()=>{Ue?.()}}(te,ye,K,H)))}},5363:(le,k,E)=>{E.d(k,{Q:()=>z});var m=E(9672),M=E(4482),F=E(5403);function z(O,W=0){return(0,M.e)((ee,Q)=>{ee.subscribe((0,F.x)(Q,K=>(0,m.f)(Q,O,()=>Q.next(K),W),()=>(0,m.f)(Q,O,()=>Q.complete(),W),K=>(0,m.f)(Q,O,()=>Q.error(K),W)))})}},8343:(le,k,E)=>{E.d(k,{x:()=>F});var m=E(4482),M=E(5403);function F(){return(0,m.e)((z,O)=>{let W=null;z._refCount++;const ee=(0,M.x)(O,void 0,void 0,void 0,()=>{if(!z||z._refCount<=0||0<--z._refCount)return void(W=null);const Q=z._connection,K=W;W=null,Q&&(!K||Q===K)&&Q.unsubscribe(),O.unsubscribe()});z.subscribe(ee),ee.closed||(W=z.connect())})}},5026:(le,k,E)=>{E.d(k,{R:()=>z});var m=E(4482),M=E(5403);function F(O,W,ee,Q,K){return(G,H)=>{let te=ee,ye=W,ve=0;G.subscribe((0,M.x)(H,me=>{const Ue=ve++;ye=te?O(ye,me,Ue):(te=!0,me),Q&&H.next(ye)},K&&(()=>{te&&H.next(ye),H.complete()})))}}function z(O,W){return(0,m.e)(F(O,W,arguments.length>=2,!0))}},3099:(le,k,E)=>{E.d(k,{B:()=>O});var m=E(8421),M=E(7579),F=E(930),z=E(4482);function O(ee={}){const{connector:Q=(()=>new M.x),resetOnError:K=!0,resetOnComplete:G=!0,resetOnRefCountZero:H=!0}=ee;return te=>{let ye,ve,me,Ue=0,we=!1,Ee=!1;const We=()=>{ve?.unsubscribe(),ve=void 0},ot=()=>{We(),ye=me=void 0,we=Ee=!1},Pe=()=>{const Se=ye;ot(),Se?.unsubscribe()};return(0,z.e)((Se,Le)=>{Ue++,!Ee&&!we&&We();const nt=me=me??Q();Le.add(()=>{Ue--,0===Ue&&!Ee&&!we&&(ve=W(Pe,H))}),nt.subscribe(Le),!ye&&Ue>0&&(ye=new F.Hp({next:_t=>nt.next(_t),error:_t=>{Ee=!0,We(),ve=W(ot,K,_t),nt.error(_t)},complete:()=>{we=!0,We(),ve=W(ot,G),nt.complete()}}),(0,m.Xf)(Se).subscribe(ye))})(te)}}function W(ee,Q,...K){if(!0===Q)return void ee();if(!1===Q)return;const G=new F.Hp({next:()=>{G.unsubscribe(),ee()}});return Q(...K).subscribe(G)}},5684:(le,k,E)=>{E.d(k,{T:()=>M});var m=E(9300);function M(F){return(0,m.h)((z,O)=>F<=O)}},8675:(le,k,E)=>{E.d(k,{O:()=>z});var m=E(7272),M=E(3269),F=E(4482);function z(...O){const W=(0,M.yG)(O);return(0,F.e)((ee,Q)=>{(W?(0,m.z)(O,ee,W):(0,m.z)(O,ee)).subscribe(Q)})}},9468:(le,k,E)=>{E.d(k,{R:()=>M});var m=E(4482);function M(F,z=0){return(0,m.e)((O,W)=>{W.add(F.schedule(()=>O.subscribe(W),z))})}},3900:(le,k,E)=>{E.d(k,{w:()=>z});var m=E(8421),M=E(4482),F=E(5403);function z(O,W){return(0,M.e)((ee,Q)=>{let K=null,G=0,H=!1;const te=()=>H&&!K&&Q.complete();ee.subscribe((0,F.x)(Q,ye=>{K?.unsubscribe();let ve=0;const me=G++;(0,m.Xf)(O(ye,me)).subscribe(K=(0,F.x)(Q,Ue=>Q.next(W?W(ye,Ue,me,ve++):Ue),()=>{K=null,te()}))},()=>{H=!0,te()}))})}},5698:(le,k,E)=>{E.d(k,{q:()=>z});var m=E(515),M=E(4482),F=E(5403);function z(O){return O<=0?()=>m.E:(0,M.e)((W,ee)=>{let Q=0;W.subscribe((0,F.x)(ee,K=>{++Q<=O&&(ee.next(K),O<=Q&&ee.complete())}))})}},2722:(le,k,E)=>{E.d(k,{R:()=>O});var m=E(4482),M=E(5403),F=E(8421),z=E(5032);function O(W){return(0,m.e)((ee,Q)=>{(0,F.Xf)(W).subscribe((0,M.x)(Q,()=>Q.complete(),z.Z)),!Q.closed&&ee.subscribe(Q)})}},8505:(le,k,E)=>{E.d(k,{b:()=>O});var m=E(576),M=E(4482),F=E(5403),z=E(4671);function O(W,ee,Q){const K=(0,m.m)(W)||ee||Q?{next:W,error:ee,complete:Q}:W;return K?(0,M.e)((G,H)=>{var te;null===(te=K.subscribe)||void 0===te||te.call(K);let ye=!0;G.subscribe((0,F.x)(H,ve=>{var me;null===(me=K.next)||void 0===me||me.call(K,ve),H.next(ve)},()=>{var ve;ye=!1,null===(ve=K.complete)||void 0===ve||ve.call(K),H.complete()},ve=>{var me;ye=!1,null===(me=K.error)||void 0===me||me.call(K,ve),H.error(ve)},()=>{var ve,me;ye&&(null===(ve=K.unsubscribe)||void 0===ve||ve.call(K)),null===(me=K.finalize)||void 0===me||me.call(K)}))}):z.y}},7414:(le,k,E)=>{E.d(k,{V:()=>K});var m=E(4986),M=E(1165),F=E(4482),z=E(8421),O=E(3888),W=E(5403),ee=E(9672);const Q=(0,O.d)(H=>function(ye=null){H(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=ye});function K(H,te){const{first:ye,each:ve,with:me=G,scheduler:Ue=te??m.z,meta:we=null}=(0,M.q)(H)?{first:H}:"number"==typeof H?{each:H}:H;if(null==ye&&null==ve)throw new TypeError("No timeout provided.");return(0,F.e)((Ee,We)=>{let ot,Pe,Se=null,Le=0;const nt=_t=>{Pe=(0,ee.f)(We,Ue,()=>{try{ot.unsubscribe(),(0,z.Xf)(me({meta:we,lastValue:Se,seen:Le})).subscribe(We)}catch(Be){We.error(Be)}},_t)};ot=Ee.subscribe((0,W.x)(We,_t=>{Pe?.unsubscribe(),Le++,We.next(Se=_t),ve>0&&nt(ve)},void 0,void 0,()=>{Pe?.closed||Pe?.unsubscribe(),Se=null})),!Le&&nt(null!=ye?"number"==typeof ye?ye:+ye-Ue.now():ve)})}function G(H){throw new Q(H)}},1365:(le,k,E)=>{E.d(k,{M:()=>ee});var m=E(4482),M=E(5403),F=E(8421),z=E(4671),O=E(5032),W=E(3269);function ee(...Q){const K=(0,W.jO)(Q);return(0,m.e)((G,H)=>{const te=Q.length,ye=new Array(te);let ve=Q.map(()=>!1),me=!1;for(let Ue=0;Ue<te;Ue++)(0,F.Xf)(Q[Ue]).subscribe((0,M.x)(H,we=>{ye[Ue]=we,!me&&!ve[Ue]&&(ve[Ue]=!0,(me=ve.every(z.y))&&(ve=null))},O.Z));G.subscribe((0,M.x)(H,Ue=>{if(me){const we=[Ue,...ye];H.next(K?K(...we):we)}}))})}},4408:(le,k,E)=>{E.d(k,{o:()=>O});var m=E(727);class M extends m.w0{constructor(ee,Q){super()}schedule(ee,Q=0){return this}}const F={setInterval(W,ee,...Q){const{delegate:K}=F;return K?.setInterval?K.setInterval(W,ee,...Q):setInterval(W,ee,...Q)},clearInterval(W){const{delegate:ee}=F;return(ee?.clearInterval||clearInterval)(W)},delegate:void 0};var z=E(8737);class O extends M{constructor(ee,Q){super(ee,Q),this.scheduler=ee,this.work=Q,this.pending=!1}schedule(ee,Q=0){var K;if(this.closed)return this;this.state=ee;const G=this.id,H=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(H,G,Q)),this.pending=!0,this.delay=Q,this.id=null!==(K=this.id)&&void 0!==K?K:this.requestAsyncId(H,this.id,Q),this}requestAsyncId(ee,Q,K=0){return F.setInterval(ee.flush.bind(ee,this),K)}recycleAsyncId(ee,Q,K=0){if(null!=K&&this.delay===K&&!1===this.pending)return Q;null!=Q&&F.clearInterval(Q)}execute(ee,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const K=this._execute(ee,Q);if(K)return K;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ee,Q){let G,K=!1;try{this.work(ee)}catch(H){K=!0,G=H||new Error("Scheduled action threw falsy error")}if(K)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ee,scheduler:Q}=this,{actions:K}=Q;this.work=this.state=this.scheduler=null,this.pending=!1,(0,z.P)(K,this),null!=ee&&(this.id=this.recycleAsyncId(Q,ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(le,k,E)=>{E.d(k,{v:()=>F});var m=E(6063);class M{constructor(O,W=M.now){this.schedulerActionCtor=O,this.now=W}schedule(O,W=0,ee){return new this.schedulerActionCtor(this,O).schedule(ee,W)}}M.now=m.l.now;class F extends M{constructor(O,W=M.now){super(O,W),this.actions=[],this._active=!1}flush(O){const{actions:W}=this;if(this._active)return void W.push(O);let ee;this._active=!0;do{if(ee=O.execute(O.state,O.delay))break}while(O=W.shift());if(this._active=!1,ee){for(;O=W.shift();)O.unsubscribe();throw ee}}}},4986:(le,k,E)=>{E.d(k,{P:()=>z,z:()=>F});var m=E(4408);const F=new(E(7565).v)(m.o),z=F},6063:(le,k,E)=>{E.d(k,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},233:(le,k,E)=>{E.d(k,{N:()=>O});var m=E(4408),F=E(7565);const O=new class z extends F.v{}(class M extends m.o{constructor(Q,K){super(Q,K),this.scheduler=Q,this.work=K}schedule(Q,K=0){return K>0?super.schedule(Q,K):(this.delay=K,this.state=Q,this.scheduler.flush(this),this)}execute(Q,K){return K>0||this.closed?super.execute(Q,K):this._execute(Q,K)}requestAsyncId(Q,K,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(Q,K,G):(Q.flush(this),0)}})},3410:(le,k,E)=>{E.d(k,{z:()=>m});const m={setTimeout(M,F,...z){const{delegate:O}=m;return O?.setTimeout?O.setTimeout(M,F,...z):setTimeout(M,F,...z)},clearTimeout(M){const{delegate:F}=m;return(F?.clearTimeout||clearTimeout)(M)},delegate:void 0}},2202:(le,k,E)=>{E.d(k,{h:()=>M});const M=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(le,k,E)=>{E.d(k,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(le,k,E)=>{E.d(k,{_6:()=>W,jO:()=>z,yG:()=>O});var m=E(576),M=E(3532);function F(ee){return ee[ee.length-1]}function z(ee){return(0,m.m)(F(ee))?ee.pop():void 0}function O(ee){return(0,M.K)(F(ee))?ee.pop():void 0}function W(ee,Q){return"number"==typeof F(ee)?ee.pop():Q}},8737:(le,k,E)=>{function m(M,F){if(M){const z=M.indexOf(F);0<=z&&M.splice(z,1)}}E.d(k,{P:()=>m})},3888:(le,k,E)=>{function m(M){const z=M(O=>{Error.call(O),O.stack=(new Error).stack});return z.prototype=Object.create(Error.prototype),z.prototype.constructor=z,z}E.d(k,{d:()=>m})},2806:(le,k,E)=>{E.d(k,{O:()=>z,x:()=>F});var m=E(2416);let M=null;function F(O){if(m.v.useDeprecatedSynchronousErrorHandling){const W=!M;if(W&&(M={errorThrown:!1,error:null}),O(),W){const{errorThrown:ee,error:Q}=M;if(M=null,ee)throw Q}}else O()}function z(O){m.v.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=O)}},9672:(le,k,E)=>{function m(M,F,z,O=0,W=!1){const ee=F.schedule(function(){z(),W?M.add(this.schedule(null,O)):this.unsubscribe()},O);if(M.add(ee),!W)return ee}E.d(k,{f:()=>m})},4671:(le,k,E)=>{function m(M){return M}E.d(k,{y:()=>m})},1144:(le,k,E)=>{E.d(k,{z:()=>m});const m=M=>M&&"number"==typeof M.length&&"function"!=typeof M},2206:(le,k,E)=>{E.d(k,{D:()=>M});var m=E(576);function M(F){return Symbol.asyncIterator&&(0,m.m)(F?.[Symbol.asyncIterator])}},1165:(le,k,E)=>{function m(M){return M instanceof Date&&!isNaN(M)}E.d(k,{q:()=>m})},576:(le,k,E)=>{function m(M){return"function"==typeof M}E.d(k,{m:()=>m})},3670:(le,k,E)=>{E.d(k,{c:()=>F});var m=E(8822),M=E(576);function F(z){return(0,M.m)(z[m.L])}},6495:(le,k,E)=>{E.d(k,{T:()=>F});var m=E(2202),M=E(576);function F(z){return(0,M.m)(z?.[m.h])}},8239:(le,k,E)=>{E.d(k,{t:()=>M});var m=E(576);function M(F){return(0,m.m)(F?.then)}},3260:(le,k,E)=>{E.d(k,{L:()=>z,Q:()=>F});var m=E(655),M=E(576);function F(O){return(0,m.FC)(this,arguments,function*(){const ee=O.getReader();try{for(;;){const{value:Q,done:K}=yield(0,m.qq)(ee.read());if(K)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Q)}}finally{ee.releaseLock()}})}function z(O){return(0,M.m)(O?.getReader)}},3532:(le,k,E)=>{E.d(k,{K:()=>M});var m=E(576);function M(F){return F&&(0,m.m)(F.schedule)}},4482:(le,k,E)=>{E.d(k,{A:()=>M,e:()=>F});var m=E(576);function M(z){return(0,m.m)(z?.lift)}function F(z){return O=>{if(M(O))return O.lift(function(W){try{return z(W,this)}catch(ee){this.error(ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(le,k,E)=>{E.d(k,{Z:()=>z});var m=E(4004);const{isArray:M}=Array;function z(O){return(0,m.U)(W=>function F(O,W){return M(W)?O(...W):O(W)}(O,W))}},5032:(le,k,E)=>{function m(){}E.d(k,{Z:()=>m})},9635:(le,k,E)=>{E.d(k,{U:()=>F,z:()=>M});var m=E(4671);function M(...z){return F(z)}function F(z){return 0===z.length?m.y:1===z.length?z[0]:function(W){return z.reduce((ee,Q)=>Q(ee),W)}}},7849:(le,k,E)=>{E.d(k,{h:()=>F});var m=E(2416),M=E(3410);function F(z){M.z.setTimeout(()=>{const{onUnhandledError:O}=m.v;if(!O)throw z;O(z)})}},4532:(le,k,E)=>{function m(M){return new TypeError(`You provided ${null!==M&&"object"==typeof M?"an invalid object":`'${M}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}E.d(k,{z:()=>m})},6922:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.BASE_LAYOUT=void 0,k.BASE_LAYOUT=[[0,1,2,3,4,5,6,7,8],[9,10,11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25,26],[27,28,29,30,31,32,33,34,35],[36,37,38,39,40,41,42,43,44],[45,46,47,48,49,50,51,52,53],[54,55,56,57,58,59,60,61,62],[63,64,65,66,67,68,69,70,71],[72,73,74,75,76,77,78,79,80]]},3738:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.DIFFICULTY_LEVELS=void 0,k.DIFFICULTY_LEVELS=Object.keys({easy:void 0,medium:void 0,hard:void 0,expert:void 0})},2458:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.SEEDS=void 0,k.SEEDS=[{puzzle:"g--d--caf---g----ii-f--hg-bb-iaedhgc--afcg--d-g-b-----f-d--abc---b------c--h-bfia",solution:"gbhdiecafacegbfdhiidfcahgebbfiaedhgcehafcgibddgcbhiafefidegabchhabifcedgceghdbfia",difficulty:"easy"},{puzzle:"bf-hiac-g-gi------a-hf-g---g-a-fi--ddef---i-b--b-a-g-ff---gbh--hac---------e-cfd-",solution:"bfdhiacegegicbdafhachfegdbighabfiecddefgchiabcibdaeghffdeagbhichacidfbgeibgehcfda",difficulty:"easy"},{puzzle:"hgad-e--b-cbf-ge---df-aih-----i-------d-ecai-g---fa----igadf----fe-i-----h-eg-fd-",solution:"hgadceifbicbfhgeadedfbaihcgcahibdgeffbdgecaihgeihfadbcbigadfchedfecihbgaahcegbfdi",difficulty:"easy"},{puzzle:"-fbe-c----e-----a---g-ihb--gb-fhdc-eid-g-eahbch-----f-----ef-ga-g----e-i--hi-----",solution:"afbegcidhheidfbgacdcgaihbefgbafhdcieidfgceahbchebaidfgbidcefhgafgchdaebieahibgfcd",difficulty:"easy"},{puzzle:"c--d-fgeb---g--i-hg-ih--da-a-g-b-cde-edc--a--b--------i-e-cd-ha-fb-h-e-ch--e-----",solution:"cahdifgebedfgabichgbihecdafahgfbicdefedcghabibicadehfgigebcdfhadfbihaegchcaefgbid",difficulty:"easy"},{puzzle:"bi---ec--eg--h-fbdf--------i-hba-dfe----ehbig--bf-d-h--f-e-a-c-----g-e--cde--f--a",solution:"bidgfecahegcahifbdfhadcbgeiichbagdfedafcehbiggebfidahchfgedaicbabihgcedfcdeibfhga",difficulty:"easy"},{puzzle:"-----ef-ha--bf--ecfe-gc---a----gbch--a--df-b--bi----f-h-af-gidbdf----g--i--c--ha-",solution:"bicdaefghahgbfidecfedgchbiaedfagbchicahidfebggbiehcafdhcafegidbdfbhiagceigecbdhaf",difficulty:"easy"},{puzzle:"--fg--hec-ebc-------h-dfgabb--h-a-fg-g-df-i--f-a---b--hf----ad---if----hc-ea---bi",solution:"dafgbihecgebcahdifichedfgabbidhcaefgegcdfbihafhaigebcdhfgbicadeabifedcghcdeahgfbi",difficulty:"easy"},{puzzle:"-----b-f-e-aih----bi----a----e---i---g-bf--a-----cihg-ic-fdhg-a--h---f-cgef-iad-b",solution:"dhcgabefiefaihcbdgbigdefachcaehgdibfhgibfecadfbdacihgeicbfdhgeaadhebgficgefciadhb",difficulty:"easy"},{puzzle:"e--f-b-------eid-f--h----b-ge-c-fadhab-ihgfe-hc--d----d-g---cf---eg--h-bf---i----",solution:"edcfgbihabgaheidcfifhdcaebggeicbfadhabdihgfechcfadebgidigbahcfecaegfdhibfhbeicgad",difficulty:"easy"},{puzzle:"g-hedcf---i-f--a--e--a-----c--i-deh-i-------g--g--e---a----f--c-cf-e-gi-b-------e",solution:"gahedcfbidicfbgaehefbaihcgdcbaigdehfihebfadcgfdghceiabaeighfbdchcfdebgiabgdcaihfe",difficulty:"medium"},{puzzle:"-di--ac---b-cid-h---h--b-d-----f----h-d----fca---c-i--d----i-e-bh---cd-g-g---fac-",solution:"fdighacbeebgcidfhacahfebgdigecifhbadhidabgefcafbdceighdcabgihefbhfeacdigigehdfacb",difficulty:"medium"},{puzzle:"--ac-i------ah-d---e----i---a-e-bc----g--f--ad---gae--ig-fa------hd-e-g-c-d-b----",solution:"hdaceigfbbifahgdcegecbfdiahfaiedbchgehgicfbdadcbhgaeifigefachbdabhdiefgccfdgbhaei",difficulty:"medium"},{puzzle:"fg----i---h--f-e--e-bd--afh-f--hg--ic------b----f-c-----c-------eiac-gdf-b-----e-",solution:"fgaebhicdihdcfaegbecbdgiafhdfebhgcaicahidefbgbigfacdhegdchefbiaheiacbgdfabfgidhec",difficulty:"medium"},{puzzle:"--d-g-fi---e-ci-d-a----eg-----i---f---bg--ec-e--d--haig----f----ha--------ch-g-e-",solution:"cbdaghfiehgefciadbaifbdeghcdahiecbfgifbghaecdecgdfbhaigeicafdbhbhaeidcgffdchbgiea",difficulty:"medium"},{puzzle:"----d-a---a-ie---di------h-d-e--cg-b-b-e--i----c-i--dh--h-gf--c------b-g--i-ce-a-",solution:"ehfcdgabicabiehfgdigdfbachediehacgfbhbgefdicaafcgibedhbehagfdicfcadhibeggdibcehaf",difficulty:"medium"},{puzzle:"---cfa-ibf---i-------g---f--i--h-cd-gdf--------cd--fb-------bc--gb---dhi---he--g-",solution:"dhecfagibfbgeidhaccaigbhefdbiafhecdggdfbaciehhecdgifbaafhidgbceegbacfdhiicdhebagf",difficulty:"medium"},{puzzle:"a------g-b--di-a-f--e--ahi----a------bae--------ichbaei---de------c-igd-d-h----ci",solution:"aidhefcgbbhgdicaeffcebgahidheiabgdfccbaefdihggdfichbaeiacgdefbhefbchigdadghfabeci",difficulty:"medium"},{puzzle:"----g-------ci--bg-i-de-af-------beh-----fgdi---eb-f----ah--ig---hg-d---cd--a----",solution:"hacfgbdieefdciahbggibdehafcagfidcbehbceahfgdidhiebgfcafbahceigdiehgfdcabcdgbaiehf",difficulty:"medium"},{puzzle:"gfbc---dh-a-------d--a--fi--daifc--ech------f-------c-f---e--b---d-----i--igh-d--",solution:"gfbcieadhiahbdfcegdceaghfibbdaifcghechgebdiafeifhagbcdfgcdeihbahbdfcaegiaeighbdfc",difficulty:"medium"},{puzzle:"-e-fh--a-g----ed---a--b-f---ih----dc--------a----g----b---i---dhc-gf-----g------e",solution:"debfhciagghfiaedcbcaidbgfehaihbefgdcfbgcdiehaedchgabifbfaeihcgdhcegfdabiigdacbhfe",difficulty:"hard"},{puzzle:"----i-b---fc--a-h-eb----i-fcieg--ad---hd-e----d--a----f---b-e-i-------b--h--e----",solution:"hageifbcdifcbdagheebdchgiafciegfbadhaghdcefibbdfiahcegfcahbdegideifgchbaghbaeidfc",difficulty:"hard"},{puzzle:"-------hg-----h-d-a-g---ei--ce--dg--dbf---------bfid--hg---f----d--h---c--a-eg---",solution:"bedfiachgficeghbdaahgdbceificehadgfbdbfgceiahgahbfidcehgbcdfaeiediahbfgccfaieghbd",difficulty:"hard"},{puzzle:"h---f------------i--e---a-h-dhe---a---fh-b----i--c---gf-ga-di--a-i---d-bce------a",solution:"hgcifabdedabgehfciifebdcaghbdheigcafgcfhabeideiadcfhbgfbgahdiecahicgedfbcedfbigha",difficulty:"hard"},{puzzle:"f----dha----b------a------dic---h------c--egb-----------a-----ed--f-ec-g-fg------",solution:"febigdhachdcbfageigaiehcbfdicegbhadfahfcdiegbbgdaefichcbadigfhedihfaecbgefghcbdia",difficulty:"hard"},{puzzle:"c-a---i---b--c--ede----g--c-e---dga--c---b--i--gf-----b-----ei------a-cg--ie----a",solution:"cfahdeigbgbhacifedeidbfgahchebcidgafacfgebhdiidgfahcbebacdgfeihfheibadcgdgiehcbfa",difficulty:"hard"},{puzzle:"--a-i---cc-g-------h--e--a--a---ib---d--f--h-----------i---d-f------g-c-dg---b--h",solution:"beagifhdccfghdaibeihdbecfaghafcgibedgdbafechiecidbhagfaihecdgfbfbeihgdcadgcfabeih",difficulty:"hard"},{puzzle:"i--f--ec------a-fbg-b-i---h-d---ihg-----b---fe---a------d-----i---ie-b-------g---",solution:"iahfdbecgdcehgaifbgfbeicdahbdacfihgechgdbeaifeifgahcbdhbdacfgeifgciedbhaaeibhgfdc",difficulty:"hard"},{puzzle:"--e---c------i--g-------d-hbaf--------cfhe--ie------f-h-d-c-----f-h----c---i-ga--",solution:"fdegbhciaacheidfgbibgcfadehbafdgihcedgcfhebaiehibacgfdhidacfebggfahebidccebidgahf",difficulty:"hard"},{puzzle:"--f-d-i---g--b-a-d--c-a-----c-i---e---eh--g---------ac---------b---i-e----gf--d--",solution:"abfcdhigehgiebfacddecgaibhfgcdifahebfaehcbgdiihbdegfacefabgdcihbdhaicefgcigfhedba",difficulty:"hard"},{puzzle:"-ica------------bh----g--f--g---a---i-e----c-a---f------d--bg------c---e-fg----id",solution:"ficabhdeggeaidfcbhdhbegcifabgfceahdiidebhgacfachdfiegbeadfibghchbigcdfaecfghaebid",difficulty:"expert"},{puzzle:"-h-i------i---------f--bh--b---a--ed-ca------i--f---h--------c----he--f-ab--df---",solution:"ehbicdgafdigafhcbecafegbhdibghcaifedfcadheigbiedfbgahchfebiadcggdihecbfaabcgdfeih",difficulty:"expert"},{puzzle:"-h--c-f-ice-------b--ia--------g-h------e---ff--h---i----b---eh----------ga--f--c",solution:"ahgdcefbiceigfbahdbfdiahcgediefgchabgbhaeidcffachbdeigicfbdagehedbchgifahgaeifbdc",difficulty:"expert"},{puzzle:"a----db---g-c----f--e-f--i---------i----h-f-d--g---ch---b--e-c-ca------h-d-------",solution:"afchidbegigdcebhafhbegfadicfehdgcabibcaehifgddigbafcheghbfdeicacafibgedhediachgfb",difficulty:"expert"},{puzzle:"------c--g-b--a---------g-h---e----gb--id-----i-f---eb----i---c-he-f-d--a------h-",solution:"edhbgicfagfbchaeidicadefgbhhafebcidgbegidhacfdicfaghebfgdhiebaccheafbdgiabigcdfhe",difficulty:"expert"},{puzzle:"---bf-i-------hc-aa----------g------h--c-e----i----bh----f---g--f-----e---hig-a--",solution:"chebfaidgfgdeihcbaabidcgefhbeghdifachafcbegiddicgafbheicafedhgbgfbahcdeiedhigbacf",difficulty:"expert"},{puzzle:"--c-----d---g-i--h-i----b--ace------d--bh----b--f---------e---------bea--d--a--c-",solution:"gecabhifdfbagdicehhidefcbgaaceigdhbfdgfbheaicbhifcagdeiagcefdhbcfhdibeagedbhagfci",difficulty:"expert"},{puzzle:"-----d-h--h-----a-gb------i-----a--g----eh-c--i--d-----ge---a--d----f-----ab--i--",solution:"iacefdghbehdgibcafgbfhacedicehfbadigfdgiehbcaaibcdgfehbgedhiafcdciagfhbehfabceigd",difficulty:"expert"},{puzzle:"-bi-------c----e---------af---eba-----a-i-g------c--i----h-e--d-e------gc-b--f---",solution:"fbiaegdhcachdfbegiedgchibafgicebafdhbhafidgcedfegchaibiafhgecbdhedbacifgcgbidfhea",difficulty:"expert"},{puzzle:"---i--h-bc----b----g----a----gd-----e--h-f------b---ac-c------ha-----id--i--gd---",solution:"deficahgbchagfbdeibgiedhacffagdicbheebchafgididhbegfacgcdabiefhafbcheidghiefgdcba",difficulty:"expert"}]},5697:(le,k,E)=>{k.V=void 0;var M=E(3040);Object.defineProperty(k,"V",{enumerable:!0,get:function(){return M.getSudoku}})},3040:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getSudoku=void 0;const m=E(6922),M=E(3738),F=E(964),z=E(1962),O=E(5590),W=E(9229),ee=E(2458),Q=E(1178);k.getSudoku=G=>{if(G&&!Q.validateDifficulty(G))throw new Error(`Invalid difficulty, expected one of: ${M.DIFFICULTY_LEVELS.join(", ")}`);const H=z.getSeed(ee.SEEDS,G),te=F.getLayout(m.BASE_LAYOUT),ye=W.getTokenMap();return{puzzle:O.getSequence(te,H.puzzle,ye),solution:O.getSequence(te,H.solution,ye),difficulty:H.difficulty}}},9079:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.boardToSequence=void 0,k.boardToSequence=m=>m.map(M=>M.join("")).join("")},7848:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getRandomItem=void 0,k.getRandomItem=m=>m[Math.floor(Math.random()*m.length)]},5590:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getSequence=void 0;const m=E(9079),M=E(6175),F=E(6947);k.getSequence=(O,W,ee)=>m.boardToSequence(M.populateLayout(O,F.replaceTokens(W,ee)))},6947:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.replaceTokens=void 0,k.replaceTokens=(m,M)=>m.split("").map(F=>M[F]||F).join("")},637:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.sortRandom=void 0,k.sortRandom=()=>Math.random()<.5?1:-1},6989:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getLayoutBands=void 0,k.getLayoutBands=m=>[[m[0],m[1],m[2]],[m[3],m[4],m[5]],[m[6],m[7],m[8]]]},964:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getLayout=void 0;const m=E(5484),M=E(8294);k.getLayout=z=>M.shuffleLayout(m.rotateLayout(z))},6175:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.populateLayout=void 0,k.populateLayout=(m,M)=>m.map(F=>F.map(z=>M[z]))},8515:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.rotateLayout0=void 0,k.rotateLayout0=m=>m},8178:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.rotateLayout180=void 0,k.rotateLayout180=m=>m.map(M=>[...M].reverse()).reverse()},4140:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.rotateLayout270=void 0,k.rotateLayout270=m=>m[0].map((M,F)=>m.map(z=>[...z].reverse()[F]))},4786:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.rotateLayout90=void 0,k.rotateLayout90=m=>m[0].map((M,F)=>m.map(z=>z[F]).reverse())},5484:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.rotateLayout=void 0;const m=E(7848),M=E(8515),F=E(8178),z=E(4140),O=E(4786);k.rotateLayout=ee=>m.getRandomItem([M.rotateLayout0,O.rotateLayout90,F.rotateLayout180,z.rotateLayout270])(ee)},6326:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.shuffleLayoutBands=void 0;const m=E(6989),M=E(637);k.shuffleLayoutBands=z=>m.getLayoutBands(z).sort(M.sortRandom).flat()},2292:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.shuffleLayoutColumns=void 0;const m=E(4140),M=E(4786),F=E(7967);k.shuffleLayoutColumns=O=>m.rotateLayout270(F.shuffleLayoutRows(M.rotateLayout90(O)))},7967:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.shuffleLayoutRows=void 0;const m=E(6989),M=E(637);k.shuffleLayoutRows=z=>m.getLayoutBands(z).map(O=>O.sort(M.sortRandom)).flat()},8974:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.shuffleLayoutStacks=void 0;const m=E(4140),M=E(4786),F=E(6326);k.shuffleLayoutStacks=O=>m.rotateLayout270(F.shuffleLayoutBands(M.rotateLayout90(O)))},8294:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.shuffleLayout=void 0;const m=E(6326),M=E(2292),F=E(7967),z=E(8974);k.shuffleLayout=W=>M.shuffleLayoutColumns(F.shuffleLayoutRows(z.shuffleLayoutStacks(m.shuffleLayoutBands(W))))},1962:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getSeed=void 0;const m=E(7848),M=E(1691);k.getSeed=(z,O)=>m.getRandomItem(M.getSeedsByDifficulty(z,O))},1691:(le,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getSeedsByDifficulty=void 0,k.getSeedsByDifficulty=(m,M)=>m.filter(F=>!M||F.difficulty===M)},9229:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getTokenMap=void 0;const m=E(637);k.getTokenMap=()=>"abcdefghi".split("").sort(m.sortRandom).reduce((F,z,O)=>({...F,[z]:String(O+1)}),{})},1178:(le,k,E)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.validateDifficulty=void 0;const m=E(3738);k.validateDifficulty=F=>m.DIFFICULTY_LEVELS.includes(F)},655:(le,k,E)=>{function z(pe,ne){var Ae={};for(var _e in pe)Object.prototype.hasOwnProperty.call(pe,_e)&&ne.indexOf(_e)<0&&(Ae[_e]=pe[_e]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(_e=Object.getOwnPropertySymbols(pe);Ze<_e.length;Ze++)ne.indexOf(_e[Ze])<0&&Object.prototype.propertyIsEnumerable.call(pe,_e[Ze])&&(Ae[_e[Ze]]=pe[_e[Ze]])}return Ae}function Q(pe,ne,Ae,_e){return new(Ae||(Ae=Promise))(function(Xe,wt){function rn(dn){try{at(_e.next(dn))}catch(Sn){wt(Sn)}}function Ft(dn){try{at(_e.throw(dn))}catch(Sn){wt(Sn)}}function at(dn){dn.done?Xe(dn.value):function Ze(Xe){return Xe instanceof Ae?Xe:new Ae(function(wt){wt(Xe)})}(dn.value).then(rn,Ft)}at((_e=_e.apply(pe,ne||[])).next())})}function we(pe){return this instanceof we?(this.v=pe,this):new we(pe)}function Ee(pe,ne,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ze,_e=Ae.apply(pe,ne||[]),Xe=[];return Ze={},wt("next"),wt("throw"),wt("return"),Ze[Symbol.asyncIterator]=function(){return this},Ze;function wt(qt){_e[qt]&&(Ze[qt]=function(Qt){return new Promise(function(Ct,sn){Xe.push([qt,Qt,Ct,sn])>1||rn(qt,Qt)})})}function rn(qt,Qt){try{!function Ft(qt){qt.value instanceof we?Promise.resolve(qt.value.v).then(at,dn):Sn(Xe[0][2],qt)}(_e[qt](Qt))}catch(Ct){Sn(Xe[0][3],Ct)}}function at(qt){rn("next",qt)}function dn(qt){rn("throw",qt)}function Sn(qt,Qt){qt(Qt),Xe.shift(),Xe.length&&rn(Xe[0][0],Xe[0][1])}}function ot(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ne=pe[Symbol.asyncIterator];return ne?ne.call(pe):(pe=function te(pe){var ne="function"==typeof Symbol&&Symbol.iterator,Ae=ne&&pe[ne],_e=0;if(Ae)return Ae.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&_e>=pe.length&&(pe=void 0),{value:pe&&pe[_e++],done:!pe}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Ae={},_e("next"),_e("throw"),_e("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function _e(Xe){Ae[Xe]=pe[Xe]&&function(wt){return new Promise(function(rn,Ft){!function Ze(Xe,wt,rn,Ft){Promise.resolve(Ft).then(function(at){Xe({value:at,done:rn})},wt)}(rn,Ft,(wt=pe[Xe](wt)).done,wt.value)})}}}E.d(k,{FC:()=>Ee,KL:()=>ot,_T:()=>z,mG:()=>Q,qq:()=>we})},6895:(le,k,E)=>{E.d(k,{Do:()=>ot,EM:()=>Lo,HT:()=>O,JF:()=>Fo,K0:()=>ee,Mx:()=>Qs,NF:()=>Ns,O5:()=>$n,Ov:()=>gt,S$:()=>we,V_:()=>G,Ye:()=>Pe,b0:()=>We,bD:()=>ss,ez:()=>Cc,q:()=>F,sg:()=>qi,uU:()=>Ui,w_:()=>W});var m=E(4650);let M=null;function F(){return M}function O(I){M||(M=I)}class W{}const ee=new m.OlP("DocumentToken");let Q=(()=>{class I{historyGo(C){throw new Error("Not implemented")}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=m.Yz7({token:I,factory:function(){return function K(){return(0,m.LFG)(H)}()},providedIn:"platform"}),I})();const G=new m.OlP("Location Initialized");let H=(()=>{class I extends Q{constructor(C){super(),this._doc=C,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(C){const V=F().getGlobalEventTarget(this._doc,"window");return V.addEventListener("popstate",C,!1),()=>V.removeEventListener("popstate",C)}onHashChange(C){const V=F().getGlobalEventTarget(this._doc,"window");return V.addEventListener("hashchange",C,!1),()=>V.removeEventListener("hashchange",C)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(C){this.location.pathname=C}pushState(C,V,ce){te()?this._history.pushState(C,V,ce):this.location.hash=ce}replaceState(C,V,ce){te()?this._history.replaceState(C,V,ce):this.location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(C=0){this._history.go(C)}getState(){return this._history.state}}return I.\u0275fac=function(C){return new(C||I)(m.LFG(ee))},I.\u0275prov=m.Yz7({token:I,factory:function(){return function ye(){return new H((0,m.LFG)(ee))}()},providedIn:"platform"}),I})();function te(){return!!window.history.pushState}function ve(I,P){if(0==I.length)return P;if(0==P.length)return I;let C=0;return I.endsWith("/")&&C++,P.startsWith("/")&&C++,2==C?I+P.substring(1):1==C?I+P:I+"/"+P}function me(I){const P=I.match(/#|\?|$/),C=P&&P.index||I.length;return I.slice(0,C-("/"===I[C-1]?1:0))+I.slice(C)}function Ue(I){return I&&"?"!==I[0]?"?"+I:I}let we=(()=>{class I{historyGo(C){throw new Error("Not implemented")}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=m.Yz7({token:I,factory:function(){return(0,m.f3M)(We)},providedIn:"root"}),I})();const Ee=new m.OlP("appBaseHref");let We=(()=>{class I extends we{constructor(C,V){super(),this._platformLocation=C,this._removeListenerFns=[],this._baseHref=V??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}prepareExternalUrl(C){return ve(this._baseHref,C)}path(C=!1){const V=this._platformLocation.pathname+Ue(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&C?`${V}${ce}`:V}pushState(C,V,ce,Me){const Fe=this.prepareExternalUrl(ce+Ue(Me));this._platformLocation.pushState(C,V,Fe)}replaceState(C,V,ce,Me){const Fe=this.prepareExternalUrl(ce+Ue(Me));this._platformLocation.replaceState(C,V,Fe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){this._platformLocation.historyGo?.(C)}}return I.\u0275fac=function(C){return new(C||I)(m.LFG(Q),m.LFG(Ee,8))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),ot=(()=>{class I extends we{constructor(C,V){super(),this._platformLocation=C,this._baseHref="",this._removeListenerFns=[],null!=V&&(this._baseHref=V)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}path(C=!1){let V=this._platformLocation.hash;return null==V&&(V="#"),V.length>0?V.substring(1):V}prepareExternalUrl(C){const V=ve(this._baseHref,C);return V.length>0?"#"+V:V}pushState(C,V,ce,Me){let Fe=this.prepareExternalUrl(ce+Ue(Me));0==Fe.length&&(Fe=this._platformLocation.pathname),this._platformLocation.pushState(C,V,Fe)}replaceState(C,V,ce,Me){let Fe=this.prepareExternalUrl(ce+Ue(Me));0==Fe.length&&(Fe=this._platformLocation.pathname),this._platformLocation.replaceState(C,V,Fe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){this._platformLocation.historyGo?.(C)}}return I.\u0275fac=function(C){return new(C||I)(m.LFG(Q),m.LFG(Ee,8))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac}),I})(),Pe=(()=>{class I{constructor(C){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=C;const V=this._locationStrategy.getBaseHref();this._baseHref=me(nt(V)),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(C=!1){return this.normalize(this._locationStrategy.path(C))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(C,V=""){return this.path()==this.normalize(C+Ue(V))}normalize(C){return I.stripTrailingSlash(function Le(I,P){return I&&P.startsWith(I)?P.substring(I.length):P}(this._baseHref,nt(C)))}prepareExternalUrl(C){return C&&"/"!==C[0]&&(C="/"+C),this._locationStrategy.prepareExternalUrl(C)}go(C,V="",ce=null){this._locationStrategy.pushState(ce,"",C,V),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+Ue(V)),ce)}replaceState(C,V="",ce=null){this._locationStrategy.replaceState(ce,"",C,V),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+Ue(V)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(C=0){this._locationStrategy.historyGo?.(C)}onUrlChange(C){return this._urlChangeListeners.push(C),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(V=>{this._notifyUrlChangeListeners(V.url,V.state)})),()=>{const V=this._urlChangeListeners.indexOf(C);this._urlChangeListeners.splice(V,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(C="",V){this._urlChangeListeners.forEach(ce=>ce(C,V))}subscribe(C,V,ce){return this._subject.subscribe({next:C,error:V,complete:ce})}}return I.normalizeQueryParams=Ue,I.joinWithSlash=ve,I.stripTrailingSlash=me,I.\u0275fac=function(C){return new(C||I)(m.LFG(we))},I.\u0275prov=m.Yz7({token:I,factory:function(){return function Se(){return new Pe((0,m.LFG)(we))}()},providedIn:"root"}),I})();function nt(I){return I.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Format=0]="Format",pe[pe.Standalone=1]="Standalone",pe))(),ne=(()=>((ne=ne||{})[ne.Narrow=0]="Narrow",ne[ne.Abbreviated=1]="Abbreviated",ne[ne.Wide=2]="Wide",ne[ne.Short=3]="Short",ne))(),Ae=(()=>((Ae=Ae||{})[Ae.Short=0]="Short",Ae[Ae.Medium=1]="Medium",Ae[Ae.Long=2]="Long",Ae[Ae.Full=3]="Full",Ae))(),_e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Group=1]="Group",_e[_e.List=2]="List",_e[_e.PercentSign=3]="PercentSign",_e[_e.PlusSign=4]="PlusSign",_e[_e.MinusSign=5]="MinusSign",_e[_e.Exponential=6]="Exponential",_e[_e.SuperscriptingExponent=7]="SuperscriptingExponent",_e[_e.PerMille=8]="PerMille",_e[_e.Infinity=9]="Infinity",_e[_e.NaN=10]="NaN",_e[_e.TimeSeparator=11]="TimeSeparator",_e[_e.CurrencyDecimal=12]="CurrencyDecimal",_e[_e.CurrencyGroup=13]="CurrencyGroup",_e))();function qt(I,P){return rt((0,m.cg1)(I)[m.wAp.DateFormat],P)}function Qt(I,P){return rt((0,m.cg1)(I)[m.wAp.TimeFormat],P)}function Ct(I,P){return rt((0,m.cg1)(I)[m.wAp.DateTimeFormat],P)}function sn(I,P){const C=(0,m.cg1)(I),V=C[m.wAp.NumberSymbols][P];if(typeof V>"u"){if(P===_e.CurrencyDecimal)return C[m.wAp.NumberSymbols][_e.Decimal];if(P===_e.CurrencyGroup)return C[m.wAp.NumberSymbols][_e.Group]}return V}function ir(I){if(!I[m.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${I[m.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function rt(I,P){for(let C=P;C>-1;C--)if(typeof I[C]<"u")return I[C];throw new Error("Locale data API: locale data undefined")}function Pn(I){const[P,C]=I.split(":");return{hours:+P,minutes:+C}}const Yr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Un={},En=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var wn=(()=>((wn=wn||{})[wn.Short=0]="Short",wn[wn.ShortGMT=1]="ShortGMT",wn[wn.Long=2]="Long",wn[wn.Extended=3]="Extended",wn))(),vt=(()=>((vt=vt||{})[vt.FullYear=0]="FullYear",vt[vt.Month=1]="Month",vt[vt.Date=2]="Date",vt[vt.Hours=3]="Hours",vt[vt.Minutes=4]="Minutes",vt[vt.Seconds=5]="Seconds",vt[vt.FractionalSeconds=6]="FractionalSeconds",vt[vt.Day=7]="Day",vt))(),St=(()=>((St=St||{})[St.DayPeriods=0]="DayPeriods",St[St.Days=1]="Days",St[St.Months=2]="Months",St[St.Eras=3]="Eras",St))();function tn(I,P,C,V){let ce=function st(I){if(Jt(I))return I;if("number"==typeof I&&!isNaN(I))return new Date(I);if("string"==typeof I){if(I=I.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(I)){const[ce,Me=1,Fe=1]=I.split("-").map(Et=>+Et);return Jn(ce,Me-1,Fe)}const C=parseFloat(I);if(!isNaN(I-C))return new Date(C);let V;if(V=I.match(Yr))return function Dt(I){const P=new Date(0);let C=0,V=0;const ce=I[8]?P.setUTCFullYear:P.setFullYear,Me=I[8]?P.setUTCHours:P.setHours;I[9]&&(C=Number(I[9]+I[10]),V=Number(I[9]+I[11])),ce.call(P,Number(I[1]),Number(I[2])-1,Number(I[3]));const Fe=Number(I[4]||0)-C,Et=Number(I[5]||0)-V,vn=Number(I[6]||0),Ln=Math.floor(1e3*parseFloat("0."+(I[7]||0)));return Me.call(P,Fe,Et,vn,Ln),P}(V)}const P=new Date(I);if(!Jt(P))throw new Error(`Unable to convert "${I}" into a date`);return P}(I);P=mt(C,P)||P;let Et,Fe=[];for(;P;){if(Et=En.exec(P),!Et){Fe.push(P);break}{Fe=Fe.concat(Et.slice(1));const An=Fe.pop();if(!An)break;P=An}}let vn=ce.getTimezoneOffset();V&&(vn=ge(V,vn),ce=function De(I,P,C){const V=C?-1:1,ce=I.getTimezoneOffset();return function ze(I,P){return(I=new Date(I.getTime())).setMinutes(I.getMinutes()+P),I}(I,V*(ge(P,ce)-ce))}(ce,V,!0));let Ln="";return Fe.forEach(An=>{const _n=function se(I){if(de[I])return de[I];let P;switch(I){case"G":case"GG":case"GGG":P=Xt(St.Eras,ne.Abbreviated);break;case"GGGG":P=Xt(St.Eras,ne.Wide);break;case"GGGGG":P=Xt(St.Eras,ne.Narrow);break;case"y":P=In(vt.FullYear,1,0,!1,!0);break;case"yy":P=In(vt.FullYear,2,0,!0,!0);break;case"yyy":P=In(vt.FullYear,3,0,!1,!0);break;case"yyyy":P=In(vt.FullYear,4,0,!1,!0);break;case"Y":P=Vt(1);break;case"YY":P=Vt(2,!0);break;case"YYY":P=Vt(3);break;case"YYYY":P=Vt(4);break;case"M":case"L":P=In(vt.Month,1,1);break;case"MM":case"LL":P=In(vt.Month,2,1);break;case"MMM":P=Xt(St.Months,ne.Abbreviated);break;case"MMMM":P=Xt(St.Months,ne.Wide);break;case"MMMMM":P=Xt(St.Months,ne.Narrow);break;case"LLL":P=Xt(St.Months,ne.Abbreviated,pe.Standalone);break;case"LLLL":P=Xt(St.Months,ne.Wide,pe.Standalone);break;case"LLLLL":P=Xt(St.Months,ne.Narrow,pe.Standalone);break;case"w":P=kt(1);break;case"ww":P=kt(2);break;case"W":P=kt(1,!0);break;case"d":P=In(vt.Date,1);break;case"dd":P=In(vt.Date,2);break;case"c":case"cc":P=In(vt.Day,1);break;case"ccc":P=Xt(St.Days,ne.Abbreviated,pe.Standalone);break;case"cccc":P=Xt(St.Days,ne.Wide,pe.Standalone);break;case"ccccc":P=Xt(St.Days,ne.Narrow,pe.Standalone);break;case"cccccc":P=Xt(St.Days,ne.Short,pe.Standalone);break;case"E":case"EE":case"EEE":P=Xt(St.Days,ne.Abbreviated);break;case"EEEE":P=Xt(St.Days,ne.Wide);break;case"EEEEE":P=Xt(St.Days,ne.Narrow);break;case"EEEEEE":P=Xt(St.Days,ne.Short);break;case"a":case"aa":case"aaa":P=Xt(St.DayPeriods,ne.Abbreviated);break;case"aaaa":P=Xt(St.DayPeriods,ne.Wide);break;case"aaaaa":P=Xt(St.DayPeriods,ne.Narrow);break;case"b":case"bb":case"bbb":P=Xt(St.DayPeriods,ne.Abbreviated,pe.Standalone,!0);break;case"bbbb":P=Xt(St.DayPeriods,ne.Wide,pe.Standalone,!0);break;case"bbbbb":P=Xt(St.DayPeriods,ne.Narrow,pe.Standalone,!0);break;case"B":case"BB":case"BBB":P=Xt(St.DayPeriods,ne.Abbreviated,pe.Format,!0);break;case"BBBB":P=Xt(St.DayPeriods,ne.Wide,pe.Format,!0);break;case"BBBBB":P=Xt(St.DayPeriods,ne.Narrow,pe.Format,!0);break;case"h":P=In(vt.Hours,1,-12);break;case"hh":P=In(vt.Hours,2,-12);break;case"H":P=In(vt.Hours,1);break;case"HH":P=In(vt.Hours,2);break;case"m":P=In(vt.Minutes,1);break;case"mm":P=In(vt.Minutes,2);break;case"s":P=In(vt.Seconds,1);break;case"ss":P=In(vt.Seconds,2);break;case"S":P=In(vt.FractionalSeconds,1);break;case"SS":P=In(vt.FractionalSeconds,2);break;case"SSS":P=In(vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":P=Gn(wn.Short);break;case"ZZZZZ":P=Gn(wn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":P=Gn(wn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":P=Gn(wn.Long);break;default:return null}return de[I]=P,P}(An);Ln+=_n?_n(ce,C,vn):"''"===An?"'":An.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Ln}function Jn(I,P,C){const V=new Date(0);return V.setFullYear(I,P,C),V.setHours(0,0,0),V}function mt(I,P){const C=function Xe(I){return(0,m.cg1)(I)[m.wAp.LocaleId]}(I);if(Un[C]=Un[C]||{},Un[C][P])return Un[C][P];let V="";switch(P){case"shortDate":V=qt(I,Ae.Short);break;case"mediumDate":V=qt(I,Ae.Medium);break;case"longDate":V=qt(I,Ae.Long);break;case"fullDate":V=qt(I,Ae.Full);break;case"shortTime":V=Qt(I,Ae.Short);break;case"mediumTime":V=Qt(I,Ae.Medium);break;case"longTime":V=Qt(I,Ae.Long);break;case"fullTime":V=Qt(I,Ae.Full);break;case"short":const ce=mt(I,"shortTime"),Me=mt(I,"shortDate");V=er(Ct(I,Ae.Short),[ce,Me]);break;case"medium":const Fe=mt(I,"mediumTime"),Et=mt(I,"mediumDate");V=er(Ct(I,Ae.Medium),[Fe,Et]);break;case"long":const vn=mt(I,"longTime"),Ln=mt(I,"longDate");V=er(Ct(I,Ae.Long),[vn,Ln]);break;case"full":const An=mt(I,"fullTime"),_n=mt(I,"fullDate");V=er(Ct(I,Ae.Full),[An,_n])}return V&&(Un[C][P]=V),V}function er(I,P){return P&&(I=I.replace(/\{([^}]+)}/g,function(C,V){return null!=P&&V in P?P[V]:C})),I}function bt(I,P,C="-",V,ce){let Me="";(I<0||ce&&I<=0)&&(ce?I=1-I:(I=-I,Me=C));let Fe=String(I);for(;Fe.length<P;)Fe="0"+Fe;return V&&(Fe=Fe.slice(Fe.length-P)),Me+Fe}function In(I,P,C=0,V=!1,ce=!1){return function(Me,Fe){let Et=function Rr(I,P){switch(I){case vt.FullYear:return P.getFullYear();case vt.Month:return P.getMonth();case vt.Date:return P.getDate();case vt.Hours:return P.getHours();case vt.Minutes:return P.getMinutes();case vt.Seconds:return P.getSeconds();case vt.FractionalSeconds:return P.getMilliseconds();case vt.Day:return P.getDay();default:throw new Error(`Unknown DateType value "${I}".`)}}(I,Me);if((C>0||Et>-C)&&(Et+=C),I===vt.Hours)0===Et&&-12===C&&(Et=12);else if(I===vt.FractionalSeconds)return function sr(I,P){return bt(I,3).substring(0,P)}(Et,P);const vn=sn(Fe,_e.MinusSign);return bt(Et,P,vn,V,ce)}}function Xt(I,P,C=pe.Format,V=!1){return function(ce,Me){return function bn(I,P,C,V,ce,Me){switch(C){case St.Months:return function Ft(I,P,C){const V=(0,m.cg1)(I),Me=rt([V[m.wAp.MonthsFormat],V[m.wAp.MonthsStandalone]],P);return rt(Me,C)}(P,ce,V)[I.getMonth()];case St.Days:return function rn(I,P,C){const V=(0,m.cg1)(I),Me=rt([V[m.wAp.DaysFormat],V[m.wAp.DaysStandalone]],P);return rt(Me,C)}(P,ce,V)[I.getDay()];case St.DayPeriods:const Fe=I.getHours(),Et=I.getMinutes();if(Me){const Ln=function xn(I){const P=(0,m.cg1)(I);return ir(P),(P[m.wAp.ExtraData][2]||[]).map(V=>"string"==typeof V?Pn(V):[Pn(V[0]),Pn(V[1])])}(P),An=function qr(I,P,C){const V=(0,m.cg1)(I);ir(V);const Me=rt([V[m.wAp.ExtraData][0],V[m.wAp.ExtraData][1]],P)||[];return rt(Me,C)||[]}(P,ce,V),_n=Ln.findIndex(Tr=>{if(Array.isArray(Tr)){const[Mn,fr]=Tr,Es=Fe>=Mn.hours&&Et>=Mn.minutes,Bi=Fe<fr.hours||Fe===fr.hours&&Et<fr.minutes;if(Mn.hours<fr.hours){if(Es&&Bi)return!0}else if(Es||Bi)return!0}else if(Tr.hours===Fe&&Tr.minutes===Et)return!0;return!1});if(-1!==_n)return An[_n]}return function wt(I,P,C){const V=(0,m.cg1)(I),Me=rt([V[m.wAp.DayPeriodsFormat],V[m.wAp.DayPeriodsStandalone]],P);return rt(Me,C)}(P,ce,V)[Fe<12?0:1];case St.Eras:return function at(I,P){return rt((0,m.cg1)(I)[m.wAp.Eras],P)}(P,V)[I.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${C}`)}}(ce,Me,I,P,C,V)}}function Gn(I){return function(P,C,V){const ce=-1*V,Me=sn(C,_e.MinusSign),Fe=ce>0?Math.floor(ce/60):Math.ceil(ce/60);switch(I){case wn.Short:return(ce>=0?"+":"")+bt(Fe,2,Me)+bt(Math.abs(ce%60),2,Me);case wn.ShortGMT:return"GMT"+(ce>=0?"+":"")+bt(Fe,1,Me);case wn.Long:return"GMT"+(ce>=0?"+":"")+bt(Fe,2,Me)+":"+bt(Math.abs(ce%60),2,Me);case wn.Extended:return 0===V?"Z":(ce>=0?"+":"")+bt(Fe,2,Me)+":"+bt(Math.abs(ce%60),2,Me);default:throw new Error(`Unknown zone width "${I}"`)}}}function Nt(I){return Jn(I.getFullYear(),I.getMonth(),I.getDate()+(4-I.getDay()))}function kt(I,P=!1){return function(C,V){let ce;if(P){const Me=new Date(C.getFullYear(),C.getMonth(),1).getDay()-1,Fe=C.getDate();ce=1+Math.floor((Fe+Me)/7)}else{const Me=Nt(C),Fe=function yt(I){const P=Jn(I,0,1).getDay();return Jn(I,0,1+(P<=4?4:11)-P)}(Me.getFullYear()),Et=Me.getTime()-Fe.getTime();ce=1+Math.round(Et/6048e5)}return bt(ce,I,sn(V,_e.MinusSign))}}function Vt(I,P=!1){return function(C,V){return bt(Nt(C).getFullYear(),I,sn(V,_e.MinusSign),P)}}const de={};function ge(I,P){I=I.replace(/:/g,"");const C=Date.parse("Jan 01, 1970 00:00:00 "+I)/6e4;return isNaN(C)?P:C}function Jt(I){return I instanceof Date&&!isNaN(I.valueOf())}function Qs(I,P){P=encodeURIComponent(P);for(const C of I.split(";")){const V=C.indexOf("="),[ce,Me]=-1==V?[C,""]:[C.slice(0,V),C.slice(V+1)];if(ce.trim()===P)return decodeURIComponent(Me)}return null}class li{constructor(P,C,V,ce){this.$implicit=P,this.ngForOf=C,this.index=V,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qi=(()=>{class I{constructor(C,V,ce){this._viewContainer=C,this._template=V,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(C){this._ngForOf=C,this._ngForOfDirty=!0}set ngForTrackBy(C){this._trackByFn=C}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(C){C&&(this._template=C)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const C=this._ngForOf;!this._differ&&C&&(this._differ=this._differs.find(C).create(this.ngForTrackBy))}if(this._differ){const C=this._differ.diff(this._ngForOf);C&&this._applyChanges(C)}}_applyChanges(C){const V=this._viewContainer;C.forEachOperation((ce,Me,Fe)=>{if(null==ce.previousIndex)V.createEmbeddedView(this._template,new li(ce.item,this._ngForOf,-1,-1),null===Fe?void 0:Fe);else if(null==Fe)V.remove(null===Me?void 0:Me);else if(null!==Me){const Et=V.get(Me);V.move(Et,Fe),wi(Et,ce)}});for(let ce=0,Me=V.length;ce<Me;ce++){const Et=V.get(ce).context;Et.index=ce,Et.count=Me,Et.ngForOf=this._ngForOf}C.forEachIdentityChange(ce=>{wi(V.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(C,V){return!0}}return I.\u0275fac=function(C){return new(C||I)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},I.\u0275dir=m.lG2({type:I,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),I})();function wi(I,P){I.context.$implicit=P.item}let $n=(()=>{class I{constructor(C,V){this._viewContainer=C,this._context=new di,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=V}set ngIf(C){this._context.$implicit=this._context.ngIf=C,this._updateView()}set ngIfThen(C){kn("ngIfThen",C),this._thenTemplateRef=C,this._thenViewRef=null,this._updateView()}set ngIfElse(C){kn("ngIfElse",C),this._elseTemplateRef=C,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(C,V){return!0}}return I.\u0275fac=function(C){return new(C||I)(m.Y36(m.s_b),m.Y36(m.Rgc))},I.\u0275dir=m.lG2({type:I,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),I})();class di{constructor(){this.$implicit=null,this.ngIf=null}}function kn(I,P){if(P&&!P.createEmbeddedView)throw new Error(`${I} must be a TemplateRef, but received '${(0,m.AaK)(P)}'.`)}function $(I,P){return new m.vHH(2100,!1)}class q{createSubscription(P,C){return P.subscribe({next:C,error:V=>{throw V}})}dispose(P){P.unsubscribe()}}class he{createSubscription(P,C){return P.then(C,V=>{throw V})}dispose(P){}}const Re=new he,$e=new q;let gt=(()=>{class I{constructor(C){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=C}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(C){return this._obj?C!==this._obj?(this._dispose(),this.transform(C)):this._latestValue:(C&&this._subscribe(C),this._latestValue)}_subscribe(C){this._obj=C,this._strategy=this._selectStrategy(C),this._subscription=this._strategy.createSubscription(C,V=>this._updateLatestValue(C,V))}_selectStrategy(C){if((0,m.QGY)(C))return Re;if((0,m.F4k)(C))return $e;throw $()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(C,V){C===this._obj&&(this._latestValue=V,this._ref.markForCheck())}}return I.\u0275fac=function(C){return new(C||I)(m.Y36(m.sBO,16))},I.\u0275pipe=m.Yjl({name:"async",type:I,pure:!1,standalone:!0}),I})();const nr=new m.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ui=(()=>{class I{constructor(C,V){this.locale=C,this.defaultTimezone=V}transform(C,V="mediumDate",ce,Me){if(null==C||""===C||C!=C)return null;try{return tn(C,V,Me||this.locale,ce??this.defaultTimezone??void 0)}catch(Fe){throw $()}}}return I.\u0275fac=function(C){return new(C||I)(m.Y36(m.soG,16),m.Y36(nr,24))},I.\u0275pipe=m.Yjl({name:"date",type:I,pure:!0,standalone:!0}),I})(),Cc=(()=>{class I{}return I.\u0275fac=function(C){return new(C||I)},I.\u0275mod=m.oAB({type:I}),I.\u0275inj=m.cJS({}),I})();const ss="browser";function Ns(I){return I===ss}let Lo=(()=>{class I{}return I.\u0275prov=(0,m.Yz7)({token:I,providedIn:"root",factory:()=>new Sc((0,m.LFG)(ee),window)}),I})();class Sc{constructor(P,C){this.document=P,this.window=C,this.offset=()=>[0,0]}setOffset(P){this.offset=Array.isArray(P)?()=>P:P}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(P){this.supportsScrolling()&&this.window.scrollTo(P[0],P[1])}scrollToAnchor(P){if(!this.supportsScrolling())return;const C=function $r(I,P){const C=I.getElementById(P)||I.getElementsByName(P)[0];if(C)return C;if("function"==typeof I.createTreeWalker&&I.body&&(I.body.createShadowRoot||I.body.attachShadow)){const V=I.createTreeWalker(I.body,NodeFilter.SHOW_ELEMENT);let ce=V.currentNode;for(;ce;){const Me=ce.shadowRoot;if(Me){const Fe=Me.getElementById(P)||Me.querySelector(`[name="${P}"]`);if(Fe)return Fe}ce=V.nextNode()}}return null}(this.document,P);C&&(this.scrollToElement(C),C.focus())}setHistoryScrollRestoration(P){if(this.supportScrollRestoration()){const C=this.window.history;C&&C.scrollRestoration&&(C.scrollRestoration=P)}}scrollToElement(P){const C=P.getBoundingClientRect(),V=C.left+this.window.pageXOffset,ce=C.top+this.window.pageYOffset,Me=this.offset();this.window.scrollTo(V-Me[0],ce-Me[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const P=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!P||!P.writable&&!P.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(I){return Object.getOwnPropertyDescriptor(I,"scrollRestoration")}class Fo{}},4650:(le,k,E)=>{E.d(k,{$8M:()=>Hu,$Z:()=>im,AFp:()=>v0,ALo:()=>Sl,AaK:()=>Q,AsE:()=>$m,BQk:()=>xo,CHM:()=>Ls,CRH:()=>Sy,CZH:()=>uh,CqO:()=>$v,D6c:()=>ET,EJc:()=>kw,EpF:()=>xe,F4k:()=>co,FYo:()=>U_,FiY:()=>Lt,G48:()=>e_,GfV:()=>hg,JOm:()=>Zo,KtG:()=>Js,LFG:()=>L,LSH:()=>x_,Lbi:()=>jy,Lck:()=>LE,MAs:()=>Cd,MMx:()=>Kd,NdJ:()=>ac,O4$:()=>Et,OlP:()=>Hn,Oqu:()=>Vf,PXZ:()=>x0,PiD:()=>ri,Q6J:()=>Nm,QGY:()=>dl,QP$:()=>Jt,Qsj:()=>OI,R0b:()=>vi,RDi:()=>sI,Rgc:()=>eh,SBq:()=>Gc,Sil:()=>Uw,Suo:()=>e0,TTD:()=>po,TgZ:()=>Sd,W1O:()=>up,X6Q:()=>Hw,XFs:()=>rt,Xpm:()=>He,Xts:()=>R_,Y36:()=>Qu,YKP:()=>gy,YNc:()=>fu,Yjl:()=>ze,Yz7:()=>Qt,Z0I:()=>yr,ZZ4:()=>Ul,_UZ:()=>Ad,_Vd:()=>Xl,_c5:()=>ns,_uU:()=>jm,aQg:()=>Bp,c2e:()=>Nl,cJS:()=>sn,cg1:()=>Iu,dDg:()=>Yy,dqk:()=>tn,eFA:()=>Tp,ekj:()=>Nd,eoX:()=>C0,f3M:()=>Ie,g9A:()=>E0,h0i:()=>Cl,hGG:()=>ua,iGM:()=>JE,ifc:()=>St,ip1:()=>oa,jDz:()=>La,kL8:()=>ey,lG2:()=>ge,lcZ:()=>Iy,lqb:()=>jc,lri:()=>Dp,n5z:()=>$u,oAB:()=>Vt,oxw:()=>Gv,q4F:()=>kh,qLn:()=>Aa,qZA:()=>es,rWj:()=>wp,sBO:()=>F0,sIi:()=>ta,s_b:()=>ip,soG:()=>Ep,tBr:()=>on,tb:()=>lh,tp0:()=>Jr,uIk:()=>Rm,vHH:()=>me,vpe:()=>fs,wAp:()=>Gt,xi3:()=>Dy,xp6:()=>cv,ynx:()=>Md,z2F:()=>Mp,zSh:()=>N_,zs3:()=>au});var m=E(7579),M=E(727),F=E(9751),z=E(6451),O=E(3099);function W(r){for(let s in r)if(r[s]===W)return s;throw Error("Could not find renamed property on target object.")}function Q(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Q).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function K(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const G=W({__forward_ref__:W});function H(r){return r.__forward_ref__=H,r.toString=function(){return Q(this())},r}function te(r){return ye(r)?r():r}function ye(r){return"function"==typeof r&&r.hasOwnProperty(G)&&r.__forward_ref__===H}class me extends Error{constructor(s,o){super(function Ue(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function we(r){return"string"==typeof r?r:null==r?"":String(r)}function Se(r,s){throw new me(-201,!1)}function Ft(r,s){null==r&&function at(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function Qt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function sn(r){return{providers:r.providers||[],imports:r.imports||[]}}function Br(r){return hn(r,ir)||hn(r,qr)}function yr(r){return null!==Br(r)}function hn(r,s){return r.hasOwnProperty(s)?r[s]:null}function xr(r){return r&&(r.hasOwnProperty(xn)||r.hasOwnProperty(gn))?r[xn]:null}const ir=W({\u0275prov:W}),xn=W({\u0275inj:W}),qr=W({ngInjectableDef:W}),gn=W({ngInjectorDef:W});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let Pn;function qn(r){const s=Pn;return Pn=r,s}function dr(r,s,o){const u=Br(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&rt.Optional?null:void 0!==s?s:void Se(Q(r))}function Un(r){return{toString:r}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),St=(()=>{return(r=St||(St={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",St;var r})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),er={},bt=[],sr=W({\u0275cmp:W}),In=W({\u0275dir:W}),Rr=W({\u0275pipe:W}),Xt=W({\u0275mod:W}),bn=W({\u0275fac:W}),Gn=W({__NG_ELEMENT_ID__:W});let lt=0;function He(r){return Un(()=>{const o=!0===r.standalone,u={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||bt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||St.Emulated,id:"c"+lt++,styles:r.styles||bt,_:null,setInput:null,schemas:r.schemas||null,tView:null},d=r.dependencies,f=r.features;return l.inputs=se(r.inputs,u),l.outputs=se(r.outputs),f&&f.forEach(v=>v(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(Nt).filter(kt):null,l.pipeDefs=d?()=>("function"==typeof d?d():d).map(Dt).filter(kt):null,l})}function Nt(r){return De(r)||st(r)}function kt(r){return null!==r}function Vt(r){return Un(()=>({type:r.type,bootstrap:r.bootstrap||bt,declarations:r.declarations||bt,imports:r.imports||bt,exports:r.exports||bt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function se(r,s){if(null==r)return er;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const ge=He;function ze(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function De(r){return r[sr]||null}function st(r){return r[In]||null}function Dt(r){return r[Rr]||null}function Jt(r){const s=De(r)||st(r)||Dt(r);return null!==s&&s.standalone}function Tn(r,s){const o=r[Xt]||null;if(!o&&!0===s)throw new Error(`Type ${Q(r)} does not have '\u0275mod' property.`);return o}function kn(r){return Array.isArray(r)&&"object"==typeof r[1]}function jr(r){return Array.isArray(r)&&!0===r[1]}function Yi(r){return 0!=(8&r.flags)}function vr(r){return 2==(2&r.flags)}function Zi(r){return 1==(1&r.flags)}function Er(r){return null!==r.template}function gs(r){return 0!=(256&r[2])}function is(r,s){return r.hasOwnProperty(bn)?r[bn]:null}class Xs{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function po(){return ca}function ca(r){return r.type.prototype.ngOnChanges&&(r.setInput=la),ti}function ti(){const r=ja(this),s=r?.current;if(s){const o=r.previous;if(o===er)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function la(r,s,o,u){const l=ja(r)||function Cc(r,s){return r[go]=s}(r,{previous:er,current:null}),d=l.current||(l.current={}),f=l.previous,v=this.declaredInputs[o],D=f[v];d[v]=new Xs(D&&D.currentValue,s,f===er),r[u]=s}po.ngInherit=!0;const go="__ngSimpleChanges__";function ja(r){return r[go]||null}function On(r){for(;Array.isArray(r);)r=r[0];return r}function Si(r,s){return On(s[r])}function $r(r,s){return On(s[r.index])}function Fo(r,s){return r.data[s]}function ms(r,s){return r[s]}function Cn(r,s){const o=s[r];return kn(o)?o:o[0]}function ys(r){return 64==(64&r[2])}function ar(r,s){return null==s?null:r[s]}function Bo(r){r[18]=0}function Zn(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Ht={lFrame:Do(null),bindingsEnabled:!0};function Ai(){return Ht.bindingsEnabled}function Qe(){return Ht.lFrame.lView}function fn(){return Ht.lFrame.tView}function Ls(r){return Ht.lFrame.contextLView=r,r[8]}function Js(r){return Ht.lFrame.contextLView=null,r}function hr(){let r=Fs();for(;null!==r&&64===r.type;)r=r.parent;return r}function Fs(){return Ht.lFrame.currentTNode}function ni(r,s){const o=Ht.lFrame;o.currentTNode=r,o.isParent=s}function za(){return Ht.lFrame.isParent}function Eo(){Ht.lFrame.isParent=!1}function br(){const r=Ht.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function Bs(){return Ht.lFrame.bindingIndex++}function vs(r){const s=Ht.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}function jl(r,s){const o=Ht.lFrame;o.bindingIndex=o.bindingRootIndex=r,Vs(s)}function Vs(r){Ht.lFrame.currentDirectiveIndex=r}function js(){return Ht.lFrame.currentQueryIndex}function ya(r){Ht.lFrame.currentQueryIndex=r}function $s(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function Vo(r,s,o){if(o&rt.SkipSelf){let l=s,d=r;for(;!(l=l.parent,null!==l||o&rt.Host||(l=$s(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,r=d}const u=Ht.lFrame=xc();return u.currentTNode=s,u.lView=r,!0}function eo(r){const s=xc(),o=r[1];Ht.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function xc(){const r=Ht.lFrame,s=null===r?null:r.child;return null===s?Do(r):s}function Do(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Ru(){const r=Ht.lFrame;return Ht.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const I=Ru;function P(){const r=Ru();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ce(){return Ht.lFrame.selectedIndex}function Me(r){Ht.lFrame.selectedIndex=r}function Fe(){const r=Ht.lFrame;return Fo(r.tView,r.selectedIndex)}function Et(){Ht.lFrame.currentNamespace="svg"}function Mn(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:f,ngAfterContentChecked:v,ngAfterViewInit:D,ngAfterViewChecked:R,ngOnDestroy:B}=d;f&&(r.contentHooks||(r.contentHooks=[])).push(-o,f),v&&((r.contentHooks||(r.contentHooks=[])).push(o,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,v)),D&&(r.viewHooks||(r.viewHooks=[])).push(-o,D),R&&((r.viewHooks||(r.viewHooks=[])).push(o,R),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,R)),null!=B&&(r.destroyHooks||(r.destroyHooks=[])).push(o,B)}}function fr(r,s,o){Vi(r,s,3,o)}function Es(r,s,o,u){(3&r[2])===o&&Vi(r,s,o,u)}function Bi(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function Vi(r,s,o,u){const d=u??-1,f=s.length-1;let v=0;for(let D=void 0!==u?65535&r[18]:0;D<f;D++)if("number"==typeof s[D+1]){if(v=s[D],null!=u&&v>=u)break}else s[D]<0&&(r[18]+=65536),(v<d||-1==d)&&(Gs(r,o,s,D),r[18]=(4294901760&r[18])+D+2),D++}function Gs(r,s,o,u){const l=o[u]<0,d=o[u+1],v=r[l?-o[u]:o[u]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{d.call(v)}finally{}}}else try{d.call(v)}finally{}}class to{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Ya(r,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const d=o[u++],f=o[u++],v=o[u++];r.setAttribute(s,f,v,d)}else{const d=l,f=o[++u];Za(d)?r.setProperty(s,d,f):r.setAttribute(s,d,f),u++}}return u}function jo(r){return 3===r||4===r||6===r}function Za(r){return 64===r.charCodeAt(0)}function Ou(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Pu(r,o,l,null,-1===o||2===o?s[++u]:null)}}return r}function Pu(r,s,o,u,l){let d=0,f=r.length;if(-1===s)f=-1;else for(;d<r.length;){const v=r[d++];if("number"==typeof v){if(v===s){f=-1;break}if(v>s){f=d-1;break}}}for(;d<r.length;){const v=r[d];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(r[d+1]=l));if(u===r[d+1])return void(r[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==f&&(r.splice(f,0,s),d=f+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==l&&r.splice(d++,0,l)}function Oc(r){return-1!==r}function kr(r){return 32767&r}function $o(r,s){let o=function zl(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let Wl=!0;function _a(r){const s=Wl;return Wl=r,s}let Lu=0;const hi={};function Qn(r,s){const o=Qa(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,Uu(u.data,r),Uu(s,null),Uu(u.blueprint,null));const l=Go(r,s),d=r.injectorIndex;if(Oc(l)){const f=kr(l),v=$o(l,s),D=v[1].data;for(let R=0;R<8;R++)s[d+R]=v[f+R]|D[f+R]}return s[d+8]=l,d}function Uu(r,s){r.push(0,0,0,0,0,0,0,0,s)}function Qa(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Go(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=va(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function no(r,s,o){!function Fu(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Gn)&&(u=o[Gn]),null==u&&(u=o[Gn]=Lu++);const l=255&u;s.data[r+(l>>5)]|=1<<l}(r,s,o)}function Bu(r,s,o){if(o&rt.Optional||void 0!==r)return r;Se()}function Vu(r,s,o,u){if(o&rt.Optional&&void 0===u&&(u=null),0==(o&(rt.Self|rt.Host))){const l=r[9],d=qn(void 0);try{return l?l.get(s,u,o&rt.Optional):dr(s,u,o&rt.Optional)}finally{qn(d)}}return Bu(u,0,o)}function Xa(r,s,o,u=rt.Default,l){if(null!==r){if(1024&s[2]){const f=function wh(r,s,o,u,l){let d=r,f=s;for(;null!==d&&null!==f&&1024&f[2]&&!(256&f[2]);){const v=Ho(d,f,o,u|rt.Self,hi);if(v!==hi)return v;let D=d.parent;if(!D){const R=f[21];if(R){const B=R.get(o,hi,u);if(B!==hi)return B}D=va(f),f=f[15]}d=D}return l}(r,s,o,u,hi);if(f!==hi)return f}const d=Ho(r,s,o,u,hi);if(d!==hi)return d}return Vu(s,o,u,l)}function Ho(r,s,o,u,l){const d=function Ja(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Gn)?r[Gn]:void 0;return"number"==typeof s?s>=0?255&s:Pc:s}(o);if("function"==typeof d){if(!Vo(s,r,u))return u&rt.Host?Bu(l,0,u):Vu(s,o,u,l);try{const f=d(u);if(null!=f||u&rt.Optional)return f;Se()}finally{I()}}else if("number"==typeof d){let f=null,v=Qa(r,s),D=-1,R=u&rt.Host?s[16][6]:null;for((-1===v||u&rt.SkipSelf)&&(D=-1===v?Go(r,s):s[v+8],-1!==D&&ju(u,!1)?(f=s[1],v=kr(D),s=$o(D,s)):v=-1);-1!==v;){const B=s[1];if(zo(d,v,B.data)){const Y=Ir(v,s,o,f,u,R);if(Y!==hi)return Y}D=s[v+8],-1!==D&&ju(u,s[1].data[v+8]===R)&&zo(d,v,s)?(f=B,v=kr(D),s=$o(D,s)):v=-1}}return l}function Ir(r,s,o,u,l,d){const f=s[1],v=f.data[r+8],B=wo(v,f,o,null==u?vr(v)&&Wl:u!=f&&0!=(3&v.type),l&rt.Host&&d===v);return null!==B?Is(s,f,B,v):hi}function wo(r,s,o,u,l){const d=r.providerIndexes,f=s.data,v=1048575&d,D=r.directiveStart,B=d>>20,fe=l?v+B:r.directiveEnd;for(let Ce=u?v:v+B;Ce<fe;Ce++){const Ge=f[Ce];if(Ce<D&&o===Ge||Ce>=D&&Ge.type===o)return Ce}if(l){const Ce=f[D];if(Ce&&Er(Ce)&&Ce.type===o)return D}return null}function Is(r,s,o,u){let l=r[o];const d=s.data;if(function Ka(r){return r instanceof to}(l)){const f=l;f.resolving&&function We(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new me(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Ee(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():we(r)}(d[o]));const v=_a(f.canSeeViewProviders);f.resolving=!0;const D=f.injectImpl?qn(f.injectImpl):null;Vo(r,u,rt.Default);try{l=r[o]=f.factory(void 0,d,r,u),s.firstCreatePass&&o>=u.directiveStart&&function Tr(r,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const f=ca(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,f)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],s)}finally{null!==D&&qn(D),_a(v),f.resolving=!1,I()}}return l}function zo(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function ju(r,s){return!(r&rt.Self||r&rt.Host&&s)}class Hs{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Xa(this._tNode,this._lView,s,u,o)}}function Pc(){return new Hs(hr(),Qe())}function $u(r){return Un(()=>{const s=r.prototype.constructor,o=s[bn]||Gu(s),u=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==u;){const d=l[bn]||Gu(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function Gu(r){return ye(r)?()=>{const s=Gu(te(r));return s&&s()}:is(r)}function va(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}function Hu(r){return function Dh(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(jo(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(hr(),r)}const Wo="__parameters__";function Ko(r,s,o){return Un(()=>{const u=function io(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const f=new l(...d);return v.annotation=f,v;function v(D,R,B){const Y=D.hasOwnProperty(Wo)?D[Wo]:Object.defineProperty(D,Wo,{value:[]})[Wo];for(;Y.length<=B;)Y.push(null);return(Y[B]=Y[B]||[]).push(f),D}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class Hn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Qt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fi(r,s){void 0===s&&(s=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(s===r&&(s=r.slice(0,o)),fi(u,s)):s!==r&&s.push(u)}return s}function so(r,s){r.forEach(o=>Array.isArray(o)?so(o,s):s(o))}function Ia(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function nu(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function J(r,s,o){let u=Ne(r,s);return u>=0?r[1|u]=o:(u=~u,function p(r,s,o,u){let l=r.length;if(l==s)r.push(o,u);else if(1===l)r.push(u,r[0]),r[0]=o;else{for(l--,r.push(r[l-1],r[l]);l>s;)r[l]=r[l-2],l--;r[s]=o,r[s+1]=u}}(r,u,s,o)),u}function ae(r,s){const o=Ne(r,s);if(o>=0)return r[1|o]}function Ne(r,s){return function cn(r,s,o){let u=0,l=r.length>>o;for(;l!==u;){const d=u+(l-u>>1),f=r[d<<o];if(s===f)return d<<o;f>s?l=d:u=d+1}return~(l<<o)}(r,s,1)}const wa={},zs="__NG_DI_FLAG__",ql="ngTempTokenPath",qp=/\n/gm,Fc="__source";let ba;function b(r){const s=ba;return ba=r,s}function A(r,s=rt.Default){if(void 0===ba)throw new me(-203,!1);return null===ba?dr(r,void 0,s):ba.get(r,s&rt.Optional?null:void 0,s)}function L(r,s=rt.Default){return(function Ii(){return Pn}()||A)(te(r),s)}function Ie(r,s=rt.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),L(r,s)}function Oe(r){const s=[];for(let o=0;o<r.length;o++){const u=te(r[o]);if(Array.isArray(u)){if(0===u.length)throw new me(900,!1);let l,d=rt.Default;for(let f=0;f<u.length;f++){const v=u[f],D=ht(v);"number"==typeof D?-1===D?l=v.token:d|=D:l=v}s.push(L(l,d))}else s.push(L(u))}return s}function Je(r,s){return r[zs]=s,r.prototype[zs]=s,r}function ht(r){return r[zs]}const on=Je(Ko("Inject",r=>({token:r})),-1),Lt=Je(Ko("Optional"),8),ri=Je(Ko("Self"),2),Jr=Je(Ko("SkipSelf"),4);let Jp;function sI(r){Jp=r}class D_{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Zu(r){return r instanceof D_?r.changingThisBreaksApplicationSecurity:r}const T_=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var pi=(()=>((pi=pi||{})[pi.NONE=0]="NONE",pi[pi.HTML=1]="HTML",pi[pi.STYLE=2]="STYLE",pi[pi.SCRIPT=3]="SCRIPT",pi[pi.URL=4]="URL",pi[pi.RESOURCE_URL=5]="RESOURCE_URL",pi))();function x_(r){const s=function Oh(){const r=Qe();return r&&r[12]}();return s?s.sanitize(pi.URL,r)||"":function Zl(r,s){const o=function pb(r){return r instanceof D_&&r.getTypeName()||null}(r);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}(r,"URL")?Zu(r):function sg(r){return(r=String(r)).match(T_)?r:"unsafe:"+r}(we(r))}const R_=new Hn("ENVIRONMENT_INITIALIZER"),EI=new Hn("INJECTOR",-1),II=new Hn("INJECTOR_DEF_TYPES");class DI{get(s,o=wa){if(o===wa){const u=new Error(`NullInjectorError: No provider for ${Q(s)}!`);throw u.name="NullInjectorError",u}return o}}function Ob(...r){return{\u0275providers:wI(0,r)}}function wI(r,...s){const o=[],u=new Set;let l;return so(s,d=>{const f=d;O_(f,o,[],u)&&(l||(l=[]),l.push(f))}),void 0!==l&&bI(l,o),o}function bI(r,s){for(let o=0;o<r.length;o++){const{providers:l}=r[o];so(l,d=>{s.push(d)})}}function O_(r,s,o,u){if(!(r=te(r)))return!1;let l=null,d=xr(r);const f=!d&&De(r);if(d||f){if(f&&!f.standalone)return!1;l=r}else{const D=r.ngModule;if(d=xr(D),!d)return!1;l=D}const v=u.has(l);if(f){if(v)return!1;if(u.add(l),f.dependencies){const D="function"==typeof f.dependencies?f.dependencies():f.dependencies;for(const R of D)O_(R,s,o,u)}}else{if(!d)return!1;{if(null!=d.imports&&!v){let R;u.add(l);try{so(d.imports,B=>{O_(B,s,o,u)&&(R||(R=[]),R.push(B))})}finally{}void 0!==R&&bI(R,s)}if(!v){const R=is(l)||(()=>new l);s.push({provide:l,useFactory:R,deps:bt},{provide:II,useValue:l,multi:!0},{provide:R_,useValue:()=>L(l),multi:!0})}const D=d.providers;null==D||v||so(D,B=>{s.push(B)})}}return l!==r&&void 0!==r.providers}const Pb=W({provide:String,useValue:W});function P_(r){return null!==r&&"object"==typeof r&&Pb in r}function Vc(r){return"function"==typeof r}const N_=new Hn("Set Injector scope."),ug={},kb={};let k_;function cg(){return void 0===k_&&(k_=new DI),k_}class jc{}class SI extends jc{constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ph(s,f=>this.processProvider(f)),this.records.set(EI,Ql(void 0,this)),l.has("environment")&&this.records.set(jc,Ql(void 0,this));const d=this.records.get(N_);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(II.multi,bt,rt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=b(this),u=qn(void 0);try{return s()}finally{b(o),qn(u)}}get(s,o=wa,u=rt.Default){this.assertNotDestroyed();const l=b(this),d=qn(void 0);try{if(!(u&rt.SkipSelf)){let v=this.records.get(s);if(void 0===v){const D=function Vb(r){return"function"==typeof r||"object"==typeof r&&r instanceof Hn}(s)&&Br(s);v=D&&this.injectableDefInScope(D)?Ql(L_(s),ug):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&rt.Self?cg():this.parent).get(s,o=u&rt.Optional&&o===wa?null:o)}catch(f){if("NullInjectorError"===f.name){if((f[ql]=f[ql]||[]).unshift(Q(s)),l)throw f;return function jt(r,s,o,u){const l=r[ql];throw s[Fc]&&l.unshift(s[Fc]),r.message=function ln(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=Q(s);if(Array.isArray(s))l=s.map(Q).join(" -> ");else if("object"==typeof s){let d=[];for(let f in s)if(s.hasOwnProperty(f)){let v=s[f];d.push(f+":"+("string"==typeof v?JSON.stringify(v):Q(v)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(qp,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[ql]=null,r}(f,s,"R3InjectorError",this.source)}throw f}finally{qn(d),b(l)}}resolveInjectorInitializers(){const s=b(this),o=qn(void 0);try{const u=this.get(R_.multi,bt,rt.Self);for(const l of u)l()}finally{b(s),qn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(Q(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(s){let o=Vc(s=te(s))?s:te(s&&s.provide);const u=function Fb(r){return P_(r)?Ql(void 0,r.useValue):Ql(function AI(r,s,o){let u;if(Vc(r)){const l=te(r);return is(l)||L_(l)}if(P_(r))u=()=>te(r.useValue);else if(function CI(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Oe(r.deps||[]));else if(function TI(r){return!(!r||!r.useExisting)}(r))u=()=>L(te(r.useExisting));else{const l=te(r&&(r.useClass||r.provide));if(!function Ub(r){return!!r.deps}(r))return is(l)||L_(l);u=()=>new l(...Oe(r.deps))}return u}(r),ug)}(s);if(Vc(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Ql(void 0,ug,!0),l.factory=()=>Oe(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===ug&&(o.value=kb,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Bb(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=te(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function L_(r){const s=Br(r),o=null!==s?s.factory:is(r);if(null!==o)return o;if(r instanceof Hn)throw new me(204,!1);if(r instanceof Function)return function Lb(r){const s=r.length;if(s>0)throw function qo(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new me(204,!1);const o=function pn(r){const s=r&&(r[ir]||r[qr]);if(s){const o=function rr(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new me(204,!1)}function Ql(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function jb(r){return!!r.\u0275providers}function Ph(r,s){for(const o of r)Array.isArray(o)?Ph(o,s):jb(o)?Ph(o.\u0275providers,s):s(o)}class F_{}class dg{resolveComponentFactory(s){throw function Oi(r){const s=Error(`No component factory found for ${Q(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Xl=(()=>{class r{}return r.NULL=new dg,r})();function xI(){return $c(hr(),Qe())}function $c(r,s){return new Gc($r(r,s))}let Gc=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=xI,r})();function RI(r){return r instanceof Gc?r.nativeElement:r}class U_{}let OI=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function cs(){const r=Qe(),o=Cn(hr().index,r);return(kn(o)?o:r)[11]}(),r})(),Nh=(()=>{class r{}return r.\u0275prov=Qt({token:r,providedIn:"root",factory:()=>null}),r})();class hg{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const kh=new hg("14.2.6"),Hc={};function Bh(r){return r.ngOriginalError}class Aa{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Bh(s);for(;o&&Bh(o);)o=Bh(o);return o||null}}const Tg=new Map;let FI=0;const su="__ngContext__";function $i(r,s){kn(s)?(r[su]=s[20],function Vh(r){Tg.set(r[20],r)}(s)):r[su]=s}function Ma(r){return r instanceof Function?r():r}var Zo=(()=>((Zo=Zo||{})[Zo.Important=1]="Important",Zo[Zo.DashCase=2]="DashCase",Zo))();function J_(r,s){return undefined(r,s)}function Wc(r){const s=r[3];return jr(s)?s[3]:s}function ed(r){return YI(r[13])}function Gh(r){return YI(r[4])}function YI(r){for(;null!==r&&!jr(r);)r=r[4];return r}function td(r,s,o,u,l){if(null!=u){let d,f=!1;jr(u)?d=u:kn(u)&&(f=!0,u=u[0]);const v=On(u);0===r&&null!==o?null==l?Kc(s,o,v):Qo(s,o,v,l||null,!0):1===r&&null!==o?Qo(s,o,v,l||null,!0):2===r?function Hi(r,s,o){const u=Hh(r,s);u&&function Lg(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,v,f):3===r&&s.destroyNode(v),null!=d&&function Yh(r,s,o,u,l){const d=o[7];d!==On(o)&&td(s,r,u,d,l);for(let v=10;v<o.length;v++){const D=o[v];ou(D[1],D,r,s,u,d)}}(s,r,d,o,l)}}function Ng(r,s,o){return r.createElement(s,o)}function JI(r,s){const o=r[9],u=o.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,Zn(l,-1)),o.splice(u,1)}function nv(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const l=u[17];null!==l&&l!==r&&JI(l,u),s>0&&(r[o-1][4]=u[4]);const d=nu(r,10+s);!function Wb(r,s){ou(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const f=d[19];null!==f&&f.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function rv(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&ou(r,s,o,3,null,null),function qb(r){let s=r[13];if(!s)return bo(r[1],r);for(;s;){let o=null;if(kn(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)kn(s)&&bo(s[1],s),s=s[3];null===s&&(s=r),kn(s)&&bo(s[1],s),o=s&&s[4]}s=o}}(s)}}function bo(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function kg(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof to)){const d=o[u+1];if(Array.isArray(d))for(let f=0;f<d.length;f+=2){const v=l[d[f]],D=d[f+1];try{D.call(v)}finally{}}else try{d.call(l)}finally{}}}}(r,s),function Ot(r,s){const o=r.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const f=o[d+1],v="function"==typeof f?f(s):On(s[f]),D=u[l=o[d+2]],R=o[d+3];"boolean"==typeof R?v.removeEventListener(o[d],D,R):R>=0?u[l=R]():u[l=-R].unsubscribe(),d+=2}else{const f=u[l=o[d+1]];o[d].call(f)}if(null!==u){for(let d=l+1;d<u.length;d++)(0,u[d])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&jr(s[3])){o!==s[3]&&JI(o,s);const u=s[19];null!==u&&u.detachView(r)}!function Cg(r){Tg.delete(r[20])}(s)}}function an(r,s,o){return function nd(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=r.data[u.directiveStart].encapsulation;if(l===St.None||l===St.Emulated)return null}return $r(u,o)}(r,s.parent,o)}function Qo(r,s,o,u,l){r.insertBefore(s,o,u,l)}function Kc(r,s,o){r.appendChild(s,o)}function iv(r,s,o,u,l){null!==u?Qo(r,s,o,u,l):Kc(r,s,o)}function Hh(r,s){return r.parentNode(s)}let Pi=function rd(r,s,o){return 40&r.type?$r(r,o):null};function zh(r,s,o,u){const l=an(r,u,s),d=s[11],v=function Gi(r,s,o){return Pi(r,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let D=0;D<o.length;D++)iv(d,l,o[D],v,!1);else iv(d,l,o,v,!1)}function id(r,s){if(null!==s){const o=s.type;if(3&o)return $r(s,r);if(4&o)return Kh(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return id(r,u);{const l=r[s.index];return jr(l)?Kh(-1,l):On(l)}}if(32&o)return J_(s,r)()||On(r[s.index]);{const u=Wh(r,s);return null!==u?Array.isArray(u)?u[0]:id(Wc(r[16]),u):id(r,s.next)}}return null}function Wh(r,s){return null!==s?r[16][6].projection[s.projection]:null}function Kh(r,s){const o=10+r+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return id(u,l)}return s[7]}function Fg(r,s,o,u,l,d,f){for(;null!=o;){const v=u[o.index],D=o.type;if(f&&0===s&&(v&&$i(On(v),u),o.flags|=4),64!=(64&o.flags))if(8&D)Fg(r,s,o.child,u,l,d,!1),td(s,r,l,v,d);else if(32&D){const R=J_(o,u);let B;for(;B=R();)td(s,r,l,B,d);td(s,r,l,v,d)}else 16&D?qh(r,s,u,o,l,d):td(s,r,l,v,d);o=f?o.projectionNext:o.next}}function ou(r,s,o,u,l,d){Fg(o,u,r.firstChild,s,l,d,!1)}function qh(r,s,o,u,l,d){const f=o[16],D=f[6].projection[u.projection];if(Array.isArray(D))for(let R=0;R<D.length;R++)td(s,r,l,D[R],d);else Fg(r,s,D,f[3],l,d,!0)}function Zh(r,s,o){r.setAttribute(s,"style",o)}function Ug(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function av(r,s,o){let u=r.length;for(;;){const l=r.indexOf(s,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||r.charCodeAt(l+d)<=32)return l}o=l+1}}const Bg="ng-template";function Vg(r,s,o){let u=0;for(;u<r.length;){let l=r[u++];if(o&&"class"===l){if(l=r[u],-1!==av(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<r.length&&"string"==typeof(l=r[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function jg(r){return 4===r.type&&r.value!==Bg}function tD(r,s,o){return s===(4!==r.type||o?r.value:Bg)}function uv(r,s,o){let u=4;const l=r.attrs||[],d=function nD(r){for(let s=0;s<r.length;s++)if(jo(r[s]))return s;return r.length}(l);let f=!1;for(let v=0;v<s.length;v++){const D=s[v];if("number"!=typeof D){if(!f)if(4&u){if(u=2|1&u,""!==D&&!tD(r,D,o)||""===D&&1===s.length){if(Ts(u))return!1;f=!0}}else{const R=8&u?D:s[++v];if(8&u&&null!==r.attrs){if(!Vg(r.attrs,R,o)){if(Ts(u))return!1;f=!0}continue}const Y=$g(8&u?"class":D,l,jg(r),o);if(-1===Y){if(Ts(u))return!1;f=!0;continue}if(""!==R){let fe;fe=Y>d?"":l[Y+1].toLowerCase();const Ce=8&u?fe:null;if(Ce&&-1!==av(Ce,R,0)||2&u&&R!==fe){if(Ts(u))return!1;f=!0}}}}else{if(!f&&!Ts(u)&&!Ts(D))return!1;if(f&&Ts(D))continue;f=!1,u=D|1&u}}return Ts(u)||f}function Ts(r){return 0==(1&r)}function $g(r,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const f=s[l];if(f===r)return l;if(3===f||6===f)d=!0;else{if(1===f||2===f){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===f)break;if(0===f){l+=4;continue}}l+=d?1:2}return-1}return function rD(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function Qh(r,s,o=!1){for(let u=0;u<s.length;u++)if(uv(r,s[u],o))return!0;return!1}function zg(r,s){return r?":not("+s.trim()+")":s}function iD(r){let s=r[0],o=1,u=2,l="",d=!1;for(;o<r.length;){let f=r[o];if("string"==typeof f)if(2&u){const v=r[++o];l+="["+f+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+f:4&u&&(l+=" "+f);else""!==l&&!Ts(f)&&(s+=zg(d,l),l=""),u=f,d=d||!Ts(u);o++}return""!==l&&(s+=zg(d,l)),s}const en={};function cv(r){lv(fn(),Qe(),ce()+r,!1)}function lv(r,s,o,u){if(!u)if(3==(3&s[2])){const d=r.preOrderCheckHooks;null!==d&&fr(s,d,o)}else{const d=r.preOrderHooks;null!==d&&Es(s,d,0,o)}Me(o)}function Xh(r,s=null,o=null,u){const l=Zg(r,s,o,u);return l.resolveInjectorInitializers(),l}function Zg(r,s=null,o=null,u,l=new Set){const d=[o||bt,Ob(r)];return u=u||("object"==typeof r?void 0:Q(r)),new SI(d,s||cg(),u||null,l)}let au=(()=>{class r{static create(o,u){if(Array.isArray(o))return Xh({name:""},u,o,"");{const l=o.name??"";return Xh({name:l},o.parent,o.providers,l)}}}return r.THROW_IF_NOT_FOUND=wa,r.NULL=new DI,r.\u0275prov=Qt({token:r,providedIn:"any",factory:()=>L(EI)}),r.__NG_ELEMENT_ID__=-1,r})();function Qu(r,s=rt.Default){const o=Qe();return null===o?L(r,s):Xa(hr(),o,te(r),s)}function im(){throw new Error("invalid")}function sf(r,s){return r<<17|s<<2}function To(r){return r>>17&32767}function sm(r){return 2|r}function ls(r){return(131068&r)>>2}function af(r,s){return-131069&r|s<<2}function uf(r){return 1|r}function Zc(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const f=r.data[d];ya(l),f.contentQueries(2,s[d],d)}}}function Ed(r,s,o,u,l,d,f,v,D,R,B){const Y=s.blueprint.slice();return Y[0]=l,Y[2]=76|u,(null!==B||r&&1024&r[2])&&(Y[2]|=1024),Bo(Y),Y[3]=Y[15]=r,Y[8]=o,Y[10]=f||r&&r[10],Y[11]=v||r&&r[11],Y[12]=D||r&&r[12]||null,Y[9]=R||r&&r[9]||null,Y[6]=d,Y[20]=function UI(){return FI++}(),Y[21]=B,Y[16]=2==s.type?r[16]:Y,Y}function Qc(r,s,o,u,l){let d=r.data[s];if(null===d)d=function gm(r,s,o,u,l){const d=Fs(),f=za(),D=r.data[s]=function wv(r,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?d:d&&d.parent,o,s,u,l);return null===r.firstChild&&(r.firstChild=D),null!==d&&(f?null==d.child&&null!==D.parent&&(d.child=D):null===d.next&&(d.next=D)),D}(r,s,o,u,l),function Vl(){return Ht.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const f=function pa(){const r=Ht.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();d.injectorIndex=null===f?-1:f.injectorIndex}return ni(d,!0),d}function Xc(r,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),r.blueprint.push(u),r.data.push(null);return l}function mm(r,s,o){eo(s);try{const u=r.viewQuery;null!==u&&Sf(1,u,o);const l=r.template;null!==l&&Ra(r,s,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Zc(r,s),r.staticViewQueries&&Sf(2,r.viewQuery,o);const d=r.components;null!==d&&function ED(r,s){for(let o=0;o<s.length;o++)Pv(r,s[o])}(s,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,P()}}function du(r,s,o,u){const l=s[2];if(128!=(128&l)){eo(s);try{Bo(s),function Wa(r){return Ht.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Ra(r,s,o,2,u);const f=3==(3&l);if(f){const R=r.preOrderCheckHooks;null!==R&&fr(s,R,null)}else{const R=r.preOrderHooks;null!==R&&Es(s,R,0,null),Bi(s,0)}if(function Ov(r){for(let s=ed(r);null!==s;s=Gh(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(512&l[2])&&Zn(d,1),l[2]|=512}}}(s),function Rv(r){for(let s=ed(r);null!==s;s=Gh(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];ys(u)&&du(l,u,l.template,u[8])}}(s),null!==r.contentQueries&&Zc(r,s),f){const R=r.contentCheckHooks;null!==R&&fr(s,R)}else{const R=r.contentHooks;null!==R&&Es(s,R,1),Bi(s,1)}!function yf(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Me(~l);else{const d=l,f=o[++u],v=o[++u];jl(f,d),v(2,s[d])}}}finally{Me(-1)}}(r,s);const v=r.components;null!==v&&function vd(r,s){for(let o=0;o<s.length;o++)Im(r,s[o])}(s,v);const D=r.viewQuery;if(null!==D&&Sf(2,D,u),f){const R=r.viewCheckHooks;null!==R&&fr(s,R)}else{const R=r.viewHooks;null!==R&&Es(s,R,2),Bi(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Zn(s[3],-1))}finally{P()}}}function Ra(r,s,o,u,l){const d=ce(),f=2&u;try{Me(-1),f&&s.length>22&&lv(r,s,22,!1),o(u,l)}finally{Me(d)}}function ym(r,s,o){if(Yi(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const f=r.data[d];f.contentQueries&&f.contentQueries(1,o[d],d)}}}function _f(r,s,o){!Ai()||(function Em(r,s,o,u){const l=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||Qn(o,s),$i(u,s);const f=o.initialInputs;for(let v=l;v<d;v++){const D=r.data[v],R=Er(D);R&&CD(s,o,D);const B=Is(s,r,v,o);$i(B,s),null!==f&&xv(0,v-l,B,D,0,f),R&&(Cn(o.index,s)[8]=B)}}(r,s,o,$r(o,s)),128==(128&o.flags)&&function Tv(r,s,o){const u=o.directiveStart,l=o.directiveEnd,d=o.index,f=function Mc(){return Ht.lFrame.currentDirectiveIndex}();try{Me(d);for(let v=u;v<l;v++){const D=r.data[v],R=s[v];Vs(v),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&tl(D,R)}}finally{Me(-1),Vs(f)}}(r,s,o))}function vf(r,s,o=$r){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const f=u[d+1],v=-1===f?o(s,r):r[f];r[l++]=v}}}function Ju(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=_m(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function _m(r,s,o,u,l,d,f,v,D,R){const B=22+u,Y=B+l,fe=function ID(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:en);return o}(B,Y),Ce="function"==typeof R?R():R;return fe[1]={type:r,blueprint:fe,template:o,queries:null,viewQuery:v,declTNode:s,data:fe.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:D,consts:Ce,incompleteFirstPass:!1}}function vm(r,s,o,u){const l=wm(s);null===o?l.push(u):(l.push(o),r.firstCreatePass&&bm(r).push(u,l.length-1))}function Ef(r,s,o){for(let u in r)if(r.hasOwnProperty(u)){const l=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function If(r,s){const u=s.directiveEnd,l=r.data,d=s.attrs,f=[];let v=null,D=null;for(let R=s.directiveStart;R<u;R++){const B=l[R],Y=B.inputs,fe=null===d||jg(s)?null:Tf(Y,d);f.push(fe),v=Ef(Y,R,v),D=Ef(B.outputs,R,D)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=f,s.inputs=v,s.outputs=D}function Df(r,s){const o=Cn(s,r);16&o[2]||(o[2]|=32)}function Jc(r,s,o,u){let l=!1;if(Ai()){const d=function Id(r,s,o){const u=r.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const f=u[d];Qh(o,f.selectors,!1)&&(l||(l=[]),no(Qn(o,s),r,f.type),Er(f)?(Cv(r,o),l.unshift(f)):l.push(f))}return l}(r,s,o),f=null===u?null:{"":-1};if(null!==d){l=!0,Av(o,r.data.length,d.length);for(let B=0;B<d.length;B++){const Y=d[B];Y.providersResolver&&Y.providersResolver(Y)}let v=!1,D=!1,R=Xc(r,s,d.length,null);for(let B=0;B<d.length;B++){const Y=d[B];o.mergedAttrs=Ou(o.mergedAttrs,Y.hostAttrs),Mv(r,o,s,R,Y),Sv(R,Y,f),null!==Y.contentQueries&&(o.flags|=8),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(o.flags|=128);const fe=Y.type.prototype;!v&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!D&&(fe.ngOnChanges||fe.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),D=!0),R++}If(r,o)}f&&function Hr(r,s,o){if(s){const u=r.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new me(-301,!1);u.push(s[l],d)}}}(o,u,f)}return o.mergedAttrs=Ou(o.mergedAttrs,o.attrs),l}function el(r,s,o,u,l,d){const f=d.hostBindings;if(f){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const D=~s.index;(function wf(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=D&&v.push(D),v.push(u,l,f)}}function tl(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function Cv(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function Sv(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;Er(s)&&(o[""]=r)}}function Av(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}function Mv(r,s,o,u,l){r.data[u]=l;const d=l.factory||(l.factory=is(l.type)),f=new to(d,Er(l),Qu);r.blueprint[u]=f,o[u]=f,el(r,s,0,u,Xc(r,o,l.hostVars,en),l)}function CD(r,s,o){const u=$r(s,r),l=Ju(o),d=r[10],f=tc(r,Ed(r,l,null,o.onPush?32:16,u,s,d,d.createRenderer(u,o),null,null,null));r[s.index]=f}function Ao(r,s,o,u,l,d){const f=$r(r,s);!function bf(r,s,o,u,l,d,f){if(null==d)r.removeAttribute(s,l,o);else{const v=null==f?we(d):f(d,u||"",l);r.setAttribute(s,l,v,o)}}(s[11],f,d,r.value,o,u,l)}function xv(r,s,o,u,l,d){const f=d[s];if(null!==f){const v=u.setInput;for(let D=0;D<f.length;){const R=f[D++],B=f[D++],Y=f[D++];null!==v?u.setInput(o,Y,R,B):o[B]=Y}}}function Tf(r,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;r.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,r[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function ea(r,s,o,u){return new Array(r,!0,!1,s,null,0,u,o,null,null)}function Im(r,s){const o=Cn(s,r);if(ys(o)){const u=o[1];48&o[2]?du(u,o,u.template,o[8]):o[5]>0&&ec(o)}}function ec(r){for(let u=ed(r);null!==u;u=Gh(u))for(let l=10;l<u.length;l++){const d=u[l];if(ys(d))if(512&d[2]){const f=d[1];du(f,d,f.template,d[8])}else d[5]>0&&ec(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=Cn(o[u],r);ys(l)&&l[5]>0&&ec(l)}}function Pv(r,s){const o=Cn(s,r),u=o[1];(function Dm(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),mm(u,o,o[8])}function tc(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function Cf(r){for(;r;){r[2]|=32;const s=Wc(r);if(gs(r)&&!s)return r;r=s}return null}function nc(r,s,o,u=!0){const l=s[10];l.begin&&l.begin();try{du(r,s,r.template,o)}catch(f){throw u&&xf(s,f),f}finally{l.end&&l.end()}}function Sf(r,s,o){ya(0),s(r,o)}function wm(r){return r[7]||(r[7]=[])}function bm(r){return r.cleanup||(r.cleanup=[])}function xf(r,s){const o=r[9],u=o?o.get(Aa,null):null;u&&u.handleError(s)}function Rf(r,s,o,u,l){for(let d=0;d<o.length;){const f=o[d++],v=o[d++],D=s[f],R=r.data[f];null!==R.setInput?R.setInput(D,l,u,v):D[v]=l}}function ao(r,s,o){const u=Si(s,r);!function ZI(r,s,o){r.setValue(s,o)}(r[11],u,o)}function Dd(r,s,o){let u=o?r.styles:null,l=o?r.classes:null,d=0;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?d=v:1==d?l=K(l,v):2==d&&(u=K(u,v+": "+s[++f]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function wd(r,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(On(d)),jr(d))for(let v=10;v<d.length;v++){const D=d[v],R=D[1].firstChild;null!==R&&wd(D[1],D,R,u)}const f=o.type;if(8&f)wd(r,s,o.child,u);else if(32&f){const v=J_(o,s);let D;for(;D=v();)u.push(D)}else if(16&f){const v=Wh(s,o);if(Array.isArray(v))u.push(...v);else{const D=Wc(s[16]);wd(D[1],D,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Mo{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return wd(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(jr(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(nv(s,u),nu(o,u))}this._attachedToViewContainer=!1}rv(this._lView[1],this._lView)}onDestroy(s){vm(this._lView[1],this._lView,null,s)}markForCheck(){Cf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){nc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function XI(r,s){ou(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=s}}class Nv extends Mo{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;nc(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Of extends Xl{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=De(s);return new Ki(o,this.ngModule)}}function Tm(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Pf{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const l=this.injector.get(s,Hc,u);return l!==Hc||o===Hc?l:this.parentInjector.get(s,o,u)}}class Ki extends F_{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function od(r){return r.map(iD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Tm(this.componentDef.inputs)}get outputs(){return Tm(this.componentDef.outputs)}create(s,o,u,l){let d=(l=l||this.ngModule)instanceof jc?l:l?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const f=d?new Pf(s,d):s,v=f.get(U_,null);if(null===v)throw new me(407,!1);const D=f.get(Nh,null),R=v.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",Y=u?function wD(r,s,o){return r.selectRootElement(s,o===St.ShadowDom)}(R,u,this.componentDef.encapsulation):Ng(v.createRenderer(null,this.componentDef),B,function kv(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(B)),fe=this.componentDef.onPush?288:272,Ce=_m(0,null,null,1,0,null,null,null,null,null),Ge=Ed(null,Ce,null,fe,null,null,v,R,D,f,null);let it,ft;eo(Ge);try{const xt=function MD(r,s,o,u,l,d){const f=o[1];o[22]=r;const D=Qc(f,22,2,"#host",null),R=D.mergedAttrs=s.hostAttrs;null!==R&&(Dd(D,R,!0),null!==r&&(Ya(l,r,R),null!==D.classes&&Ug(l,r,D.classes),null!==D.styles&&Zh(l,r,D.styles)));const B=u.createRenderer(r,s),Y=Ed(o,Ju(s),null,s.onPush?32:16,o[22],D,u,B,d||null,null,null);return f.firstCreatePass&&(no(Qn(D,o),f,s.type),Cv(f,D),Av(D,o.length,1)),tc(o,Y),o[22]=Y}(Y,this.componentDef,Ge,v,R);if(Y)if(u)Ya(R,Y,["ng-version",kh.full]);else{const{attrs:Ut,classes:et}=function sD(r){const s=[],o=[];let u=1,l=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===l?""!==d&&s.push(d,r[++u]):8===l&&o.push(d);else{if(!Ts(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);Ut&&Ya(R,Y,Ut),et&&et.length>0&&Ug(R,Y,et.join(" "))}if(ft=Fo(Ce,22),void 0!==o){const Ut=ft.projection=[];for(let et=0;et<this.ngContentSelectors.length;et++){const Kt=o[et];Ut.push(null!=Kt?Array.from(Kt):null)}}it=function Cm(r,s,o,u){const l=o[1],d=function TD(r,s,o){const u=hr();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Mv(r,u,s,Xc(r,s,1,null),o),If(r,u));const l=Is(s,r,u.directiveStart,u);$i(l,s);const d=$r(u,s);return d&&$i(d,s),l}(l,o,s);if(r[8]=o[8]=d,null!==u)for(const v of u)v(d,s);if(s.contentQueries){const v=hr();s.contentQueries(1,d,v.directiveStart)}const f=hr();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Me(f.index),el(o[1],f,0,f.directiveStart,f.directiveEnd,s),tl(s,d)),d}(xt,this.componentDef,Ge,[xD]),mm(Ce,Ge,null)}finally{P()}return new nl(this.componentType,it,$c(ft,Ge),Ge,ft)}}class nl extends class MI{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new Nv(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const d=this._rootLView;Rf(d[1],d,l,s,o),Df(d,this._tNode.index)}}get injector(){return new Hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function xD(){const r=hr();Mn(Qe()[1],r)}let Mm=null;function tt(){if(!Mm){const r=tn.Symbol;if(r&&r.iterator)Mm=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Mm=u)}}}return Mm}function ta(r){return!!$t(r)&&(Array.isArray(r)||!(r instanceof Map)&&tt()in r)}function $t(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function ut(r,s,o){return r[s]=o}function Ye(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Dr(r,s,o,u){const l=Ye(r,s,o);return Ye(r,s+1,u)||l}function Rm(r,s,o,u){const l=Qe();return Ye(l,Bs(),s)&&(fn(),Ao(Fe(),l,r,s,o,u)),Rm}function al(r,s,o,u,l,d){const v=Dr(r,function xi(){return Ht.lFrame.bindingIndex}(),o,l);return vs(2),v?s+we(o)+u+we(l)+d:en}function fu(r,s,o,u,l,d,f,v){const D=Qe(),R=fn(),B=r+22,Y=R.firstCreatePass?function Pm(r,s,o,u,l,d,f,v,D){const R=s.consts,B=Qc(s,r,4,f||null,ar(R,v));Jc(s,o,B,ar(R,D)),Mn(s,B);const Y=B.tViews=_m(2,B,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,R);return null!==s.queries&&(s.queries.template(s,B),Y.queries=s.queries.embeddedTView(B)),B}(B,R,D,s,o,u,l,d,f):R.data[B];ni(Y,!1);const fe=D[11].createComment("");zh(R,D,fe,Y),$i(fe,D),tc(D,D[B]=ea(fe,D,fe,Y)),Zi(Y)&&_f(R,D,Y),null!=f&&vf(D,Y,v)}function Cd(r){return ms(function Us(){return Ht.lFrame.contextLView}(),22+r)}function Nm(r,s,o){const u=Qe();return Ye(u,Bs(),s)&&function Ss(r,s,o,u,l,d,f,v){const D=$r(s,o);let B,R=s.inputs;!v&&null!=R&&(B=R[u])?(Rf(r,o,B,u,l),vr(s)&&Df(o,s.index)):3&s.type&&(u=function bv(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=f?f(l,s.value||"",u):l,d.setProperty(D,u,l))}(fn(),Fe(),u,r,s,u[11],o,!1),Nm}function oc(r,s,o,u,l){const f=l?"class":"style";Rf(r,o,s.inputs[f],f,u)}function Sd(r,s,o,u){const l=Qe(),d=fn(),f=22+r,v=l[11],D=l[f]=Ng(v,s,function _n(){return Ht.lFrame.currentNamespace}()),R=d.firstCreatePass?function Vv(r,s,o,u,l,d,f){const v=s.consts,R=Qc(s,r,2,l,ar(v,d));return Jc(s,o,R,ar(v,f)),null!==R.attrs&&Dd(R,R.attrs,!1),null!==R.mergedAttrs&&Dd(R,R.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,R),R}(f,d,l,0,s,o,u):d.data[f];ni(R,!0);const B=R.mergedAttrs;null!==B&&Ya(v,D,B);const Y=R.classes;null!==Y&&Ug(v,D,Y);const fe=R.styles;return null!==fe&&Zh(v,D,fe),64!=(64&R.flags)&&zh(d,l,D,R),0===function _s(){return Ht.lFrame.elementDepthCount}()&&$i(D,l),function Ha(){Ht.lFrame.elementDepthCount++}(),Zi(R)&&(_f(d,l,R),ym(d,R,l)),null!==u&&vf(l,R),Sd}function es(){let r=hr();za()?Eo():(r=r.parent,ni(r,!1));const s=r;!function vo(){Ht.lFrame.elementDepthCount--}();const o=fn();return o.firstCreatePass&&(Mn(o,r),Yi(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function qa(r){return 0!=(16&r.flags)}(s)&&oc(o,s,Qe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Gl(r){return 0!=(32&r.flags)}(s)&&oc(o,s,Qe(),s.stylesWithoutHost,!1),es}function Ad(r,s,o,u){return Sd(r,s,o,u),es(),Ad}function Md(r,s,o){const u=Qe(),l=fn(),d=r+22,f=l.firstCreatePass?function jv(r,s,o,u,l){const d=s.consts,f=ar(d,u),v=Qc(s,r,8,"ng-container",f);return null!==f&&Dd(v,f,!0),Jc(s,o,v,ar(d,l)),null!==s.queries&&s.queries.elementStart(s,v),v}(d,l,u,s,o):l.data[d];ni(f,!0);const v=u[d]=u[11].createComment("");return zh(l,u,v,f),$i(v,u),Zi(f)&&(_f(l,u,f),ym(l,f,u)),null!=o&&vf(u,f),Md}function xo(){let r=hr();const s=fn();return za()?Eo():(r=r.parent,ni(r,!1)),s.firstCreatePass&&(Mn(s,r),Yi(r)&&s.queries.elementEnd(r)),xo}function xe(){return Qe()}function dl(r){return!!r&&"function"==typeof r.then}function co(r){return!!r&&"function"==typeof r.subscribe}const $v=co;function ac(r,s,o,u){const l=Qe(),d=fn(),f=hr();return function pu(r,s,o,u,l,d,f,v){const D=Zi(u),B=r.firstCreatePass&&bm(r),Y=s[8],fe=wm(s);let Ce=!0;if(3&u.type||v){const ft=$r(u,s),xt=v?v(ft):ft,Ut=fe.length,et=v?zn=>v(On(zn[u.index])):u.index;let Kt=null;if(!v&&D&&(Kt=function ND(r,s,o,u){const l=r.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const f=l[d];if(f===o&&l[d+1]===u){const v=s[7],D=l[d+2];return v.length>D?v[D]:null}"string"==typeof f&&(d+=2)}return null}(r,s,l,u.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=d,Kt.__ngLastListenerFn__=d,Ce=!1;else{d=Lf(u,s,Y,d,!1);const zn=o.listen(xt,l,d);fe.push(d,zn),B&&B.push(l,et,Ut,Ut+1)}}else d=Lf(u,s,Y,d,!1);const Ge=u.outputs;let it;if(Ce&&null!==Ge&&(it=Ge[l])){const ft=it.length;if(ft)for(let xt=0;xt<ft;xt+=2){const Mr=s[it[xt]][it[xt+1]].subscribe(d),Tc=fe.length;fe.push(d,Mr),B&&B.push(l,u.index,Tc,-(Tc+1))}}}(d,l,l[11],f,r,s,0,u),ac}function km(r,s,o,u){try{return!1!==o(u)}catch(l){return xf(r,l),!1}}function Lf(r,s,o,u,l){return function d(f){if(f===Function)return u;Cf(2&r.flags?Cn(r.index,s):s);let D=km(s,0,u,f),R=d.__ngNextListenerFn__;for(;R;)D=km(s,0,R,f)&&D,R=R.__ngNextListenerFn__;return l&&!1===D&&(f.preventDefault(),f.returnValue=!1),D}}function Gv(r=1){return function C(r){return(Ht.lFrame.contextLView=function V(r,s){for(;r>0;)s=s[15],r--;return s}(r,Ht.lFrame.contextLView))[8]}(r)}function Fr(r,s,o,u,l){const d=r[o+1],f=null===s;let v=u?To(d):ls(d),D=!1;for(;0!==v&&(!1===D||f);){const B=r[v+1];cc(r[v],s)&&(D=!0,r[v+1]=u?uf(B):sm(B)),v=u?To(B):ls(B)}D&&(r[o+1]=u?sm(d):uf(d))}function cc(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&Ne(r,s)>=0}function Nd(r,s){return function lo(r,s,o,u){const l=Qe(),d=fn(),f=vs(2);d.firstUpdatePass&&function Vm(r,s,o,u){const l=r.data;if(null===l[o+1]){const d=l[ce()],f=function fl(r,s){return s>=r.expandoStartIndex}(r,o);(function Ld(r,s){return 0!=(r.flags&(s?16:32))})(d,u)&&null===s&&!f&&(s=!1),s=function VD(r,s,o,u){const l=function ma(r){const s=Ht.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=pl(o=gi(null,r,s,o,u),s.attrs,u),d=null);else{const f=s.directiveStylingLast;if(-1===f||r[f]!==l)if(o=gi(l,r,s,o,u),null===d){let D=function jD(r,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==ls(u))return r[To(u)]}(r,s,u);void 0!==D&&Array.isArray(D)&&(D=gi(null,r,s,D[1],u),D=pl(D,s.attrs,u),function zv(r,s,o,u){r[To(o?s.classBindings:s.styleBindings)]=u}(r,s,u,D))}else d=function Wv(r,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=pl(u,r[d].hostAttrs,o);return pl(u,s.attrs,o)}(r,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function FD(r,s,o,u,l,d){let f=d?s.classBindings:s.styleBindings,v=To(f),D=ls(f);r[u]=o;let B,R=!1;if(Array.isArray(o)){const Y=o;B=Y[1],(null===B||Ne(Y,B)>0)&&(R=!0)}else B=o;if(l)if(0!==D){const fe=To(r[v+1]);r[u+1]=sf(fe,v),0!==fe&&(r[fe+1]=af(r[fe+1],u)),r[v+1]=function fD(r,s){return 131071&r|s<<17}(r[v+1],u)}else r[u+1]=sf(v,0),0!==v&&(r[v+1]=af(r[v+1],u)),v=u;else r[u+1]=sf(D,0),0===v?v=u:r[D+1]=af(r[D+1],u),D=u;R&&(r[u+1]=sm(r[u+1])),Fr(r,B,u,!0),Fr(r,B,u,!1),function mu(r,s,o,u,l){const d=l?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof s&&Ne(d,s)>=0&&(o[u+1]=uf(o[u+1]))}(s,B,r,u,d),f=sf(v,D),d?s.classBindings=f:s.styleBindings=f}(l,d,s,o,f,u)}}(d,r,f,u),s!==en&&Ye(l,f,s)&&function _u(r,s,o,u,l,d,f,v){if(!(3&s.type))return;const D=r.data,R=D[v+1];vu(function fd(r){return 1==(1&r)}(R)?Yv(D,s,o,l,ls(R),f):void 0)||(vu(d)||function Xu(r){return 2==(2&r)}(R)&&(d=Yv(D,null,o,l,v,f)),function Jo(r,s,o,u,l){if(s)l?r.addClass(o,u):r.removeClass(o,u);else{let d=-1===u.indexOf("-")?void 0:Zo.DashCase;null==l?r.removeStyle(o,u,d):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),d|=Zo.Important),r.setStyle(o,u,l,d))}}(u,f,Si(ce(),o),l,d))}(d,d.data[ce()],l,l[11],r,l[f+1]=function Bf(r,s){return null==r||("string"==typeof s?r+=s:"object"==typeof r&&(r=Q(Zu(r)))),r}(s,o),u,f)}(r,s,null,!0),Nd}function gi(r,s,o,u,l){let d=null;const f=o.directiveEnd;let v=o.directiveStylingLast;for(-1===v?v=o.directiveStart:v++;v<f&&(d=s[v],u=pl(u,d.hostAttrs,l),d!==r);)v++;return null!==r&&(o.directiveStylingLast=v),u}function pl(r,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const f=s[d];"number"==typeof f?l=f:l===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),J(r,f,!!o||s[++d]))}return void 0===r?null:r}function Yv(r,s,o,u,l,d){const f=null===s;let v;for(;l>0;){const D=r[l],R=Array.isArray(D),B=R?D[1]:D,Y=null===B;let fe=o[l+1];fe===en&&(fe=Y?bt:void 0);let Ce=Y?ae(fe,u):B===u?fe:void 0;if(R&&!vu(Ce)&&(Ce=ae(D,u)),vu(Ce)&&(v=Ce,f))return v;const Ge=r[l+1];l=f?To(Ge):ls(Ge)}if(null!==s){let D=d?s.residualClasses:s.residualStyles;null!=D&&(v=ae(D,u))}return v}function vu(r){return void 0!==r}function jm(r,s=""){const o=Qe(),u=fn(),l=r+22,d=u.firstCreatePass?Qc(u,l,1,s,null):u.data[l],f=o[l]=function Pg(r,s){return r.createText(s)}(o[11],s);zh(u,o,f,d),ni(d,!1)}function Vf(r){return mi("",r,""),Vf}function mi(r,s,o){const u=Qe(),l=function ol(r,s,o,u){return Ye(r,Bs(),o)?s+we(o)+u:en}(u,r,s,o);return l!==en&&ao(u,ce(),l),mi}function $m(r,s,o,u,l){const d=Qe(),f=al(d,r,s,o,u,l);return f!==en&&ao(d,ce(),f),$m}const ho=void 0;var lE=["en",[["a","p"],["AM","PM"],ho],[["AM","PM"],ho,ho],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ho,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ho,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ho,"{1} 'at' {0}",ho],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hc(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let fo={};function Iu(r){const s=function Ar(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=_l(s);if(o)return o;const u=s.split("-")[0];if(o=_l(u),o)return o;if("en"===u)return lE;throw new me(701,!1)}function ey(r){return Iu(r)[Gt.PluralCase]}function _l(r){return r in fo||(fo[r]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[r]),fo[r]}var Gt=(()=>((Gt=Gt||{})[Gt.LocaleId=0]="LocaleId",Gt[Gt.DayPeriodsFormat=1]="DayPeriodsFormat",Gt[Gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gt[Gt.DaysFormat=3]="DaysFormat",Gt[Gt.DaysStandalone=4]="DaysStandalone",Gt[Gt.MonthsFormat=5]="MonthsFormat",Gt[Gt.MonthsStandalone=6]="MonthsStandalone",Gt[Gt.Eras=7]="Eras",Gt[Gt.FirstDayOfWeek=8]="FirstDayOfWeek",Gt[Gt.WeekendRange=9]="WeekendRange",Gt[Gt.DateFormat=10]="DateFormat",Gt[Gt.TimeFormat=11]="TimeFormat",Gt[Gt.DateTimeFormat=12]="DateTimeFormat",Gt[Gt.NumberSymbols=13]="NumberSymbols",Gt[Gt.NumberFormats=14]="NumberFormats",Gt[Gt.CurrencyCode=15]="CurrencyCode",Gt[Gt.CurrencySymbol=16]="CurrencySymbol",Gt[Gt.CurrencyName=17]="CurrencyName",Gt[Gt.Currencies=18]="Currencies",Gt[Gt.Directionality=19]="Directionality",Gt[Gt.PluralCase=20]="PluralCase",Gt[Gt.ExtraData=21]="ExtraData",Gt))();const fc="en-US";let na=fc;class Cl{}class gy{}function LE(r,s){return new Zf(r,s??null)}class Zf extends Cl{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Of(this);const u=Tn(s);this._bootstrapComponents=Ma(u.bootstrap),this._r3Injector=Zg(s,o,[{provide:Cl,useValue:this},{provide:Xl,useValue:this.componentFactoryResolver}],Q(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class oi extends gy{constructor(s){super(),this.moduleType=s}create(s){return new Zf(this.moduleType,s)}}class my extends Cl{constructor(s,o,u){super(),this.componentFactoryResolver=new Of(this),this.instance=null;const l=new SI([...s,{provide:Cl,useValue:this},{provide:Xl,useValue:this.componentFactoryResolver}],o||cg(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Kd(r,s,o=null){return new my(r,s,o).injector}let yy=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=wI(0,o.type),l=u.length>0?Kd([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=Qt({token:r,providedIn:"environment",factory:()=>new r(L(jc))}),r})();function La(r){r.getStandaloneInjector=s=>s.get(yy).getOrCreateStandaloneInjector(r)}function Xd(r,s){const o=r[s];return o===en?void 0:o}function Sl(r,s){const o=fn();let u;const l=r+22;o.firstCreatePass?(u=function tp(r,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(r===u.name)return u}}(s,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const d=u.factory||(u.factory=is(u.type)),f=qn(Qu);try{const v=_a(!1),D=d();return _a(v),function PD(r,s,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),s[o]=u}(o,Qe(),l,D),D}finally{qn(f)}}function Iy(r,s,o){const u=r+22,l=Qe(),d=ms(l,u);return Cu(l,u)?function GE(r,s,o,u,l,d){const f=s+o;return Ye(r,f,l)?ut(r,f+1,d?u.call(d,l):u(l)):Xd(r,f+1)}(l,br(),s,d.transform,o,d):d.transform(o)}function Dy(r,s,o,u){const l=r+22,d=Qe(),f=ms(d,l);return Cu(d,l)?function ep(r,s,o,u,l,d,f){const v=s+o;return Dr(r,v,l,d)?ut(r,v+2,f?u.call(f,l,d):u(l,d)):Xd(r,v+2)}(d,br(),s,f.transform,o,u,f):f.transform(o,u)}function Cu(r,s){return r[1].data[s].pure}function sa(r){return s=>{setTimeout(r,void 0,s)}}const fs=class WE extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,d=o||(()=>null),f=u;if(s&&"object"==typeof s){const D=s;l=D.next?.bind(D),d=D.error?.bind(D),f=D.complete?.bind(D)}this.__isAsync&&(d=sa(d),l&&(l=sa(l)),f&&(f=sa(f)));const v=super.subscribe({next:l,error:d,complete:f});return s instanceof M.w0&&s.add(v),v}};function KE(){return this._results[tt()]()}class Fa{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=tt(),u=Fa.prototype;u[o]||(u[o]=KE)}get changes(){return this._changes||(this._changes=new fs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=fi(s);(this._changesDetected=!function kc(r,s,o){if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++){let l=r[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let eh=(()=>{class r{}return r.__NG_ELEMENT_ID__=Su,r})();const Al=eh,qE=class extends Al{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=Ed(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(u)),mm(u,l,s),new Mo(l)}};function Su(){return th(hr(),Qe())}function th(r,s){return 4&r.type?new qE(s,r,$c(r,s)):null}let ip=(()=>{class r{}return r.__NG_ELEMENT_ID__=_w,r})();function _w(){return ZE(hr(),Qe())}const vw=ip,YE=class extends vw{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return $c(this._hostTNode,this._hostLView)}get injector(){return new Hs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Go(this._hostTNode,this._hostLView);if(Oc(s)){const o=$o(s,this._hostLView),u=kr(s);return new Hs(o[1].data[u+8],o)}return new Hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=nh(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let l,d;"number"==typeof u?l=u:null!=u&&(l=u.index,d=u.injector);const f=s.createEmbeddedView(o||{},d);return this.insert(f,l),f}createComponent(s,o,u,l,d){const f=s&&!function tu(r){return"function"==typeof r}(s);let v;if(f)v=o;else{const Y=o||{};v=Y.index,u=Y.injector,l=Y.projectableNodes,d=Y.environmentInjector||Y.ngModuleRef}const D=f?s:new Ki(De(s)),R=u||this.parentInjector;if(!d&&null==D.ngModule){const fe=(f?R:this.parentInjector).get(jc,null);fe&&(d=fe)}const B=D.create(R,l,void 0,d);return this.insert(B.hostView,v),B}insert(s,o){const u=s._lView,l=u[1];if(function ks(r){return jr(r[3])}(u)){const B=this.indexOf(s);if(-1!==B)this.detach(B);else{const Y=u[3],fe=new YE(Y,Y[6],Y[3]);fe.detach(fe.indexOf(s))}}const d=this._adjustIndex(o),f=this._lContainer;!function Yb(r,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],Ia(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const f=s[17];null!==f&&o!==f&&function Zb(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(f,s);const v=s[19];null!==v&&v.insertView(r),s[2]|=64}(l,u,f,d);const v=Kh(d,f),D=u[11],R=Hh(D,f[7]);return null!==R&&function Kb(r,s,o,u,l,d){u[0]=l,u[6]=s,ou(r,u,o,1,l,d)}(l,f[6],D,u,R,v),s.attachToViewContainerRef(),Ia(sp(f),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=nh(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=nv(this._lContainer,o);u&&(nu(sp(this._lContainer),o),rv(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=nv(this._lContainer,o);return u&&null!=nu(sp(this._lContainer),o)?new Mo(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function nh(r){return r[8]}function sp(r){return r[8]||(r[8]=[])}function ZE(r,s){let o;const u=s[r.index];if(jr(u))o=u;else{let l;if(8&r.type)l=On(u);else{const d=s[11];l=d.createComment("");const f=$r(r,s);Qo(d,Hh(d,f),l,function eD(r,s){return r.nextSibling(s)}(d,f),!1)}s[r.index]=o=ea(u,s,l,r),tc(s,o)}return new YE(o,r,s)}class Ua{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ua(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ec{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const f=o.getByIndex(d);l.push(this.queries[f.indexInDeclarationView].clone())}return new Ec(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==ap(s,o).matches&&this.queries[o].setDirty()}}class wy{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class op{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new op(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class by{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new by(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,XE(o,d)),this.matchTNodeWithReadOption(s,o,wo(o,s,d,!1,!1))}else u===eh?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,wo(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===Gc||l===ip||l===eh&&4&o.type)this.addMatch(o.index,-2);else{const d=wo(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function XE(r,s){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function ww(r,s,o,u){return-1===o?function Dw(r,s){return 11&r.type?$c(r,s):4&r.type?th(r,s):null}(s,r):-2===o?function Ty(r,s,o){return o===Gc?$c(s,r):o===eh?th(s,r):o===ip?ZE(s,r):void 0}(r,s,u):Is(r,r[1],o,s)}function yi(r,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=r.data,f=o.matches,v=[];for(let D=0;D<f.length;D+=2){const R=f[D];v.push(R<0?null:ww(s,d[R],f[D+1],o.metadata.read))}l.matches=v}return l.matches}function Cy(r,s,o,u){const l=r.queries.getByIndex(o),d=l.matches;if(null!==d){const f=yi(r,s,l,o);for(let v=0;v<d.length;v+=2){const D=d[v];if(D>0)u.push(f[v/2]);else{const R=d[v+1],B=s[-D];for(let Y=10;Y<B.length;Y++){const fe=B[Y];fe[17]===fe[3]&&Cy(fe[1],fe,R,u)}if(null!==B[9]){const Y=B[9];for(let fe=0;fe<Y.length;fe++){const Ce=Y[fe];Cy(Ce[1],Ce,R,u)}}}}}return u}function JE(r){const s=Qe(),o=fn(),u=js();ya(u+1);const l=ap(o,u);if(r.dirty&&function Uo(r){return 4==(4&r[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const d=l.crossesNgTemplate?Cy(o,s,u,[]):yi(o,s,l,u);r.reset(d,RI),r.notifyOnChanges()}return!0}return!1}function e0(r,s,o,u){const l=fn();if(l.firstCreatePass){const d=hr();(function t0(r,s,o){null===r.queries&&(r.queries=new op),r.queries.track(new by(s,o))})(l,new wy(s,o,u),d.index),function n0(r,s){const o=r.contentQueries||(r.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,s)}(l,r),2==(2&o)&&(l.staticContentQueries=!0)}!function rh(r,s,o){const u=new Fa(4==(4&o));vm(r,s,u,u.destroy),null===s[19]&&(s[19]=new Ec),s[19].queries.push(new Ua(u))}(l,Qe(),o)}function Sy(){return function Tw(r,s){return r[19].queries[s].queryList}(Qe(),js())}function ap(r,s){return r.queries.getByIndex(s)}function up(r,s){return th(r,s)}function Pl(...r){}const oa=new Hn("Application Initializer");let uh=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Pl,this.reject=Pl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(dl(d))o.push(d);else if($v(d)){const f=new Promise((v,D)=>{d.subscribe({complete:v,error:D})});o.push(f)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(L(oa,8))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const v0=new Hn("AppId",{providedIn:"root",factory:function vp(){return`${ch()}${ch()}${ch()}`}});function ch(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const E0=new Hn("Platform Initializer"),jy=new Hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lh=new Hn("appBootstrapListener");let Nl=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Ep=new Hn("LocaleId",{providedIn:"root",factory:()=>Ie(Ep,rt.Optional|rt.SkipSelf)||function $y(){return typeof $localize<"u"&&$localize.locale||fc}()}),kw=new Hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Gy{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}let Uw=(()=>{class r{compileModuleSync(o){return new oi(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),d=Ma(Tn(o).declarations).reduce((f,v)=>{const D=De(v);return D&&f.push(new Ki(D)),f},[]);return new Gy(u,d)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Wy=(()=>Promise.resolve(0))();function dh(r){typeof Zone>"u"?Wy.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class vi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fs(!1),this.onMicrotaskEmpty=new fs(!1),this.onStable=new fs(!1),this.onError=new fs(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const d=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new d("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function kl(){let r=tn.requestAnimationFrame,s=tn.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function w0(r){const s=()=>{!function Ll(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(tn,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Mu(r),r.isCheckStableRunning=!0,Au(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Mu(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,f,v)=>{try{return b0(r),o.invokeTask(l,d,f,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&s(),T0(r)}},onInvoke:(o,u,l,d,f,v,D)=>{try{return b0(r),o.invoke(l,d,f,v,D)}finally{r.shouldCoalesceRunChangeDetection&&s(),T0(r)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,Mu(r),Au(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vi.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(vi.isInAngularZone())throw new me(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,f=d.scheduleEventTask("NgZoneEvent: "+l,s,Ky,Pl,Pl);try{return d.runTask(f,o,u)}finally{d.cancelTask(f)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Ky={};function Au(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Mu(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function b0(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function T0(r){r._nesting--,Au(r)}class qy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fs,this.onMicrotaskEmpty=new fs,this.onStable=new fs,this.onError=new fs}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const Dp=new Hn(""),wp=new Hn("");let hh,Yy=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,hh||(function Vw(r){hh=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vi.assertNotInAngularZone(),dh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dh(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(f=>f.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return r.\u0275fac=function(o){return new(o||r)(L(vi),L(C0),L(wp))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac}),r})(),C0=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return hh?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),aa=null;const S0=new Hn("AllowMultipleToken"),bp=new Hn("PlatformDestroyListeners");class x0{constructor(s,o){this.name=s,this.token=o}}function Tp(r,s,o=[]){const u=`Platform: ${s}`,l=new Hn(u);return(d=[])=>{let f=fh();if(!f||f.injector.get(S0,!1)){const v=[...o,...d,{provide:l,useValue:!0}];r?r(v):function $w(r){if(aa&&!aa.get(S0,!1))throw new me(400,!1);aa=r;const s=r.get(O0);(function R0(r){const s=r.get(E0,null);s&&s.forEach(o=>o())})(r)}(function Cp(r=[],s){return au.create({name:s,providers:[{provide:N_,useValue:"platform"},{provide:bp,useValue:new Set([()=>aa=null])},...r]})}(v,u))}return function Zy(r){const s=fh();if(!s)throw new me(401,!1);return s}()}}function fh(){return aa?.get(O0)??null}let O0=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function Qy(r,s){let o;return o="noop"===r?new qy:("zone.js"===r?void 0:r)||new vi(s),o}(u?.ngZone,function Sp(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),d=[{provide:vi,useValue:l}];return l.run(()=>{const f=au.create({providers:d,parent:this.injector,name:o.moduleType.name}),v=o.create(f),D=v.injector.get(Aa,null);if(!D)throw new me(402,!1);return l.runOutsideAngular(()=>{const R=l.onError.subscribe({next:B=>{D.handleError(B)}});v.onDestroy(()=>{Fl(this._modules,v),R.unsubscribe()})}),function Ap(r,s,o){try{const u=o();return dl(u)?u.catch(l=>{throw s.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(D,l,()=>{const R=v.injector.get(uh);return R.runInitializers(),R.donePromise.then(()=>(function ty(r){Ft(r,"Expected localeId to be defined"),"string"==typeof r&&(na=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Ep,fc)||fc),this._moduleDoBootstrap(v),v))})})}bootstrapModule(o,u=[]){const l=Xy({},u);return function A0(r,s,o){const u=new oi(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(Mp);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new me(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(bp,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(L(au))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function Xy(r,s){return Array.isArray(s)?s.reduce(Xy,r):{...r,...s}}let Mp=(()=>{class r{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const d=new F.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),f=new F.y(v=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{vi.assertNotInAngularZone(),dh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{vi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{D.unsubscribe(),R.unsubscribe()}});this.isStable=(0,z.T)(d,f.pipe((0,O.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof F_;if(!this._injector.get(uh).done)throw!l&&Jt(o),new me(405,false);let f;f=l?o:this._injector.get(Xl).resolveComponentFactory(o),this.componentTypes.push(f.componentType);const v=function M0(r){return r.isBoundToModule}(f)?void 0:this._injector.get(Cl),R=f.create(au.NULL,[],u||f.selector,v),B=R.location.nativeElement,Y=R.injector.get(Dp,null);return Y?.registerApplication(B),R.onDestroy(()=>{this.detachView(R.hostView),Fl(this.components,R),Y?.unregisterApplication(B)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Fl(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(lh,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Fl(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new me(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(L(vi),L(jc),L(Aa))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Fl(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}let N0=!0,xp=!1;function Hw(){return xp=!0,N0}function e_(){if(xp)throw new Error("Cannot enable prod mode after platform setup.");N0=!1}let F0=(()=>{class r{}return r.__NG_ELEMENT_ID__=t_,r})();function t_(r){return function zw(r,s,o){if(vr(r)&&!o){const u=Cn(r.index,s);return new Mo(u,u)}return 47&r.type?new Mo(s[16],s):null}(hr(),Qe(),16==(16&r))}class Lp{constructor(){}supports(s){return ta(s)}create(s){return new qw(s)}}const i_=(r,s)=>s;class qw{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||i_}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const f=!u||o&&o.currentIndex<Fp(u,l,d)?o:u,v=Fp(f,l,d),D=f.currentIndex;if(f===u)l--,u=u._nextRemoved;else if(o=o._next,null==f.previousIndex)l++;else{d||(d=[]);const R=v-l,B=D-l;if(R!=B){for(let fe=0;fe<R;fe++){const Ce=fe<d.length?d[fe]:d[fe]=0,Ge=Ce+fe;B<=Ge&&Ge<R&&(d[fe]=Ce+1)}d[f.previousIndex]=B-R}}v!==D&&s(f,v,D)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!ta(s))throw new me(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,f,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)d=s[v],f=this._trackByFn(v,d),null!==o&&Object.is(o.trackById,f)?(u&&(o=this._verifyReinsertion(o,d,f,v)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,f,v),u=!0),o=o._next}else l=0,function Rt(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[tt()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{f=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,f)?(u&&(o=this._verifyReinsertion(o,v,f,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,f,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new H0(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new z0),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new z0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class H0{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yw{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class z0{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Yw,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fp(r,s,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class Up{constructor(){}supports(s){return s instanceof Map||$t(s)}create(){return new Zw}}class Zw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||$t(s)))throw new me(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,f=l._next;return d&&(d._next=f),f&&(f._prev=d),l._next=null,l._prev=null,l}const u=new W0(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class W0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function s_(){return new Ul([new Lp])}let Ul=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||s_()),deps:[[r,new Jr,new Lt]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new me(901,!1)}}return r.\u0275prov=Qt({token:r,providedIn:"root",factory:s_}),r})();function o_(){return new Bp([new Up])}let Bp=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||o_()),deps:[[r,new Jr,new Lt]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new me(901,!1)}}return r.\u0275prov=Qt({token:r,providedIn:"root",factory:o_}),r})();const ns=Tp(null,"core",[]);let ua=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(L(Mp))},r.\u0275mod=Vt({type:r}),r.\u0275inj=sn({}),r})();function ET(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},1481:(le,k,E)=>{E.d(k,{Dx:()=>En,b2:()=>Ii,q6:()=>qr});var m=E(6895),M=E(4650);class F extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class z extends F{static makeCurrent(){(0,m.HT)(new z)}onAndCancel(X,Z,be){return X.addEventListener(Z,be,!1),()=>{X.removeEventListener(Z,be,!1)}}dispatchEvent(X,Z){X.dispatchEvent(Z)}remove(X){X.parentNode&&X.parentNode.removeChild(X)}createElement(X,Z){return(Z=Z||this.getDefaultDocument()).createElement(X)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(X){return X.nodeType===Node.ELEMENT_NODE}isShadowRoot(X){return X instanceof DocumentFragment}getGlobalEventTarget(X,Z){return"window"===Z?window:"document"===Z?X:"body"===Z?X.body:null}getBaseHref(X){const Z=function W(){return O=O||document.querySelector("base"),O?O.getAttribute("href"):null}();return null==Z?null:function Q(ue){ee=ee||document.createElement("a"),ee.setAttribute("href",ue);const X=ee.pathname;return"/"===X.charAt(0)?X:`/${X}`}(Z)}resetBaseElement(){O=null}getUserAgent(){return window.navigator.userAgent}getCookie(X){return(0,m.Mx)(document.cookie,X)}}let ee,O=null;const K=new M.OlP("TRANSITION_ID"),H=[{provide:M.ip1,useFactory:function G(ue,X,Z){return()=>{Z.get(M.CZH).donePromise.then(()=>{const be=(0,m.q)(),je=X.querySelectorAll(`style[ng-transition="${ue}"]`);for(let dt=0;dt<je.length;dt++)be.remove(je[dt])})}},deps:[K,m.K0,M.zs3],multi:!0}];let ye=(()=>{class ue{build(){return new XMLHttpRequest}}return ue.\u0275fac=function(Z){return new(Z||ue)},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const ve=new M.OlP("EventManagerPlugins");let me=(()=>{class ue{constructor(Z,be){this._zone=be,this._eventNameToPlugin=new Map,Z.forEach(je=>je.manager=this),this._plugins=Z.slice().reverse()}addEventListener(Z,be,je){return this._findPluginFor(be).addEventListener(Z,be,je)}addGlobalEventListener(Z,be,je){return this._findPluginFor(be).addGlobalEventListener(Z,be,je)}getZone(){return this._zone}_findPluginFor(Z){const be=this._eventNameToPlugin.get(Z);if(be)return be;const je=this._plugins;for(let dt=0;dt<je.length;dt++){const Yt=je[dt];if(Yt.supports(Z))return this._eventNameToPlugin.set(Z,Yt),Yt}throw new Error(`No event manager plugin found for event ${Z}`)}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(ve),M.LFG(M.R0b))},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class Ue{constructor(X){this._doc=X}addGlobalEventListener(X,Z,be){const je=(0,m.q)().getGlobalEventTarget(this._doc,X);if(!je)throw new Error(`Unsupported event target ${je} for event ${Z}`);return this.addEventListener(je,Z,be)}}let we=(()=>{class ue{constructor(){this._stylesSet=new Set}addStyles(Z){const be=new Set;Z.forEach(je=>{this._stylesSet.has(je)||(this._stylesSet.add(je),be.add(je))}),this.onStylesAdded(be)}onStylesAdded(Z){}getAllStyles(){return Array.from(this._stylesSet)}}return ue.\u0275fac=function(Z){return new(Z||ue)},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})(),Ee=(()=>{class ue extends we{constructor(Z){super(),this._doc=Z,this._hostNodes=new Map,this._hostNodes.set(Z.head,[])}_addStylesToHost(Z,be,je){Z.forEach(dt=>{const Yt=this._doc.createElement("style");Yt.textContent=dt,je.push(be.appendChild(Yt))})}addHost(Z){const be=[];this._addStylesToHost(this._stylesSet,Z,be),this._hostNodes.set(Z,be)}removeHost(Z){const be=this._hostNodes.get(Z);be&&be.forEach(We),this._hostNodes.delete(Z)}onStylesAdded(Z){this._hostNodes.forEach((be,je)=>{this._addStylesToHost(Z,je,be)})}ngOnDestroy(){this._hostNodes.forEach(Z=>Z.forEach(We))}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(m.K0))},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})();function We(ue){(0,m.q)().remove(ue)}const ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pe=/%COMP%/g;function pe(ue,X,Z){for(let be=0;be<X.length;be++){let je=X[be];Array.isArray(je)?pe(ue,je,Z):(je=je.replace(Pe,ue),Z.push(je))}return Z}function ne(ue){return X=>{if("__ngUnwrap__"===X)return ue;!1===ue(X)&&(X.preventDefault(),X.returnValue=!1)}}let _e=(()=>{class ue{constructor(Z,be,je){this.eventManager=Z,this.sharedStylesHost=be,this.appId=je,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(Z)}createRenderer(Z,be){if(!Z||!be)return this.defaultRenderer;switch(be.encapsulation){case M.ifc.Emulated:{let je=this.rendererByCompId.get(be.id);return je||(je=new Ft(this.eventManager,this.sharedStylesHost,be,this.appId),this.rendererByCompId.set(be.id,je)),je.applyToHost(Z),je}case 1:case M.ifc.ShadowDom:return new at(this.eventManager,this.sharedStylesHost,Z,be);default:if(!this.rendererByCompId.has(be.id)){const je=pe(be.id,be.styles,[]);this.sharedStylesHost.addStyles(je),this.rendererByCompId.set(be.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(me),M.LFG(Ee),M.LFG(M.AFp))},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class Ze{constructor(X){this.eventManager=X,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(X,Z){return Z?document.createElementNS(ot[Z]||Z,X):document.createElement(X)}createComment(X){return document.createComment(X)}createText(X){return document.createTextNode(X)}appendChild(X,Z){(rn(X)?X.content:X).appendChild(Z)}insertBefore(X,Z,be){X&&(rn(X)?X.content:X).insertBefore(Z,be)}removeChild(X,Z){X&&X.removeChild(Z)}selectRootElement(X,Z){let be="string"==typeof X?document.querySelector(X):X;if(!be)throw new Error(`The selector "${X}" did not match any elements`);return Z||(be.textContent=""),be}parentNode(X){return X.parentNode}nextSibling(X){return X.nextSibling}setAttribute(X,Z,be,je){if(je){Z=je+":"+Z;const dt=ot[je];dt?X.setAttributeNS(dt,Z,be):X.setAttribute(Z,be)}else X.setAttribute(Z,be)}removeAttribute(X,Z,be){if(be){const je=ot[be];je?X.removeAttributeNS(je,Z):X.removeAttribute(`${be}:${Z}`)}else X.removeAttribute(Z)}addClass(X,Z){X.classList.add(Z)}removeClass(X,Z){X.classList.remove(Z)}setStyle(X,Z,be,je){je&(M.JOm.DashCase|M.JOm.Important)?X.style.setProperty(Z,be,je&M.JOm.Important?"important":""):X.style[Z]=be}removeStyle(X,Z,be){be&M.JOm.DashCase?X.style.removeProperty(Z):X.style[Z]=""}setProperty(X,Z,be){X[Z]=be}setValue(X,Z){X.nodeValue=Z}listen(X,Z,be){return"string"==typeof X?this.eventManager.addGlobalEventListener(X,Z,ne(be)):this.eventManager.addEventListener(X,Z,ne(be))}}function rn(ue){return"TEMPLATE"===ue.tagName&&void 0!==ue.content}class Ft extends Ze{constructor(X,Z,be,je){super(X),this.component=be;const dt=pe(je+"-"+be.id,be.styles,[]);Z.addStyles(dt),this.contentAttr=function Be(ue){return"_ngcontent-%COMP%".replace(Pe,ue)}(je+"-"+be.id),this.hostAttr=function Ke(ue){return"_nghost-%COMP%".replace(Pe,ue)}(je+"-"+be.id)}applyToHost(X){super.setAttribute(X,this.hostAttr,"")}createElement(X,Z){const be=super.createElement(X,Z);return super.setAttribute(be,this.contentAttr,""),be}}class at extends Ze{constructor(X,Z,be,je){super(X),this.sharedStylesHost=Z,this.hostEl=be,this.shadowRoot=be.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const dt=pe(je.id,je.styles,[]);for(let Yt=0;Yt<dt.length;Yt++){const Zt=document.createElement("style");Zt.textContent=dt[Yt],this.shadowRoot.appendChild(Zt)}}nodeOrShadowRoot(X){return X===this.hostEl?this.shadowRoot:X}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(X,Z){return super.appendChild(this.nodeOrShadowRoot(X),Z)}insertBefore(X,Z,be){return super.insertBefore(this.nodeOrShadowRoot(X),Z,be)}removeChild(X,Z){return super.removeChild(this.nodeOrShadowRoot(X),Z)}parentNode(X){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(X)))}}let dn=(()=>{class ue extends Ue{constructor(Z){super(Z)}supports(Z){return!0}addEventListener(Z,be,je){return Z.addEventListener(be,je,!1),()=>this.removeEventListener(Z,be,je)}removeEventListener(Z,be,je){return Z.removeEventListener(be,je)}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(m.K0))},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const Sn=["alt","control","meta","shift"],qt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qt={alt:ue=>ue.altKey,control:ue=>ue.ctrlKey,meta:ue=>ue.metaKey,shift:ue=>ue.shiftKey};let Ct=(()=>{class ue extends Ue{constructor(Z){super(Z)}supports(Z){return null!=ue.parseEventName(Z)}addEventListener(Z,be,je){const dt=ue.parseEventName(be),Yt=ue.eventCallback(dt.fullKey,je,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(Z,dt.domEventName,Yt))}static parseEventName(Z){const be=Z.toLowerCase().split("."),je=be.shift();if(0===be.length||"keydown"!==je&&"keyup"!==je)return null;const dt=ue._normalizeKey(be.pop());let Yt="",Zt=be.indexOf("code");if(Zt>-1&&(be.splice(Zt,1),Yt="code."),Sn.forEach(ui=>{const Pt=be.indexOf(ui);Pt>-1&&(be.splice(Pt,1),Yt+=ui+".")}),Yt+=dt,0!=be.length||0===dt.length)return null;const or={};return or.domEventName=je,or.fullKey=Yt,or}static matchEventFullKeyCode(Z,be){let je=qt[Z.key]||Z.key,dt="";return be.indexOf("code.")>-1&&(je=Z.code,dt="code."),!(null==je||!je)&&(je=je.toLowerCase()," "===je?je="space":"."===je&&(je="dot"),Sn.forEach(Yt=>{Yt!==je&&(0,Qt[Yt])(Z)&&(dt+=Yt+".")}),dt+=je,dt===be)}static eventCallback(Z,be,je){return dt=>{ue.matchEventFullKeyCode(dt,Z)&&je.runGuarded(()=>be(dt))}}static _normalizeKey(Z){return"esc"===Z?"escape":Z}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(m.K0))},ue.\u0275prov=M.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const qr=(0,M.eFA)(M._c5,"browser",[{provide:M.Lbi,useValue:m.bD},{provide:M.g9A,useValue:function rr(){z.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function ir(){return(0,M.RDi)(document),document},deps:[]}]),gn=new M.OlP(""),rt=[{provide:M.rWj,useClass:class te{addToWindow(X){M.dqk.getAngularTestability=(be,je=!0)=>{const dt=X.findTestabilityInTree(be,je);if(null==dt)throw new Error("Could not find testability for element.");return dt},M.dqk.getAllAngularTestabilities=()=>X.getAllTestabilities(),M.dqk.getAllAngularRootElements=()=>X.getAllRootElements(),M.dqk.frameworkStabilizers||(M.dqk.frameworkStabilizers=[]),M.dqk.frameworkStabilizers.push(be=>{const je=M.dqk.getAllAngularTestabilities();let dt=je.length,Yt=!1;const Zt=function(or){Yt=Yt||or,dt--,0==dt&&be(Yt)};je.forEach(function(or){or.whenStable(Zt)})})}findTestabilityInTree(X,Z,be){return null==Z?null:X.getTestability(Z)??(be?(0,m.q)().isShadowRoot(Z)?this.findTestabilityInTree(X,Z.host,!0):this.findTestabilityInTree(X,Z.parentElement,!0):null)}},deps:[]},{provide:M.lri,useClass:M.dDg,deps:[M.R0b,M.eoX,M.rWj]},{provide:M.dDg,useClass:M.dDg,deps:[M.R0b,M.eoX,M.rWj]}],Pn=[{provide:M.zSh,useValue:"root"},{provide:M.qLn,useFactory:function xr(){return new M.qLn},deps:[]},{provide:ve,useClass:dn,multi:!0,deps:[m.K0,M.R0b,M.Lbi]},{provide:ve,useClass:Ct,multi:!0,deps:[m.K0]},{provide:_e,useClass:_e,deps:[me,Ee,M.AFp]},{provide:M.FYo,useExisting:_e},{provide:we,useExisting:Ee},{provide:Ee,useClass:Ee,deps:[m.K0]},{provide:me,useClass:me,deps:[ve,M.R0b]},{provide:m.JF,useClass:ye,deps:[]},[]];let Ii=(()=>{class ue{constructor(Z){}static withServerTransition(Z){return{ngModule:ue,providers:[{provide:M.AFp,useValue:Z.appId},{provide:K,useExisting:M.AFp},H]}}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(gn,12))},ue.\u0275mod=M.oAB({type:ue}),ue.\u0275inj=M.cJS({providers:[...Pn,...rt],imports:[m.ez,M.hGG]}),ue})(),En=(()=>{class ue{constructor(Z){this._doc=Z}getTitle(){return this._doc.title}setTitle(Z){this._doc.title=Z||""}}return ue.\u0275fac=function(Z){return new(Z||ue)(M.LFG(m.K0))},ue.\u0275prov=M.Yz7({token:ue,factory:function(Z){let be=null;return be=Z?new Z:function Un(){return new En((0,M.LFG)(m.K0))}(),be},providedIn:"root"}),ue})();typeof window<"u"&&window},1869:(le,k,E)=>{E.d(k,{F0:()=>Ir,rH:()=>Ja,Bz:()=>eu,lC:()=>da});var m=E(4650),M=E(8996),F=E(9646),z=E(1135);const W=(0,E(3888).d)(y=>function(){y(this),this.name="EmptyError",this.message="no elements in sequence"});var ee=E(1577),Q=E(7272),K=E(9770),G=E(9635),H=E(2843),te=E(9751),ye=E(515),ve=E(4033),me=E(7579),Ue=E(6895),we=E(4004),Ee=E(3900),We=E(5698),ot=E(8675),Pe=E(9300),Se=E(5577),Le=E(4482),nt=E(5403);function _t(y){return(0,Le.e)((_,p)=>{let w=!1;_.subscribe((0,nt.x)(p,S=>{w=!0,p.next(S)},()=>{w||p.next(y),p.complete()}))})}function Be(y=Ke){return(0,Le.e)((_,p)=>{let w=!1;_.subscribe((0,nt.x)(p,S=>{w=!0,p.next(S)},()=>w?p.complete():p.error(y())))})}function Ke(){return new W}var pe=E(4671);function ne(y,_){const p=arguments.length>=2;return w=>w.pipe(y?(0,Pe.h)((S,U)=>y(S,U,w)):pe.y,(0,We.q)(1),p?_t(_):Be(()=>new W))}var Ae=E(4351),_e=E(8505),Ze=E(262),Xe=E(5026);function wt(y){return y<=0?()=>ye.E:(0,Le.e)((_,p)=>{let w=[];_.subscribe((0,nt.x)(p,S=>{w.push(S),y<w.length&&w.shift()},()=>{for(const S of w)p.next(S);p.complete()},void 0,()=>{w=null}))})}function rn(y,_){const p=arguments.length>=2;return w=>w.pipe(y?(0,Pe.h)((S,U)=>y(S,U,w)):pe.y,wt(1),p?_t(_):Be(()=>new W))}var at=E(9718);function dn(y){return(0,Le.e)((_,p)=>{try{_.subscribe(p)}finally{p.add(y)}})}var Sn=E(8343),qt=E(8189),Qt=E(1481);const Ct="primary",sn=Symbol("RouteTitle");class Br{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const p=this.params[_];return Array.isArray(p)?p[0]:p}return null}getAll(_){if(this.has(_)){const p=this.params[_];return Array.isArray(p)?p:[p]}return[]}get keys(){return Object.keys(this.params)}}function yr(y){return new Br(y)}function hn(y,_,p){const w=p.path.split("/");if(w.length>y.length||"full"===p.pathMatch&&(_.hasChildren()||w.length<y.length))return null;const S={};for(let U=0;U<w.length;U++){const J=w[U],ae=y[U];if(J.startsWith(":"))S[J.substring(1)]=ae;else if(J!==ae.path)return null}return{consumed:y.slice(0,w.length),posParams:S}}function rr(y,_){const p=y?Object.keys(y):void 0,w=_?Object.keys(_):void 0;if(!p||!w||p.length!=w.length)return!1;let S;for(let U=0;U<p.length;U++)if(S=p[U],!xr(y[S],_[S]))return!1;return!0}function xr(y,_){if(Array.isArray(y)&&Array.isArray(_)){if(y.length!==_.length)return!1;const p=[...y].sort(),w=[..._].sort();return p.every((S,U)=>w[U]===S)}return y===_}function ir(y){return Array.prototype.concat.apply([],y)}function xn(y){return y.length>0?y[y.length-1]:null}function gn(y,_){for(const p in y)y.hasOwnProperty(p)&&_(y[p],p)}function rt(y){return(0,m.CqO)(y)?y:(0,m.QGY)(y)?(0,M.D)(Promise.resolve(y)):(0,F.of)(y)}const qn={exact:function En(y,_,p){if(!sr(y.segments,_.segments)||!tn(y.segments,_.segments,p)||y.numberOfChildren!==_.numberOfChildren)return!1;for(const w in _.children)if(!y.children[w]||!En(y.children[w],_.children[w],p))return!1;return!0},subset:vt},dr={exact:function Un(y,_){return rr(y,_)},subset:function wn(y,_){return Object.keys(_).length<=Object.keys(y).length&&Object.keys(_).every(p=>xr(y[p],_[p]))},ignored:()=>!0};function Yr(y,_,p){return qn[p.paths](y.root,_.root,p.matrixParams)&&dr[p.queryParams](y.queryParams,_.queryParams)&&!("exact"===p.fragment&&y.fragment!==_.fragment)}function vt(y,_,p){return St(y,_,_.segments,p)}function St(y,_,p,w){if(y.segments.length>p.length){const S=y.segments.slice(0,p.length);return!(!sr(S,p)||_.hasChildren()||!tn(S,p,w))}if(y.segments.length===p.length){if(!sr(y.segments,p)||!tn(y.segments,p,w))return!1;for(const S in _.children)if(!y.children[S]||!vt(y.children[S],_.children[S],w))return!1;return!0}{const S=p.slice(0,y.segments.length),U=p.slice(y.segments.length);return!!(sr(y.segments,S)&&tn(y.segments,S,w)&&y.children[Ct])&&St(y.children[Ct],_,U,w)}}function tn(y,_,p){return _.every((w,S)=>dr[p](y[S].parameters,w.parameters))}class Jn{constructor(_,p,w){this.root=_,this.queryParams=p,this.fragment=w}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yr(this.queryParams)),this._queryParamMap}toString(){return bn.serialize(this)}}class mt{constructor(_,p){this.segments=_,this.children=p,this.parent=null,gn(p,(w,S)=>w.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gn(this)}}class er{constructor(_,p){this.path=_,this.parameters=p}get parameterMap(){return this._parameterMap||(this._parameterMap=yr(this.parameters)),this._parameterMap}toString(){return se(this)}}function sr(y,_){return y.length===_.length&&y.every((p,w)=>p.path===_[w].path)}let Rr=(()=>{class y{}return y.\u0275fac=function(p){return new(p||y)},y.\u0275prov=m.Yz7({token:y,factory:function(){return new Xt},providedIn:"root"}),y})();class Xt{parse(_){const p=new ue(_);return new Jn(p.parseRootSegment(),p.parseQueryParams(),p.parseFragment())}serialize(_){const p=`/${lt(_.root,!0)}`,w=function ze(y){const _=Object.keys(y).map(p=>{const w=y[p];return Array.isArray(w)?w.map(S=>`${yt(p)}=${yt(S)}`).join("&"):`${yt(p)}=${yt(w)}`}).filter(p=>!!p);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${p}${w}${"string"==typeof _.fragment?`#${function Nt(y){return encodeURI(y)}(_.fragment)}`:""}`}}const bn=new Xt;function Gn(y){return y.segments.map(_=>se(_)).join("/")}function lt(y,_){if(!y.hasChildren())return Gn(y);if(_){const p=y.children[Ct]?lt(y.children[Ct],!1):"",w=[];return gn(y.children,(S,U)=>{U!==Ct&&w.push(`${U}:${lt(S,!1)}`)}),w.length>0?`${p}(${w.join("//")})`:p}{const p=function In(y,_){let p=[];return gn(y.children,(w,S)=>{S===Ct&&(p=p.concat(_(w,S)))}),gn(y.children,(w,S)=>{S!==Ct&&(p=p.concat(_(w,S)))}),p}(y,(w,S)=>S===Ct?[lt(y.children[Ct],!1)]:[`${S}:${lt(w,!1)}`]);return 1===Object.keys(y.children).length&&null!=y.children[Ct]?`${Gn(y)}/${p[0]}`:`${Gn(y)}/(${p.join("//")})`}}function He(y){return encodeURIComponent(y).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yt(y){return He(y).replace(/%3B/gi,";")}function kt(y){return He(y).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vt(y){return decodeURIComponent(y)}function de(y){return Vt(y.replace(/\+/g,"%20"))}function se(y){return`${kt(y.path)}${function ge(y){return Object.keys(y).map(_=>`;${kt(_)}=${kt(y[_])}`).join("")}(y.parameters)}`}const De=/^[^\/()?;=#]+/;function st(y){const _=y.match(De);return _?_[0]:""}const Dt=/^[^=?&#]+/,Tn=/^[^&#]+/;class ue{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let p={};this.peekStartsWith("/(")&&(this.capture("/"),p=this.parseParens(!0));let w={};return this.peekStartsWith("(")&&(w=this.parseParens(!1)),(_.length>0||Object.keys(p).length>0)&&(w[Ct]=new mt(_,p)),w}parseSegment(){const _=st(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(_),new er(Vt(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const p=st(this.remaining);if(!p)return;this.capture(p);let w="";if(this.consumeOptional("=")){const S=st(this.remaining);S&&(w=S,this.capture(w))}_[Vt(p)]=Vt(w)}parseQueryParam(_){const p=function Jt(y){const _=y.match(Dt);return _?_[0]:""}(this.remaining);if(!p)return;this.capture(p);let w="";if(this.consumeOptional("=")){const J=function nn(y){const _=y.match(Tn);return _?_[0]:""}(this.remaining);J&&(w=J,this.capture(w))}const S=de(p),U=de(w);if(_.hasOwnProperty(S)){let J=_[S];Array.isArray(J)||(J=[J],_[S]=J),J.push(U)}else _[S]=U}parseParens(_){const p={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const w=st(this.remaining),S=this.remaining[w.length];if("/"!==S&&")"!==S&&";"!==S)throw new m.vHH(4010,!1);let U;w.indexOf(":")>-1?(U=w.slice(0,w.indexOf(":")),this.capture(U),this.capture(":")):_&&(U=Ct);const J=this.parseChildren();p[U]=1===Object.keys(J).length?J[Ct]:new mt([],J),this.consumeOptional("//")}return p}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new m.vHH(4011,!1)}}function X(y){return y.segments.length>0?new mt([],{[Ct]:y}):y}function Z(y){const _={};for(const w of Object.keys(y.children)){const U=Z(y.children[w]);(U.segments.length>0||U.hasChildren())&&(_[w]=U)}return function be(y){if(1===y.numberOfChildren&&y.children[Ct]){const _=y.children[Ct];return new mt(y.segments.concat(_.segments),_.children)}return y}(new mt(y.segments,_))}function je(y){return y instanceof Jn}function ui(y,_,p,w,S){if(0===p.length)return Qr(_.root,_.root,_.root,w,S);const U=function Yn(y){if("string"==typeof y[0]&&1===y.length&&"/"===y[0])return new Nn(!0,0,y);let _=0,p=!1;const w=y.reduce((S,U,J)=>{if("object"==typeof U&&null!=U){if(U.outlets){const ae={};return gn(U.outlets,(Ne,ct)=>{ae[ct]="string"==typeof Ne?Ne.split("/"):Ne}),[...S,{outlets:ae}]}if(U.segmentPath)return[...S,U.segmentPath]}return"string"!=typeof U?[...S,U]:0===J?(U.split("/").forEach((ae,Ne)=>{0==Ne&&"."===ae||(0==Ne&&""===ae?p=!0:".."===ae?_++:""!=ae&&S.push(ae))}),S):[...S,U]},[]);return new Nn(p,_,w)}(p);return U.toRoot()?Qr(_.root,_.root,new mt([],{}),w,S):function J(Ne){const ct=function Or(y,_,p,w){if(y.isAbsolute)return new wr(_.root,!0,0);if(-1===w)return new wr(p,p===_.root,0);return function tr(y,_,p){let w=y,S=_,U=p;for(;U>S;){if(U-=S,w=w.parent,!w)throw new m.vHH(4005,!1);S=w.segments.length}return new wr(w,!1,S-U)}(p,w+(Pt(y.commands[0])?0:1),y.numberOfDoubleDots)}(U,_,y.snapshot?._urlSegment,Ne),cn=ct.processChildren?ci(ct.segmentGroup,ct.index,U.commands):Dn(ct.segmentGroup,ct.index,U.commands);return Qr(_.root,ct.segmentGroup,cn,w,S)}(y.snapshot?._lastPathIndex)}function Pt(y){return"object"==typeof y&&null!=y&&!y.outlets&&!y.segmentPath}function Zr(y){return"object"==typeof y&&null!=y&&y.outlets}function Qr(y,_,p,w,S){let J,U={};w&&gn(w,(Ne,ct)=>{U[ct]=Array.isArray(Ne)?Ne.map(cn=>`${cn}`):`${Ne}`}),J=y===_?p:ps(y,_,p);const ae=X(Z(J));return new Jn(ae,U,S)}function ps(y,_,p){const w={};return gn(y.children,(S,U)=>{w[U]=S===_?p:ps(S,_,p)}),new mt(y.segments,w)}class Nn{constructor(_,p,w){if(this.isAbsolute=_,this.numberOfDoubleDots=p,this.commands=w,_&&w.length>0&&Pt(w[0]))throw new m.vHH(4003,!1);const S=w.find(Zr);if(S&&S!==xn(w))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wr{constructor(_,p,w){this.segmentGroup=_,this.processChildren=p,this.index=w}}function Dn(y,_,p){if(y||(y=new mt([],{})),0===y.segments.length&&y.hasChildren())return ci(y,_,p);const w=function rs(y,_,p){let w=0,S=_;const U={match:!1,pathIndex:0,commandIndex:0};for(;S<y.segments.length;){if(w>=p.length)return U;const J=y.segments[S],ae=p[w];if(Zr(ae))break;const Ne=`${ae}`,ct=w<p.length-1?p[w+1]:null;if(S>0&&void 0===Ne)break;if(Ne&&ct&&"object"==typeof ct&&void 0===ct.outlets){if(!wi(Ne,ct,J))return U;w+=2}else{if(!wi(Ne,{},J))return U;w++}S++}return{match:!0,pathIndex:S,commandIndex:w}}(y,_,p),S=p.slice(w.commandIndex);if(w.match&&w.pathIndex<y.segments.length){const U=new mt(y.segments.slice(0,w.pathIndex),{});return U.children[Ct]=new mt(y.segments.slice(w.pathIndex),y.children),ci(U,0,S)}return w.match&&0===S.length?new mt(y.segments,{}):w.match&&!y.hasChildren()?Di(y,_,p):w.match?ci(y,0,S):Di(y,_,p)}function ci(y,_,p){if(0===p.length)return new mt(y.segments,{});{const w=function Qs(y){return Zr(y[0])?y[0].outlets:{[Ct]:y}}(p),S={};return gn(w,(U,J)=>{"string"==typeof U&&(U=[U]),null!==U&&(S[J]=Dn(y.children[J],_,U))}),gn(y.children,(U,J)=>{void 0===w[J]&&(S[J]=U)}),new mt(y.segments,S)}}function Di(y,_,p){const w=y.segments.slice(0,_);let S=0;for(;S<p.length;){const U=p[S];if(Zr(U)){const Ne=li(U.outlets);return new mt(w,Ne)}if(0===S&&Pt(p[0])){w.push(new er(y.segments[_].path,qi(p[0]))),S++;continue}const J=Zr(U)?U.outlets[Ct]:`${U}`,ae=S<p.length-1?p[S+1]:null;J&&ae&&Pt(ae)?(w.push(new er(J,qi(ae))),S+=2):(w.push(new er(J,{})),S++)}return new mt(w,{})}function li(y){const _={};return gn(y,(p,w)=>{"string"==typeof p&&(p=[p]),null!==p&&(_[w]=Di(new mt([],{}),0,p))}),_}function qi(y){const _={};return gn(y,(p,w)=>_[w]=`${p}`),_}function wi(y,_,p){return y==p.path&&rr(_,p.parameters)}class _r{constructor(_,p){this.id=_,this.url=p}}class $n extends _r{constructor(_,p,w="imperative",S=null){super(_,p),this.type=0,this.navigationTrigger=w,this.restoredState=S}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class di extends _r{constructor(_,p,w){super(_,p),this.urlAfterRedirects=w,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kn extends _r{constructor(_,p,w,S){super(_,p),this.reason=w,this.code=S,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jr extends _r{constructor(_,p,w,S){super(_,p),this.error=w,this.target=S,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yi extends _r{constructor(_,p,w,S){super(_,p),this.urlAfterRedirects=w,this.state=S,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends _r{constructor(_,p,w,S){super(_,p),this.urlAfterRedirects=w,this.state=S,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zi extends _r{constructor(_,p,w,S,U){super(_,p),this.urlAfterRedirects=w,this.state=S,this.shouldActivate=U,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Er extends _r{constructor(_,p,w,S){super(_,p),this.urlAfterRedirects=w,this.state=S,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gs extends _r{constructor(_,p,w,S){super(_,p),this.urlAfterRedirects=w,this.state=S,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class No{constructor(_){this.route=_,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ps{constructor(_){this.route=_,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oe{constructor(_){this.snapshot=_,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N{constructor(_){this.snapshot=_,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ${constructor(_){this.snapshot=_,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q{constructor(_){this.snapshot=_,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class he{constructor(_,p,w){this.routerEvent=_,this.position=p,this.anchor=w,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $e{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const p=this.pathFromRoot(_);return p.length>1?p[p.length-2]:null}children(_){const p=gt(_,this._root);return p?p.children.map(w=>w.value):[]}firstChild(_){const p=gt(_,this._root);return p&&p.children.length>0?p.children[0].value:null}siblings(_){const p=Bt(_,this._root);return p.length<2?[]:p[p.length-2].children.map(S=>S.value).filter(S=>S!==_)}pathFromRoot(_){return Bt(_,this._root).map(p=>p.value)}}function gt(y,_){if(y===_.value)return _;for(const p of _.children){const w=gt(y,p);if(w)return w}return null}function Bt(y,_){if(y===_.value)return[_];for(const p of _.children){const w=Bt(y,p);if(w.length)return w.unshift(_),w}return[]}class Mt{constructor(_,p){this.value=_,this.children=p}toString(){return`TreeNode(${this.value})`}}function yn(y){const _={};return y&&y.children.forEach(p=>_[p.value.outlet]=p),_}class un extends $e{constructor(_,p){super(_),this.snapshot=p,ko(this,_)}toString(){return this.snapshot.toString()}}function nr(y,_){const p=function Ui(y,_){const J=new Ti([],{},{},"",{},Ct,_,null,y.root,-1,{});return new Ci("",new Mt(J,[]))}(y,_),w=new z.X([new er("",{})]),S=new z.X({}),U=new z.X({}),J=new z.X({}),ae=new z.X(""),Ne=new Rn(w,S,J,ae,U,Ct,_,p.root);return Ne.snapshot=p.root,new un(new Mt(Ne,[]),p)}class Rn{constructor(_,p,w,S,U,J,ae,Ne){this.url=_,this.params=p,this.queryParams=w,this.fragment=S,this.data=U,this.outlet=J,this.component=ae,this.title=this.data?.pipe((0,we.U)(ct=>ct[sn]))??(0,F.of)(void 0),this._futureSnapshot=Ne}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,we.U)(_=>yr(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,we.U)(_=>yr(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pr(y,_="emptyOnly"){const p=y.pathFromRoot;let w=0;if("always"!==_)for(w=p.length-1;w>=1;){const S=p[w],U=p[w-1];if(S.routeConfig&&""===S.routeConfig.path)w--;else{if(U.component)break;w--}}return function bi(y){return y.reduce((_,p)=>({params:{..._.params,...p.params},data:{..._.data,...p.data},resolve:{...p.data,..._.resolve,...p.routeConfig?.data,...p._resolvedData}}),{params:{},data:{},resolve:{}})}(p.slice(w))}class Ti{constructor(_,p,w,S,U,J,ae,Ne,ct,cn,Tt,Bn){this.url=_,this.params=p,this.queryParams=w,this.fragment=S,this.data=U,this.outlet=J,this.component=ae,this.title=this.data?.[sn],this.routeConfig=Ne,this._urlSegment=ct,this._lastPathIndex=cn,this._correctedLastPathIndex=Bn??cn,this._resolve=Tt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(w=>w.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ci extends $e{constructor(_,p){super(p),this.url=_,ko(this,p)}toString(){return is(this._root)}}function ko(y,_){_.value._routerState=y,_.children.forEach(p=>ko(y,p))}function is(y){const _=y.children.length>0?` { ${y.children.map(is).join(", ")} } `:"";return`${y.value}${_}`}function Xs(y){if(y.snapshot){const _=y.snapshot,p=y._futureSnapshot;y.snapshot=p,rr(_.queryParams,p.queryParams)||y.queryParams.next(p.queryParams),_.fragment!==p.fragment&&y.fragment.next(p.fragment),rr(_.params,p.params)||y.params.next(p.params),function pn(y,_){if(y.length!==_.length)return!1;for(let p=0;p<y.length;++p)if(!rr(y[p],_[p]))return!1;return!0}(_.url,p.url)||y.url.next(p.url),rr(_.data,p.data)||y.data.next(p.data)}else y.snapshot=y._futureSnapshot,y.data.next(y._futureSnapshot.data)}function po(y,_){const p=rr(y.params,_.params)&&function bt(y,_){return sr(y,_)&&y.every((p,w)=>rr(p.parameters,_[w].parameters))}(y.url,_.url);return p&&!(!y.parent!=!_.parent)&&(!y.parent||po(y.parent,_.parent))}function ti(y,_,p){if(p&&y.shouldReuseRoute(_.value,p.value.snapshot)){const w=p.value;w._futureSnapshot=_.value;const S=function la(y,_,p){return _.children.map(w=>{for(const S of p.children)if(y.shouldReuseRoute(w.value,S.value.snapshot))return ti(y,w,S);return ti(y,w)})}(y,_,p);return new Mt(w,S)}{if(y.shouldAttach(_.value)){const U=y.retrieve(_.value);if(null!==U){const J=U.route;return J.value._futureSnapshot=_.value,J.children=_.children.map(ae=>ti(y,ae)),J}}const w=function go(y){return new Rn(new z.X(y.url),new z.X(y.params),new z.X(y.queryParams),new z.X(y.fragment),new z.X(y.data),y.outlet,y.component,y)}(_.value),S=_.children.map(U=>ti(y,U));return new Mt(w,S)}}const ja="ngNavigationCancelingError";function Cc(y,_){const{redirectTo:p,navigationBehaviorOptions:w}=je(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,S=ss(!1,0,_);return S.url=p,S.navigationBehaviorOptions=w,S}function ss(y,_,p){const w=new Error("NavigationCancelingError: "+(y||""));return w[ja]=!0,w.cancellationCode=_,p&&(w.url=p),w}function Qi(y){return Nr(y)&&je(y.url)}function Nr(y){return y&&y[ja]}class mo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ns,this.attachRef=null}}let Ns=(()=>{class y{constructor(){this.contexts=new Map}onChildOutletCreated(p,w){const S=this.getOrCreateContext(p);S.outlet=w,this.contexts.set(p,S)}onChildOutletDestroyed(p){const w=this.getContext(p);w&&(w.outlet=null,w.attachRef=null)}onOutletDeactivated(){const p=this.contexts;return this.contexts=new Map,p}onOutletReAttached(p){this.contexts=p}getOrCreateContext(p){let w=this.getContext(p);return w||(w=new mo,this.contexts.set(p,w)),w}getContext(p){return this.contexts.get(p)||null}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275prov=m.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const yo=!1;let da=(()=>{class y{constructor(p,w,S,U,J){this.parentContexts=p,this.location=w,this.changeDetector=U,this.environmentInjector=J,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=S||Ct,p.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const p=this.parentContexts.getContext(this.name);p&&p.route&&(p.attachRef?this.attach(p.attachRef,p.route):this.activateWith(p.route,p.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,yo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,yo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,yo);this.location.detach();const p=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(p.instance),p}attach(p,w){this.activated=p,this._activatedRoute=w,this.location.insert(p.hostView),this.attachEvents.emit(p.instance)}deactivate(){if(this.activated){const p=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(p)}}activateWith(p,w){if(this.isActivated)throw new m.vHH(4013,yo);this._activatedRoute=p;const S=this.location,J=p._futureSnapshot.component,ae=this.parentContexts.getOrCreateContext(this.name).children,Ne=new ha(p,ae,S.injector);if(w&&function On(y){return!!y.resolveComponentFactory}(w)){const ct=w.resolveComponentFactory(J);this.activated=S.createComponent(ct,S.length,Ne)}else this.activated=S.createComponent(J,{index:S.length,injector:Ne,environmentInjector:w??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return y.\u0275fac=function(p){return new(p||y)(m.Y36(Ns),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},y.\u0275dir=m.lG2({type:y,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),y})();class ha{constructor(_,p,w){this.route=_,this.childContexts=p,this.parent=w}get(_,p){return _===Rn?this.route:_===Ns?this.childContexts:this.parent.get(_,p)}}let Lo=(()=>{class y{}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=m.Xpm({type:y,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(p,w){1&p&&m._UZ(0,"router-outlet")},dependencies:[da],encapsulation:2}),y})();function Sc(y,_){return y.providers&&!y._injector&&(y._injector=(0,m.MMx)(y.providers,_,`Route: ${y.path}`)),y._injector??_}function ks(y){const _=y.children&&y.children.map(ks),p=_?{...y,children:_}:{...y};return!p.component&&!p.loadComponent&&(_||p.loadChildren)&&p.outlet&&p.outlet!==Ct&&(p.component=Lo),p}function ar(y){return y.outlet||Ct}function Bo(y,_){const p=y.filter(w=>ar(w)===_);return p.push(...y.filter(w=>ar(w)!==_)),p}function Zn(y){if(!y)return null;if(y.routeConfig?._injector)return y.routeConfig._injector;for(let _=y.parent;_;_=_.parent){const p=_.routeConfig;if(p?._loadedInjector)return p._loadedInjector;if(p?._injector)return p._injector}return null}class _o{constructor(_,p,w,S){this.routeReuseStrategy=_,this.futureState=p,this.currState=w,this.forwardEvent=S}activate(_){const p=this.futureState._root,w=this.currState?this.currState._root:null;this.deactivateChildRoutes(p,w,_),Xs(this.futureState.root),this.activateChildRoutes(p,w,_)}deactivateChildRoutes(_,p,w){const S=yn(p);_.children.forEach(U=>{const J=U.value.outlet;this.deactivateRoutes(U,S[J],w),delete S[J]}),gn(S,(U,J)=>{this.deactivateRouteAndItsChildren(U,w)})}deactivateRoutes(_,p,w){const S=_.value,U=p?p.value:null;if(S===U)if(S.component){const J=w.getContext(S.outlet);J&&this.deactivateChildRoutes(_,p,J.children)}else this.deactivateChildRoutes(_,p,w);else U&&this.deactivateRouteAndItsChildren(p,w)}deactivateRouteAndItsChildren(_,p){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,p):this.deactivateRouteAndOutlet(_,p)}detachAndStoreRouteSubtree(_,p){const w=p.getContext(_.value.outlet),S=w&&_.value.component?w.children:p,U=yn(_);for(const J of Object.keys(U))this.deactivateRouteAndItsChildren(U[J],S);if(w&&w.outlet){const J=w.outlet.detach(),ae=w.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:J,route:_,contexts:ae})}}deactivateRouteAndOutlet(_,p){const w=p.getContext(_.value.outlet),S=w&&_.value.component?w.children:p,U=yn(_);for(const J of Object.keys(U))this.deactivateRouteAndItsChildren(U[J],S);w&&w.outlet&&(w.outlet.deactivate(),w.children.onOutletDeactivated(),w.attachRef=null,w.resolver=null,w.route=null)}activateChildRoutes(_,p,w){const S=yn(p);_.children.forEach(U=>{this.activateRoutes(U,S[U.value.outlet],w),this.forwardEvent(new q(U.value.snapshot))}),_.children.length&&this.forwardEvent(new N(_.value.snapshot))}activateRoutes(_,p,w){const S=_.value,U=p?p.value:null;if(Xs(S),S===U)if(S.component){const J=w.getOrCreateContext(S.outlet);this.activateChildRoutes(_,p,J.children)}else this.activateChildRoutes(_,p,w);else if(S.component){const J=w.getOrCreateContext(S.outlet);if(this.routeReuseStrategy.shouldAttach(S.snapshot)){const ae=this.routeReuseStrategy.retrieve(S.snapshot);this.routeReuseStrategy.store(S.snapshot,null),J.children.onOutletReAttached(ae.contexts),J.attachRef=ae.componentRef,J.route=ae.route.value,J.outlet&&J.outlet.attach(ae.componentRef,ae.route.value),Xs(ae.route.value),this.activateChildRoutes(_,null,J.children)}else{const ae=Zn(S.snapshot),Ne=ae?.get(m._Vd)??null;J.attachRef=null,J.route=S,J.resolver=Ne,J.injector=ae,J.outlet&&J.outlet.activateWith(S,J.injector),this.activateChildRoutes(_,null,J.children)}}else this.activateChildRoutes(_,null,w)}}class Ga{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class _s{constructor(_,p){this.component=_,this.route=p}}function Ha(y,_,p){const w=y._root;return os(w,_?_._root:null,p,[w.value])}function Ai(y,_){const p=Symbol(),w=_.get(y,p);return w===p?"function"!=typeof y||(0,m.Z0I)(y)?_.get(y):y:w}function os(y,_,p,w,S={canDeactivateChecks:[],canActivateChecks:[]}){const U=yn(_);return y.children.forEach(J=>{(function fa(y,_,p,w,S={canDeactivateChecks:[],canActivateChecks:[]}){const U=y.value,J=_?_.value:null,ae=p?p.getContext(y.value.outlet):null;if(J&&U.routeConfig===J.routeConfig){const Ne=function Qe(y,_,p){if("function"==typeof p)return p(y,_);switch(p){case"pathParamsChange":return!sr(y.url,_.url);case"pathParamsOrQueryParamsChange":return!sr(y.url,_.url)||!rr(y.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!po(y,_)||!rr(y.queryParams,_.queryParams);default:return!po(y,_)}}(J,U,U.routeConfig.runGuardsAndResolvers);Ne?S.canActivateChecks.push(new Ga(w)):(U.data=J.data,U._resolvedData=J._resolvedData),os(y,_,U.component?ae?ae.children:null:p,w,S),Ne&&ae&&ae.outlet&&ae.outlet.isActivated&&S.canDeactivateChecks.push(new _s(ae.outlet.component,J))}else J&&fn(_,ae,S),S.canActivateChecks.push(new Ga(w)),os(y,null,U.component?ae?ae.children:null:p,w,S)})(J,U[J.value.outlet],p,w.concat([J.value]),S),delete U[J.value.outlet]}),gn(U,(J,ae)=>fn(J,p.getContext(ae),S)),S}function fn(y,_,p){const w=yn(y),S=y.value;gn(w,(U,J)=>{fn(U,S.component?_?_.children.getContext(J):null:_,p)}),p.canDeactivateChecks.push(new _s(S.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,S))}function Ls(y){return"function"==typeof y}function Us(y){return y instanceof W||"EmptyError"===y?.name}const ga=Symbol("INITIAL_VALUE");function Mi(){return(0,Ee.w)(y=>(0,ee.a)(y.map(_=>_.pipe((0,We.q)(1),(0,ot.O)(ga)))).pipe((0,we.U)(_=>{for(const p of _)if(!0!==p){if(p===ga)return ga;if(!1===p||p instanceof Jn)return p}return!0}),(0,Pe.h)(_=>_!==ga),(0,We.q)(1)))}function Vs(y){return(0,G.z)((0,_e.b)(_=>{if(je(_))throw Cc(0,_)}),(0,we.U)(_=>!0===_))}const js={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ya(y,_,p,w,S){const U=$s(y,_,p);return U.matched?function ma(y,_,p,w){const S=_.canMatch;if(!S||0===S.length)return(0,F.of)(!0);const U=S.map(J=>{const ae=Ai(J,y);return rt(function za(y){return y&&Ls(y.canMatch)}(ae)?ae.canMatch(_,p):y.runInContext(()=>ae(_,p)))});return(0,F.of)(U).pipe(Mi(),Vs())}(w=Sc(_,w),_,p).pipe((0,we.U)(J=>!0===J?U:{...js})):(0,F.of)(U)}function $s(y,_,p){if(""===_.path)return"full"===_.pathMatch&&(y.hasChildren()||p.length>0)?{...js}:{matched:!0,consumedSegments:[],remainingSegments:p,parameters:{},positionalParamSegments:{}};const S=(_.matcher||hn)(p,y,_);if(!S)return{...js};const U={};gn(S.posParams,(ae,Ne)=>{U[Ne]=ae.path});const J=S.consumed.length>0?{...U,...S.consumed[S.consumed.length-1].parameters}:U;return{matched:!0,consumedSegments:S.consumed,remainingSegments:p.slice(S.consumed.length),parameters:J,positionalParamSegments:S.posParams??{}}}function Vo(y,_,p,w,S="corrected"){if(p.length>0&&function Do(y,_,p){return p.some(w=>I(y,_,w)&&ar(w)!==Ct)}(y,p,w)){const J=new mt(_,function xc(y,_,p,w){const S={};S[Ct]=w,w._sourceSegment=y,w._segmentIndexShift=_.length;for(const U of p)if(""===U.path&&ar(U)!==Ct){const J=new mt([],{});J._sourceSegment=y,J._segmentIndexShift=_.length,S[ar(U)]=J}return S}(y,_,w,new mt(p,y.children)));return J._sourceSegment=y,J._segmentIndexShift=_.length,{segmentGroup:J,slicedSegments:[]}}if(0===p.length&&function Ru(y,_,p){return p.some(w=>I(y,_,w))}(y,p,w)){const J=new mt(y.segments,function eo(y,_,p,w,S,U){const J={};for(const ae of w)if(I(y,p,ae)&&!S[ar(ae)]){const Ne=new mt([],{});Ne._sourceSegment=y,Ne._segmentIndexShift="legacy"===U?y.segments.length:_.length,J[ar(ae)]=Ne}return{...S,...J}}(y,_,p,w,y.children,S));return J._sourceSegment=y,J._segmentIndexShift=_.length,{segmentGroup:J,slicedSegments:p}}const U=new mt(y.segments,y.children);return U._sourceSegment=y,U._segmentIndexShift=_.length,{segmentGroup:U,slicedSegments:p}}function I(y,_,p){return(!(y.hasChildren()||_.length>0)||"full"!==p.pathMatch)&&""===p.path}function P(y,_,p,w){return!!(ar(y)===w||w!==Ct&&I(_,p,y))&&("**"===y.path||$s(_,y,p).matched)}function C(y,_,p){return 0===_.length&&!y.children[p]}const V=!1;class ce{constructor(_){this.segmentGroup=_||null}}class Me{constructor(_){this.urlTree=_}}function Fe(y){return(0,H._)(new ce(y))}function Et(y){return(0,H._)(new Me(y))}class _n{constructor(_,p,w,S,U){this.injector=_,this.configLoader=p,this.urlSerializer=w,this.urlTree=S,this.config=U,this.allowRedirects=!0}apply(){const _=Vo(this.urlTree.root,[],[],this.config).segmentGroup,p=new mt(_.segments,_.children);return this.expandSegmentGroup(this.injector,this.config,p,Ct).pipe((0,we.U)(U=>this.createUrlTree(Z(U),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ze.K)(U=>{if(U instanceof Me)return this.allowRedirects=!1,this.match(U.urlTree);throw U instanceof ce?this.noMatchError(U):U}))}match(_){return this.expandSegmentGroup(this.injector,this.config,_.root,Ct).pipe((0,we.U)(S=>this.createUrlTree(Z(S),_.queryParams,_.fragment))).pipe((0,Ze.K)(S=>{throw S instanceof ce?this.noMatchError(S):S}))}noMatchError(_){return new m.vHH(4002,V)}createUrlTree(_,p,w){const S=X(_);return new Jn(S,p,w)}expandSegmentGroup(_,p,w,S){return 0===w.segments.length&&w.hasChildren()?this.expandChildren(_,p,w).pipe((0,we.U)(U=>new mt([],U))):this.expandSegment(_,w,p,w.segments,S,!0)}expandChildren(_,p,w){const S=[];for(const U of Object.keys(w.children))"primary"===U?S.unshift(U):S.push(U);return(0,M.D)(S).pipe((0,Ae.b)(U=>{const J=w.children[U],ae=Bo(p,U);return this.expandSegmentGroup(_,ae,J,U).pipe((0,we.U)(Ne=>({segment:Ne,outlet:U})))}),(0,Xe.R)((U,J)=>(U[J.outlet]=J.segment,U),{}),rn())}expandSegment(_,p,w,S,U,J){return(0,M.D)(w).pipe((0,Ae.b)(ae=>this.expandSegmentAgainstRoute(_,p,w,ae,S,U,J).pipe((0,Ze.K)(ct=>{if(ct instanceof ce)return(0,F.of)(null);throw ct}))),ne(ae=>!!ae),(0,Ze.K)((ae,Ne)=>{if(Us(ae))return C(p,S,U)?(0,F.of)(new mt([],{})):Fe(p);throw ae}))}expandSegmentAgainstRoute(_,p,w,S,U,J,ae){return P(S,p,U,J)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(_,p,S,U,J):ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,p,w,S,U,J):Fe(p):Fe(p)}expandSegmentAgainstRouteUsingRedirect(_,p,w,S,U,J){return"**"===S.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,w,S,J):this.expandRegularSegmentAgainstRouteUsingRedirect(_,p,w,S,U,J)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,p,w,S){const U=this.applyRedirectCommands([],w.redirectTo,{});return w.redirectTo.startsWith("/")?Et(U):this.lineralizeSegments(w,U).pipe((0,Se.z)(J=>{const ae=new mt(J,{});return this.expandSegment(_,ae,p,J,S,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,p,w,S,U,J){const{matched:ae,consumedSegments:Ne,remainingSegments:ct,positionalParamSegments:cn}=$s(p,S,U);if(!ae)return Fe(p);const Tt=this.applyRedirectCommands(Ne,S.redirectTo,cn);return S.redirectTo.startsWith("/")?Et(Tt):this.lineralizeSegments(S,Tt).pipe((0,Se.z)(Bn=>this.expandSegment(_,p,w,Bn.concat(ct),J,!1)))}matchSegmentAgainstRoute(_,p,w,S,U){return"**"===w.path?(_=Sc(w,_),w.loadChildren?(w._loadedRoutes?(0,F.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):this.configLoader.loadChildren(_,w)).pipe((0,we.U)(ae=>(w._loadedRoutes=ae.routes,w._loadedInjector=ae.injector,new mt(S,{})))):(0,F.of)(new mt(S,{}))):ya(p,w,S,_).pipe((0,Ee.w)(({matched:J,consumedSegments:ae,remainingSegments:Ne})=>J?this.getChildConfig(_=w._injector??_,w,S).pipe((0,Se.z)(cn=>{const Tt=cn.injector??_,Bn=cn.routes,{segmentGroup:ji,slicedSegments:oo}=Vo(p,ae,Ne,Bn),us=new mt(ji.segments,ji.children);if(0===oo.length&&us.hasChildren())return this.expandChildren(Tt,Bn,us).pipe((0,we.U)(Da=>new mt(ae,Da)));if(0===Bn.length&&0===oo.length)return(0,F.of)(new mt(ae,{}));const Ri=ar(w)===U;return this.expandSegment(Tt,us,Bn,oo,Ri?Ct:U,!0).pipe((0,we.U)(bs=>new mt(ae.concat(bs.segments),bs.children)))})):Fe(p)))}getChildConfig(_,p,w){return p.children?(0,F.of)({routes:p.children,injector:_}):p.loadChildren?void 0!==p._loadedRoutes?(0,F.of)({routes:p._loadedRoutes,injector:p._loadedInjector}):function Mc(y,_,p,w){const S=_.canLoad;if(void 0===S||0===S.length)return(0,F.of)(!0);const U=S.map(J=>{const ae=Ai(J,y);return rt(function hr(y){return y&&Ls(y.canLoad)}(ae)?ae.canLoad(_,p):y.runInContext(()=>ae(_,p)))});return(0,F.of)(U).pipe(Mi(),Vs())}(_,p,w).pipe((0,Se.z)(S=>S?this.configLoader.loadChildren(_,p).pipe((0,_e.b)(U=>{p._loadedRoutes=U.routes,p._loadedInjector=U.injector})):function Ln(y){return(0,H._)(ss(V,3))}())):(0,F.of)({routes:[],injector:_})}lineralizeSegments(_,p){let w=[],S=p.root;for(;;){if(w=w.concat(S.segments),0===S.numberOfChildren)return(0,F.of)(w);if(S.numberOfChildren>1||!S.children[Ct])return(0,H._)(new m.vHH(4e3,V));S=S.children[Ct]}}applyRedirectCommands(_,p,w){return this.applyRedirectCreateUrlTree(p,this.urlSerializer.parse(p),_,w)}applyRedirectCreateUrlTree(_,p,w,S){const U=this.createSegmentGroup(_,p.root,w,S);return new Jn(U,this.createQueryParams(p.queryParams,this.urlTree.queryParams),p.fragment)}createQueryParams(_,p){const w={};return gn(_,(S,U)=>{if("string"==typeof S&&S.startsWith(":")){const ae=S.substring(1);w[U]=p[ae]}else w[U]=S}),w}createSegmentGroup(_,p,w,S){const U=this.createSegments(_,p.segments,w,S);let J={};return gn(p.children,(ae,Ne)=>{J[Ne]=this.createSegmentGroup(_,ae,w,S)}),new mt(U,J)}createSegments(_,p,w,S){return p.map(U=>U.path.startsWith(":")?this.findPosParam(_,U,S):this.findOrReturn(U,w))}findPosParam(_,p,w){const S=w[p.path.substring(1)];if(!S)throw new m.vHH(4001,V);return S}findOrReturn(_,p){let w=0;for(const S of p){if(S.path===_.path)return p.splice(w),S;w++}return _}}class fr{}class Vi{constructor(_,p,w,S,U,J,ae,Ne){this.injector=_,this.rootComponentType=p,this.config=w,this.urlTree=S,this.url=U,this.paramsInheritanceStrategy=J,this.relativeLinkResolution=ae,this.urlSerializer=Ne}recognize(){const _=Vo(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,_,Ct).pipe((0,we.U)(p=>{if(null===p)return null;const w=new Ti([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),S=new Mt(w,p),U=new Ci(this.url,S);return this.inheritParamsAndData(U._root),U}))}inheritParamsAndData(_){const p=_.value,w=Pr(p,this.paramsInheritanceStrategy);p.params=Object.freeze(w.params),p.data=Object.freeze(w.data),_.children.forEach(S=>this.inheritParamsAndData(S))}processSegmentGroup(_,p,w,S){return 0===w.segments.length&&w.hasChildren()?this.processChildren(_,p,w):this.processSegment(_,p,w,w.segments,S)}processChildren(_,p,w){return(0,M.D)(Object.keys(w.children)).pipe((0,Ae.b)(S=>{const U=w.children[S],J=Bo(p,S);return this.processSegmentGroup(_,J,U,S)}),(0,Xe.R)((S,U)=>S&&U?(S.push(...U),S):null),function Ft(y,_=!1){return(0,Le.e)((p,w)=>{let S=0;p.subscribe((0,nt.x)(w,U=>{const J=y(U,S++);(J||_)&&w.next(U),!J&&w.complete()}))})}(S=>null!==S),_t(null),rn(),(0,we.U)(S=>{if(null===S)return null;const U=Ka(S);return function Gs(y){y.sort((_,p)=>_.value.outlet===Ct?-1:p.value.outlet===Ct?1:_.value.outlet.localeCompare(p.value.outlet))}(U),U}))}processSegment(_,p,w,S,U){return(0,M.D)(p).pipe((0,Ae.b)(J=>this.processSegmentAgainstRoute(J._injector??_,J,w,S,U)),ne(J=>!!J),(0,Ze.K)(J=>{if(Us(J))return C(w,S,U)?(0,F.of)([]):(0,F.of)(null);throw J}))}processSegmentAgainstRoute(_,p,w,S,U){if(p.redirectTo||!P(p,w,S,U))return(0,F.of)(null);let J;if("**"===p.path){const ae=S.length>0?xn(S).parameters:{},Ne=as(w)+S.length,ct=new Ti(S,ae,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Gl(p),ar(p),p.component??p._loadedComponent??null,p,cr(w),Ne,Hl(p),Ne);J=(0,F.of)({snapshot:ct,consumedSegments:[],remainingSegments:[]})}else J=ya(w,p,S,_).pipe((0,we.U)(({matched:ae,consumedSegments:Ne,remainingSegments:ct,parameters:cn})=>{if(!ae)return null;const Tt=as(w)+Ne.length;return{snapshot:new Ti(Ne,cn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Gl(p),ar(p),p.component??p._loadedComponent??null,p,cr(w),Tt,Hl(p),Tt),consumedSegments:Ne,remainingSegments:ct}}));return J.pipe((0,Ee.w)(ae=>{if(null===ae)return(0,F.of)(null);const{snapshot:Ne,consumedSegments:ct,remainingSegments:cn}=ae;_=p._injector??_;const Tt=p._loadedInjector??_,Bn=function Xi(y){return y.children?y.children:y.loadChildren?y._loadedRoutes:[]}(p),{segmentGroup:ji,slicedSegments:oo}=Vo(w,ct,cn,Bn.filter(Ri=>void 0===Ri.redirectTo),this.relativeLinkResolution);if(0===oo.length&&ji.hasChildren())return this.processChildren(Tt,Bn,ji).pipe((0,we.U)(Ri=>null===Ri?null:[new Mt(Ne,Ri)]));if(0===Bn.length&&0===oo.length)return(0,F.of)([new Mt(Ne,[])]);const us=ar(p)===U;return this.processSegment(Tt,Bn,ji,oo,us?Ct:U).pipe((0,we.U)(Ri=>null===Ri?null:[new Mt(Ne,Ri)]))}))}}function to(y){const _=y.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Ka(y){const _=[],p=new Set;for(const w of y){if(!to(w)){_.push(w);continue}const S=_.find(U=>w.value.routeConfig===U.value.routeConfig);void 0!==S?(S.children.push(...w.children),p.add(S)):_.push(w)}for(const w of p){const S=Ka(w.children);_.push(new Mt(w.value,S))}return _.filter(w=>!p.has(w))}function cr(y){let _=y;for(;_._sourceSegment;)_=_._sourceSegment;return _}function as(y){let _=y,p=_._segmentIndexShift??0;for(;_._sourceSegment;)_=_._sourceSegment,p+=_._segmentIndexShift??0;return p-1}function Gl(y){return y.data||{}}function Hl(y){return y.resolve||{}}function Oc(y){return"string"==typeof y.title||null===y.title}function kr(y){return(0,Ee.w)(_=>{const p=y(_);return p?(0,M.D)(p).pipe((0,we.U)(()=>_)):(0,F.of)(_)})}let zl=(()=>{class y{buildTitle(p){let w,S=p.root;for(;void 0!==S;)w=this.getResolvedTitleForRoute(S)??w,S=S.children.find(U=>U.outlet===Ct);return w}getResolvedTitleForRoute(p){return p.data[sn]}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275prov=m.Yz7({token:y,factory:function(){return(0,m.f3M)($o)},providedIn:"root"}),y})(),$o=(()=>{class y extends zl{constructor(p){super(),this.title=p}updateTitle(p){const w=this.buildTitle(p);void 0!==w&&this.title.setTitle(w)}}return y.\u0275fac=function(p){return new(p||y)(m.LFG(Qt.Dx))},y.\u0275prov=m.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();class _a{}class Nu extends class zp{shouldDetach(_){return!1}store(_,p){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,p){return _.routeConfig===p.routeConfig}}{}const Lu=new m.OlP("",{providedIn:"root",factory:()=>({})}),Fu=new m.OlP("ROUTES");let Qn=(()=>{class y{constructor(p,w){this.injector=p,this.compiler=w,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(p){if(this.componentLoaders.get(p))return this.componentLoaders.get(p);if(p._loadedComponent)return(0,F.of)(p._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(p);const w=rt(p.loadComponent()).pipe((0,_e.b)(U=>{this.onLoadEndListener&&this.onLoadEndListener(p),p._loadedComponent=U}),dn(()=>{this.componentLoaders.delete(p)})),S=new ve.c(w,()=>new me.x).pipe((0,Sn.x)());return this.componentLoaders.set(p,S),S}loadChildren(p,w){if(this.childrenLoaders.get(w))return this.childrenLoaders.get(w);if(w._loadedRoutes)return(0,F.of)({routes:w._loadedRoutes,injector:w._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(w);const U=this.loadModuleFactoryOrRoutes(w.loadChildren).pipe((0,we.U)(ae=>{this.onLoadEndListener&&this.onLoadEndListener(w);let Ne,ct,cn=!1;Array.isArray(ae)?ct=ae:(Ne=ae.create(p).injector,ct=ir(Ne.get(Fu,[],m.XFs.Self|m.XFs.Optional)));return{routes:ct.map(ks),injector:Ne}}),dn(()=>{this.childrenLoaders.delete(w)})),J=new ve.c(U,()=>new me.x).pipe((0,Sn.x)());return this.childrenLoaders.set(w,J),J}loadModuleFactoryOrRoutes(p){return rt(p()).pipe((0,Se.z)(w=>w instanceof m.YKP||Array.isArray(w)?(0,F.of)(w):(0,M.D)(this.compiler.compileModuleAsync(w))))}}return y.\u0275fac=function(p){return new(p||y)(m.LFG(m.zs3),m.LFG(m.Sil))},y.\u0275prov=m.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();class Uu{}class Qa{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,p){return _}}function no(y){throw y}function Dh(y,_,p){return _.parse("/")}const Bu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ho(){const y=(0,m.f3M)(Rr),_=(0,m.f3M)(Ns),p=(0,m.f3M)(Ue.Ye),w=(0,m.f3M)(m.zs3),S=(0,m.f3M)(m.Sil),U=(0,m.f3M)(Fu,{optional:!0})??[],J=(0,m.f3M)(Lu,{optional:!0})??{},ae=(0,m.f3M)($o),Ne=(0,m.f3M)(zl,{optional:!0}),ct=(0,m.f3M)(Uu,{optional:!0}),cn=(0,m.f3M)(_a,{optional:!0}),Tt=new Ir(null,y,_,p,w,S,ir(U));return ct&&(Tt.urlHandlingStrategy=ct),cn&&(Tt.routeReuseStrategy=cn),Tt.titleStrategy=Ne??ae,function Xa(y,_){y.errorHandler&&(_.errorHandler=y.errorHandler),y.malformedUriErrorHandler&&(_.malformedUriErrorHandler=y.malformedUriErrorHandler),y.onSameUrlNavigation&&(_.onSameUrlNavigation=y.onSameUrlNavigation),y.paramsInheritanceStrategy&&(_.paramsInheritanceStrategy=y.paramsInheritanceStrategy),y.relativeLinkResolution&&(_.relativeLinkResolution=y.relativeLinkResolution),y.urlUpdateStrategy&&(_.urlUpdateStrategy=y.urlUpdateStrategy),y.canceledNavigationResolution&&(_.canceledNavigationResolution=y.canceledNavigationResolution)}(J,Tt),Tt}let Ir=(()=>{class y{constructor(p,w,S,U,J,ae,Ne){this.rootComponentType=p,this.urlSerializer=w,this.rootContexts=S,this.location=U,this.config=Ne,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new me.x,this.errorHandler=no,this.malformedUriErrorHandler=Dh,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,F.of)(void 0),this.urlHandlingStrategy=new Qa,this.routeReuseStrategy=new Nu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=J.get(Qn),this.configLoader.onLoadEndListener=Bn=>this.triggerEvent(new Ps(Bn)),this.configLoader.onLoadStartListener=Bn=>this.triggerEvent(new No(Bn)),this.ngModule=J.get(m.h0i),this.console=J.get(m.c2e);const Tt=J.get(m.R0b);this.isNgZoneEnabled=Tt instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(Ne),this.currentUrlTree=function Ii(){return new Jn(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=nr(this.currentUrlTree,this.rootComponentType),this.transitions=new z.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(p){const w=this.events;return p.pipe((0,Pe.h)(S=>0!==S.id),(0,we.U)(S=>({...S,extractedUrl:this.urlHandlingStrategy.extract(S.rawUrl)})),(0,Ee.w)(S=>{let U=!1,J=!1;return(0,F.of)(S).pipe((0,_e.b)(ae=>{this.currentNavigation={id:ae.id,initialUrl:ae.rawUrl,extractedUrl:ae.extractedUrl,trigger:ae.source,extras:ae.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ee.w)(ae=>{const Ne=this.browserUrlTree.toString(),ct=!this.navigated||ae.extractedUrl.toString()!==Ne||Ne!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ct)&&this.urlHandlingStrategy.shouldProcessUrl(ae.rawUrl))return Is(ae.source)&&(this.browserUrlTree=ae.extractedUrl),(0,F.of)(ae).pipe((0,Ee.w)(Tt=>{const Bn=this.transitions.getValue();return w.next(new $n(Tt.id,this.serializeUrl(Tt.extractedUrl),Tt.source,Tt.restoredState)),Bn!==this.transitions.getValue()?ye.E:Promise.resolve(Tt)}),function Tr(y,_,p,w){return(0,Ee.w)(S=>function An(y,_,p,w,S){return new _n(y,_,p,w,S).apply()}(y,_,p,S.extractedUrl,w).pipe((0,we.U)(U=>({...S,urlAfterRedirects:U}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_e.b)(Tt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Tt.urlAfterRedirects},S.urlAfterRedirects=Tt.urlAfterRedirects}),function Rc(y,_,p,w,S,U){return(0,Se.z)(J=>function Bi(y,_,p,w,S,U,J="emptyOnly",ae="legacy"){return new Vi(y,_,p,w,S,J,ae,U).recognize().pipe((0,Ee.w)(Ne=>null===Ne?function Es(y){return new te.y(_=>_.error(y))}(new fr):(0,F.of)(Ne)))}(y,_,p,J.urlAfterRedirects,w.serialize(J.urlAfterRedirects),w,S,U).pipe((0,we.U)(ae=>({...J,targetSnapshot:ae}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_e.b)(Tt=>{if(S.targetSnapshot=Tt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Tt.extras.skipLocationChange){const ji=this.urlHandlingStrategy.merge(Tt.urlAfterRedirects,Tt.rawUrl);this.setBrowserUrl(ji,Tt)}this.browserUrlTree=Tt.urlAfterRedirects}const Bn=new Yi(Tt.id,this.serializeUrl(Tt.extractedUrl),this.serializeUrl(Tt.urlAfterRedirects),Tt.targetSnapshot);w.next(Bn)}));if(ct&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Bn,extractedUrl:ji,source:oo,restoredState:us,extras:Ri}=ae,qu=new $n(Bn,this.serializeUrl(ji),oo,us);w.next(qu);const bs=nr(ji,this.rootComponentType).snapshot;return S={...ae,targetSnapshot:bs,urlAfterRedirects:ji,extras:{...Ri,skipLocationChange:!1,replaceUrl:!1}},(0,F.of)(S)}return this.rawUrlTree=ae.rawUrl,ae.resolve(null),ye.E}),(0,_e.b)(ae=>{const Ne=new vr(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot);this.triggerEvent(Ne)}),(0,we.U)(ae=>S={...ae,guards:Ha(ae.targetSnapshot,ae.currentSnapshot,this.rootContexts)}),function br(y,_){return(0,Se.z)(p=>{const{targetSnapshot:w,currentSnapshot:S,guards:{canActivateChecks:U,canDeactivateChecks:J}}=p;return 0===J.length&&0===U.length?(0,F.of)({...p,guardsResult:!0}):function xi(y,_,p,w){return(0,M.D)(y).pipe((0,Se.z)(S=>function jl(y,_,p,w,S){const U=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!U||0===U.length)return(0,F.of)(!0);const J=U.map(ae=>{const Ne=Zn(_)??S,ct=Ai(ae,Ne);return rt(function ni(y){return y&&Ls(y.canDeactivate)}(ct)?ct.canDeactivate(y,_,p,w):Ne.runInContext(()=>ct(y,_,p,w))).pipe(ne())});return(0,F.of)(J).pipe(Mi())}(S.component,S.route,p,_,w)),ne(S=>!0!==S,!0))}(J,w,S,y).pipe((0,Se.z)(ae=>ae&&function Js(y){return"boolean"==typeof y}(ae)?function Wa(y,_,p,w){return(0,M.D)(_).pipe((0,Ae.b)(S=>(0,Q.z)(function vs(y,_){return null!==y&&_&&_(new oe(y)),(0,F.of)(!0)}(S.route.parent,w),function Bs(y,_){return null!==y&&_&&_(new $(y)),(0,F.of)(!0)}(S.route,w),function Io(y,_,p){const w=_[_.length-1],U=_.slice(0,_.length-1).reverse().map(J=>function vo(y){const _=y.routeConfig?y.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:y,guards:_}:null}(J)).filter(J=>null!==J).map(J=>(0,K.P)(()=>{const ae=J.guards.map(Ne=>{const ct=Zn(J.node)??p,cn=Ai(Ne,ct);return rt(function pa(y){return y&&Ls(y.canActivateChild)}(cn)?cn.canActivateChild(w,y):ct.runInContext(()=>cn(w,y))).pipe(ne())});return(0,F.of)(ae).pipe(Mi())}));return(0,F.of)(U).pipe(Mi())}(y,S.path,p),function Vl(y,_,p){const w=_.routeConfig?_.routeConfig.canActivate:null;if(!w||0===w.length)return(0,F.of)(!0);const S=w.map(U=>(0,K.P)(()=>{const J=Zn(_)??p,ae=Ai(U,J);return rt(function Fs(y){return y&&Ls(y.canActivate)}(ae)?ae.canActivate(_,y):J.runInContext(()=>ae(_,y))).pipe(ne())}));return(0,F.of)(S).pipe(Mi())}(y,S.route,p))),ne(S=>!0!==S,!0))}(w,U,y,_):(0,F.of)(ae)),(0,we.U)(ae=>({...p,guardsResult:ae})))})}(this.ngModule.injector,ae=>this.triggerEvent(ae)),(0,_e.b)(ae=>{if(S.guardsResult=ae.guardsResult,je(ae.guardsResult))throw Cc(0,ae.guardsResult);const Ne=new Zi(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot,!!ae.guardsResult);this.triggerEvent(Ne)}),(0,Pe.h)(ae=>!!ae.guardsResult||(this.restoreHistory(ae),this.cancelNavigationTransition(ae,"",3),!1)),kr(ae=>{if(ae.guards.canActivateChecks.length)return(0,F.of)(ae).pipe((0,_e.b)(Ne=>{const ct=new Er(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot);this.triggerEvent(ct)}),(0,Ee.w)(Ne=>{let ct=!1;return(0,F.of)(Ne).pipe(function Ya(y,_){return(0,Se.z)(p=>{const{targetSnapshot:w,guards:{canActivateChecks:S}}=p;if(!S.length)return(0,F.of)(p);let U=0;return(0,M.D)(S).pipe((0,Ae.b)(J=>function jo(y,_,p,w){const S=y.routeConfig,U=y._resolve;return void 0!==S?.title&&!Oc(S)&&(U[sn]=S.title),function Za(y,_,p,w){const S=function Ou(y){return[...Object.keys(y),...Object.getOwnPropertySymbols(y)]}(y);if(0===S.length)return(0,F.of)({});const U={};return(0,M.D)(S).pipe((0,Se.z)(J=>function Pu(y,_,p,w){const S=Zn(_)??w,U=Ai(y,S);return rt(U.resolve?U.resolve(_,p):S.runInContext(()=>U(_,p)))}(y[J],_,p,w).pipe(ne(),(0,_e.b)(ae=>{U[J]=ae}))),wt(1),(0,at.h)(U),(0,Ze.K)(J=>Us(J)?ye.E:(0,H._)(J)))}(U,y,_,w).pipe((0,we.U)(J=>(y._resolvedData=J,y.data=Pr(y,p).resolve,S&&Oc(S)&&(y.data[sn]=S.title),null)))}(J.route,w,y,_)),(0,_e.b)(()=>U++),wt(1),(0,Se.z)(J=>U===S.length?(0,F.of)(p):ye.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_e.b)({next:()=>ct=!0,complete:()=>{ct||(this.restoreHistory(Ne),this.cancelNavigationTransition(Ne,"",2))}}))}),(0,_e.b)(Ne=>{const ct=new gs(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot);this.triggerEvent(ct)}))}),kr(ae=>{const Ne=ct=>{const cn=[];ct.routeConfig?.loadComponent&&!ct.routeConfig._loadedComponent&&cn.push(this.configLoader.loadComponent(ct.routeConfig).pipe((0,_e.b)(Tt=>{ct.component=Tt}),(0,we.U)(()=>{})));for(const Tt of ct.children)cn.push(...Ne(Tt));return cn};return(0,ee.a)(Ne(ae.targetSnapshot.root)).pipe(_t(),(0,We.q)(1))}),kr(()=>this.afterPreactivation()),(0,we.U)(ae=>{const Ne=function ca(y,_,p){const w=ti(y,_._root,p?p._root:void 0);return new un(w,_)}(this.routeReuseStrategy,ae.targetSnapshot,ae.currentRouterState);return S={...ae,targetRouterState:Ne}}),(0,_e.b)(ae=>{this.currentUrlTree=ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ae.urlAfterRedirects,ae.rawUrl),this.routerState=ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ae),this.browserUrlTree=ae.urlAfterRedirects)}),((y,_,p)=>(0,we.U)(w=>(new _o(_,w.targetRouterState,w.currentRouterState,p).activate(y),w)))(this.rootContexts,this.routeReuseStrategy,ae=>this.triggerEvent(ae)),(0,_e.b)({next(){U=!0},complete(){U=!0}}),dn(()=>{U||J||this.cancelNavigationTransition(S,"",1),this.currentNavigation?.id===S.id&&(this.currentNavigation=null)}),(0,Ze.K)(ae=>{if(J=!0,Nr(ae)){Qi(ae)||(this.navigated=!0,this.restoreHistory(S,!0));const Ne=new kn(S.id,this.serializeUrl(S.extractedUrl),ae.message,ae.cancellationCode);if(w.next(Ne),Qi(ae)){const ct=this.urlHandlingStrategy.merge(ae.url,this.rawUrlTree),cn={skipLocationChange:S.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Is(S.source)};this.scheduleNavigation(ct,"imperative",null,cn,{resolve:S.resolve,reject:S.reject,promise:S.promise})}else S.resolve(!1)}else{this.restoreHistory(S,!0);const Ne=new jr(S.id,this.serializeUrl(S.extractedUrl),ae,S.targetSnapshot??void 0);w.next(Ne);try{S.resolve(this.errorHandler(ae))}catch(ct){S.reject(ct)}}return ye.E}))}))}resetRootComponentType(p){this.rootComponentType=p,this.routerState.root.component=this.rootComponentType}setTransition(p){this.transitions.next({...this.transitions.value,...p})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(p=>{const w="popstate"===p.type?"popstate":"hashchange";"popstate"===w&&setTimeout(()=>{const S={replaceUrl:!0},U=p.state?.navigationId?p.state:null;if(U){const ae={...U};delete ae.navigationId,delete ae.\u0275routerPageId,0!==Object.keys(ae).length&&(S.state=ae)}const J=this.parseUrl(p.url);this.scheduleNavigation(J,w,U,S)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(p){this.events.next(p)}resetConfig(p){this.config=p.map(ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(p,w={}){const{relativeTo:S,queryParams:U,fragment:J,queryParamsHandling:ae,preserveFragment:Ne}=w,ct=S||this.routerState.root,cn=Ne?this.currentUrlTree.fragment:J;let Tt=null;switch(ae){case"merge":Tt={...this.currentUrlTree.queryParams,...U};break;case"preserve":Tt=this.currentUrlTree.queryParams;break;default:Tt=U||null}return null!==Tt&&(Tt=this.removeEmptyProps(Tt)),ui(ct,this.currentUrlTree,p,Tt,cn??null)}navigateByUrl(p,w={skipLocationChange:!1}){const S=je(p)?p:this.parseUrl(p),U=this.urlHandlingStrategy.merge(S,this.rawUrlTree);return this.scheduleNavigation(U,"imperative",null,w)}navigate(p,w={skipLocationChange:!1}){return function wo(y){for(let _=0;_<y.length;_++){if(null==y[_])throw new m.vHH(4008,false)}}(p),this.navigateByUrl(this.createUrlTree(p,w),w)}serializeUrl(p){return this.urlSerializer.serialize(p)}parseUrl(p){let w;try{w=this.urlSerializer.parse(p)}catch(S){w=this.malformedUriErrorHandler(S,this.urlSerializer,p)}return w}isActive(p,w){let S;if(S=!0===w?{...Bu}:!1===w?{...Vu}:w,je(p))return Yr(this.currentUrlTree,p,S);const U=this.parseUrl(p);return Yr(this.currentUrlTree,U,S)}removeEmptyProps(p){return Object.keys(p).reduce((w,S)=>{const U=p[S];return null!=U&&(w[S]=U),w},{})}processNavigations(){this.navigations.subscribe(p=>{this.navigated=!0,this.lastSuccessfulId=p.id,this.currentPageId=p.targetPageId,this.events.next(new di(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),p.resolve(!0)},p=>{this.console.warn(`Unhandled Navigation Error: ${p}`)})}scheduleNavigation(p,w,S,U,J){if(this.disposed)return Promise.resolve(!1);let ae,Ne,ct;J?(ae=J.resolve,Ne=J.reject,ct=J.promise):ct=new Promise((Bn,ji)=>{ae=Bn,Ne=ji});const cn=++this.navigationId;let Tt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(S=this.location.getState()),Tt=S&&S.\u0275routerPageId?S.\u0275routerPageId:U.replaceUrl||U.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Tt=0,this.setTransition({id:cn,targetPageId:Tt,source:w,restoredState:S,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:p,extras:U,resolve:ae,reject:Ne,promise:ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ct.catch(Bn=>Promise.reject(Bn))}setBrowserUrl(p,w){const S=this.urlSerializer.serialize(p),U={...w.extras.state,...this.generateNgRouterState(w.id,w.targetPageId)};this.location.isCurrentPathEqualTo(S)||w.extras.replaceUrl?this.location.replaceState(S,"",U):this.location.go(S,"",U)}restoreHistory(p,w=!1){if("computed"===this.canceledNavigationResolution){const S=this.currentPageId-p.targetPageId;"popstate"!==p.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===S?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===S&&(this.resetState(p),this.browserUrlTree=p.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(S)}else"replace"===this.canceledNavigationResolution&&(w&&this.resetState(p),this.resetUrlToCurrentUrlTree())}resetState(p){this.routerState=p.currentRouterState,this.currentUrlTree=p.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,p.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(p,w,S){const U=new kn(p.id,this.serializeUrl(p.extractedUrl),w,S);this.triggerEvent(U),p.resolve(!1)}generateNgRouterState(p,w){return"computed"===this.canceledNavigationResolution?{navigationId:p,\u0275routerPageId:w}:{navigationId:p}}}return y.\u0275fac=function(p){m.$Z()},y.\u0275prov=m.Yz7({token:y,factory:function(){return Ho()},providedIn:"root"}),y})();function Is(y){return"imperative"!==y}let Ja=(()=>{class y{constructor(p,w,S,U,J){this.router=p,this.route=w,this.tabIndexAttribute=S,this.renderer=U,this.el=J,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new me.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(p){this._preserveFragment=(0,m.D6c)(p)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(p){this._skipLocationChange=(0,m.D6c)(p)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(p){this._replaceUrl=(0,m.D6c)(p)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(p){if(null!=this.tabIndexAttribute)return;const w=this.renderer,S=this.el.nativeElement;null!==p?w.setAttribute(S,"tabindex",p):w.removeAttribute(S,"tabindex")}ngOnChanges(p){this.onChanges.next(this)}set routerLink(p){null!=p?(this.commands=Array.isArray(p)?p:[p],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return y.\u0275fac=function(p){return new(p||y)(m.Y36(Ir),m.Y36(Rn),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},y.\u0275dir=m.lG2({type:y,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(p,w){1&p&&m.NdJ("click",function(){return w.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),y})();class Pc{}let wh=(()=>{class y{constructor(p,w,S,U,J){this.router=p,this.injector=S,this.preloadingStrategy=U,this.loader=J}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.h)(p=>p instanceof di),(0,Ae.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(p,w){const S=[];for(const U of w){U.providers&&!U._injector&&(U._injector=(0,m.MMx)(U.providers,p,`Route: ${U.path}`));const J=U._injector??p,ae=U._loadedInjector??J;U.loadChildren&&!U._loadedRoutes&&void 0===U.canLoad||U.loadComponent&&!U._loadedComponent?S.push(this.preloadConfig(J,U)):(U.children||U._loadedRoutes)&&S.push(this.processRoutes(ae,U.children??U._loadedRoutes))}return(0,M.D)(S).pipe((0,qt.J)())}preloadConfig(p,w){return this.preloadingStrategy.preload(w,()=>{let S;S=w.loadChildren&&void 0===w.canLoad?this.loader.loadChildren(p,w):(0,F.of)(null);const U=S.pipe((0,Se.z)(J=>null===J?(0,F.of)(void 0):(w._loadedRoutes=J.routes,w._loadedInjector=J.injector,this.processRoutes(J.injector??p,J.routes))));if(w.loadComponent&&!w._loadedComponent){const J=this.loader.loadComponent(w);return(0,M.D)([U,J]).pipe((0,qt.J)())}return U})}}return y.\u0275fac=function(p){return new(p||y)(m.LFG(Ir),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(Pc),m.LFG(Qn))},y.\u0275prov=m.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const va=new m.OlP("");let Hu=(()=>{class y{constructor(p,w,S={}){this.router=p,this.viewportScroller=w,this.options=S,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},S.scrollPositionRestoration=S.scrollPositionRestoration||"disabled",S.anchorScrolling=S.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(p=>{p instanceof $n?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=p.navigationTrigger,this.restoredId=p.restoredState?p.restoredState.navigationId:0):p instanceof di&&(this.lastId=p.id,this.scheduleScrollEvent(p,this.router.parseUrl(p.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(p=>{p instanceof he&&(p.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(p.position):p.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(p.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(p,w){this.router.triggerEvent(new he(p,"popstate"===this.lastSource?this.store[this.restoredId]:null,w))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return y.\u0275fac=function(p){m.$Z()},y.\u0275prov=m.Yz7({token:y,factory:y.\u0275fac}),y})();function Ds(y,_){return{\u0275kind:y,\u0275providers:_}}function io(y){return[{provide:Fu,multi:!0,useValue:y}]}function ws(){const y=(0,m.f3M)(m.zs3);return _=>{const p=y.get(m.z2F);if(_!==p.components[0])return;const w=y.get(Ir),S=y.get(Ea);1===y.get(Hn)&&w.initialNavigation(),y.get(Kl,null,m.XFs.Optional)?.setUpPreloading(),y.get(va,null,m.XFs.Optional)?.init(),w.resetRootComponentType(p.componentTypes[0]),S.next(),S.complete()}}const Ea=new m.OlP("",{factory:()=>new me.x}),Hn=new m.OlP("",{providedIn:"root",factory:()=>1});const Kl=new m.OlP("");function Th(y){return Ds(0,[{provide:Kl,useExisting:wh},{provide:Pc,useExisting:y}])}const Ch=new m.OlP("ROUTER_FORROOT_GUARD"),Kp=[Ue.Ye,{provide:Rr,useClass:Xt},{provide:Ir,useFactory:Ho},Ns,{provide:Rn,useFactory:function ro(y){return y.routerState.root},deps:[Ir]},Qn];function Gr(){return new m.PXZ("Router",Ir)}let eu=(()=>{class y{constructor(p){}static forRoot(p,w){return{ngModule:y,providers:[Kp,[],io(p),{provide:Ch,useFactory:fi,deps:[[Ir,new m.FiY,new m.tp0]]},{provide:Lu,useValue:w||{}},w?.useHash?{provide:Ue.S$,useClass:Ue.Do}:{provide:Ue.S$,useClass:Ue.b0},{provide:va,useFactory:()=>{const y=(0,m.f3M)(Ir),_=(0,m.f3M)(Ue.EM),p=(0,m.f3M)(Lu);return p.scrollOffset&&_.setOffset(p.scrollOffset),new Hu(y,_,p)}},w?.preloadingStrategy?Th(w.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:Gr},w?.initialNavigation?so(w):[],[{provide:Ia,useFactory:ws},{provide:m.tb,multi:!0,useExisting:Ia}]]}}static forChild(p){return{ngModule:y,providers:[io(p)]}}}return y.\u0275fac=function(p){return new(p||y)(m.LFG(Ch,8))},y.\u0275mod=m.oAB({type:y}),y.\u0275inj=m.cJS({imports:[Lo]}),y})();function fi(y){return"guarded"}function so(y){return["disabled"===y.initialNavigation?Ds(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const _=(0,m.f3M)(Ir);return()=>{_.setUpLocationChangeListener()}}},{provide:Hn,useValue:2}]).\u0275providers:[],"enabledBlocking"===y.initialNavigation?Ds(2,[{provide:Hn,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:_=>{const p=_.get(Ue.V_,Promise.resolve());let w=!1;return()=>p.then(()=>new Promise(U=>{const J=_.get(Ir),ae=_.get(Ea);(function S(U){_.get(Ir).events.pipe((0,Pe.h)(ae=>ae instanceof di||ae instanceof kn||ae instanceof jr),(0,we.U)(ae=>ae instanceof di||ae instanceof kn&&(0===ae.code||1===ae.code)&&null),(0,Pe.h)(ae=>null!==ae),(0,We.q)(1)).subscribe(()=>{U()})})(()=>{U(!0),w=!0}),J.afterPreactivation=()=>(U(!0),w||ae.closed?(0,F.of)(void 0):ae),J.initialNavigation()}))}}]).\u0275providers:[]]}const Ia=new m.OlP("")},9681:(le,k,E)=>{E.d(k,{C6:()=>qr,Jn:()=>xr,KN:()=>Pn,Mq:()=>xn,Xd:()=>Ct,ZF:()=>ir,qX:()=>sn});var m=E(5861),M=E(4859),F=E(1877),z=E(2090),O=E(8766);class W{constructor(He){this.container=He}getPlatformInfoString(){return this.container.getProviders().map(yt=>{if(function ee(lt){return"VERSION"===lt.getComponent()?.type}(yt)){const Nt=yt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(yt=>yt).join(" ")}}const Q="@firebase/app",K="0.8.2",G=new F.Yd("@firebase/app"),Ft="[DEFAULT]",at={[Q]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,Sn=new Map;function qt(lt,He){try{lt.container.addComponent(He)}catch(yt){G.debug(`Component ${He.name} failed to register with FirebaseApp ${lt.name}`,yt)}}function Ct(lt){const He=lt.name;if(Sn.has(He))return G.debug(`There were multiple attempts to register component ${He}.`),!1;Sn.set(He,lt);for(const yt of dn.values())qt(yt,lt);return!0}function sn(lt,He){const yt=lt.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),lt.container.getProvider(He)}const pn=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rr{constructor(He,yt,Nt){this._isDeleted=!1,this._options=Object.assign({},He),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new M.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this.checkDestroyed(),this._automaticDataCollectionEnabled=He}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(He){this._isDeleted=He}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}const xr="9.12.1";function ir(lt,He={}){let yt=lt;"object"!=typeof He&&(He={name:He});const Nt=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},He),kt=Nt.name;if("string"!=typeof kt||!kt)throw pn.create("bad-app-name",{appName:String(kt)});if(yt||(yt=(0,z.aH)()),!yt)throw pn.create("no-options");const Vt=dn.get(kt);if(Vt){if((0,z.vZ)(yt,Vt.options)&&(0,z.vZ)(Nt,Vt.config))return Vt;throw pn.create("duplicate-app",{appName:kt})}const de=new M.H0(kt);for(const ge of Sn.values())de.addComponent(ge);const se=new rr(yt,Nt,de);return dn.set(kt,se),se}function xn(lt=Ft){const He=dn.get(lt);if(!He&&lt===Ft)return ir();if(!He)throw pn.create("no-app",{appName:lt});return He}function qr(){return Array.from(dn.values())}function Pn(lt,He,yt){var Nt;let kt=null!==(Nt=at[lt])&&void 0!==Nt?Nt:lt;yt&&(kt+=`-${yt}`);const Vt=kt.match(/\s|\//),de=He.match(/\s|\//);if(Vt||de){const se=[`Unable to register library "${kt}" with version "${He}":`];return Vt&&se.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Vt&&de&&se.push("and"),de&&se.push(`version name "${He}" contains illegal characters (whitespace or "/")`),void G.warn(se.join(" "))}Ct(new M.wA(`${kt}-version`,()=>({library:kt,version:He}),"VERSION"))}const Un="firebase-heartbeat-store";let En=null;function wn(){return En||(En=(0,O.X3)("firebase-heartbeat-database",1,{upgrade:(lt,He)=>{0===He&&lt.createObjectStore(Un)}}).catch(lt=>{throw pn.create("idb-open",{originalErrorMessage:lt.message})})),En}function St(){return(St=(0,m.Z)(function*(lt){var He;try{return(yield wn()).transaction(Un).objectStore(Un).get(mt(lt))}catch(yt){if(yt instanceof z.ZR)G.warn(yt.message);else{const Nt=pn.create("idb-get",{originalErrorMessage:null===(He=yt)||void 0===He?void 0:He.message});G.warn(Nt.message)}}})).apply(this,arguments)}function tn(lt,He){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(lt,He){var yt;try{const kt=(yield wn()).transaction(Un,"readwrite");return yield kt.objectStore(Un).put(He,mt(lt)),kt.done}catch(Nt){if(Nt instanceof z.ZR)G.warn(Nt.message);else{const kt=pn.create("idb-set",{originalErrorMessage:null===(yt=Nt)||void 0===yt?void 0:yt.message});G.warn(kt.message)}}})).apply(this,arguments)}function mt(lt){return`${lt.name}!${lt.options.appId}`}class sr{constructor(He){this.container=He,this._heartbeatsCache=null;const yt=this.container.getProvider("app").getImmediate();this._storage=new Xt(yt),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var He=this;return(0,m.Z)(function*(){const Nt=He.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=In();if(null===He._heartbeatsCache&&(He._heartbeatsCache=yield He._heartbeatsCachePromise),He._heartbeatsCache.lastSentHeartbeatDate!==kt&&!He._heartbeatsCache.heartbeats.some(Vt=>Vt.date===kt))return He._heartbeatsCache.heartbeats.push({date:kt,agent:Nt}),He._heartbeatsCache.heartbeats=He._heartbeatsCache.heartbeats.filter(Vt=>{const de=new Date(Vt.date).valueOf();return Date.now()-de<=2592e6}),He._storage.overwrite(He._heartbeatsCache)})()}getHeartbeatsHeader(){var He=this;return(0,m.Z)(function*(){if(null===He._heartbeatsCache&&(yield He._heartbeatsCachePromise),null===He._heartbeatsCache||0===He._heartbeatsCache.heartbeats.length)return"";const yt=In(),{heartbeatsToSend:Nt,unsentEntries:kt}=function Rr(lt,He=1024){const yt=[];let Nt=lt.slice();for(const kt of lt){const Vt=yt.find(de=>de.agent===kt.agent);if(Vt){if(Vt.dates.push(kt.date),bn(yt)>He){Vt.dates.pop();break}}else if(yt.push({agent:kt.agent,dates:[kt.date]}),bn(yt)>He){yt.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:yt,unsentEntries:Nt}}(He._heartbeatsCache.heartbeats),Vt=(0,z.L)(JSON.stringify({version:2,heartbeats:Nt}));return He._heartbeatsCache.lastSentHeartbeatDate=yt,kt.length>0?(He._heartbeatsCache.heartbeats=kt,yield He._storage.overwrite(He._heartbeatsCache)):(He._heartbeatsCache.heartbeats=[],He._storage.overwrite(He._heartbeatsCache)),Vt})()}}function In(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(He){this.app=He,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var He=this;return(0,m.Z)(function*(){return(yield He._canUseIndexedDBPromise)&&(yield function vt(lt){return St.apply(this,arguments)}(He.app))||{heartbeats:[]}})()}overwrite(He){var yt=this;return(0,m.Z)(function*(){var Nt;if(yield yt._canUseIndexedDBPromise){const Vt=yield yt.read();return tn(yt.app,{lastSentHeartbeatDate:null!==(Nt=He.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Vt.lastSentHeartbeatDate,heartbeats:He.heartbeats})}})()}add(He){var yt=this;return(0,m.Z)(function*(){var Nt;if(yield yt._canUseIndexedDBPromise){const Vt=yield yt.read();return tn(yt.app,{lastSentHeartbeatDate:null!==(Nt=He.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...He.heartbeats]})}})()}}function bn(lt){return(0,z.L)(JSON.stringify({version:2,heartbeats:lt})).length}!function Gn(lt){Ct(new M.wA("platform-logger",He=>new W(He),"PRIVATE")),Ct(new M.wA("heartbeat",He=>new sr(He),"PRIVATE")),Pn(Q,K,lt),Pn(Q,K,"esm2017"),Pn("fire-js","")}("")},4859:(le,k,E)=>{E.d(k,{H0:()=>Q,wA:()=>F});var m=E(5861),M=E(2090);class F{constructor(G,H,te){this.name=G,this.instanceFactory=H,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const z="[DEFAULT]";class O{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const te=new M.BH;if(this.instancesDeferred.set(H,te),this.isInitialized(H)||this.shouldAutoInitialize())try{const ye=this.getOrInitializeService({instanceIdentifier:H});ye&&te.resolve(ye)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const te=this.normalizeInstanceIdentifier(G?.identifier),ye=null!==(H=G?.optional)&&void 0!==H&&H;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(ve){if(ye)return null;throw ve}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ee(K){return"EAGER"===K.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:z})}catch{}for(const[H,te]of this.instancesDeferred.entries()){const ye=this.normalizeInstanceIdentifier(H);try{const ve=this.getOrInitializeService({instanceIdentifier:ye});te.resolve(ve)}catch{}}}}clearInstance(G=z){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,m.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...H.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=z){return this.instances.has(G)}getOptions(G=z){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ye=this.getOrInitializeService({instanceIdentifier:te,options:H});for(const[ve,me]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(ve)&&me.resolve(ye);return ye}onInit(G,H){var te;const ye=this.normalizeInstanceIdentifier(H),ve=null!==(te=this.onInitCallbacks.get(ye))&&void 0!==te?te:new Set;ve.add(G),this.onInitCallbacks.set(ye,ve);const me=this.instances.get(ye);return me&&G(me,ye),()=>{ve.delete(G)}}invokeOnInitCallbacks(G,H){const te=this.onInitCallbacks.get(H);if(te)for(const ye of te)try{ye(G,H)}catch{}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(K=G,K===z?void 0:K),options:H}),this.instances.set(G,te),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch{}var K;return te||null}normalizeInstanceIdentifier(G=z){return this.component?this.component.multipleInstances?G:z:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Q{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new O(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(le,k,E)=>{E.d(k,{Yd:()=>ee,in:()=>M});const m=[];var M=(()=>{return(G=M||(M={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",M;var G})();const F={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},z=M.INFO,O={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},W=(G,H,...te)=>{if(H<G.logLevel)return;const ye=(new Date).toISOString(),ve=O[H];if(!ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[ve](`[${ye}]  ${G.name}:`,...te)};class ee{constructor(H){this.name=H,this._logLevel=z,this._logHandler=W,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in M))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...H),this._logHandler(this,M.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...H),this._logHandler(this,M.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,M.INFO,...H),this._logHandler(this,M.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,M.WARN,...H),this._logHandler(this,M.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...H),this._logHandler(this,M.ERROR,...H)}}},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4650),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2997),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(k,E){if(this.action=k,this.timestamp=E,this.type=PERFORM_ACTION,typeof k.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(k){this.timestamp=k,this.type=RESET}}class Rollback{constructor(k){this.timestamp=k,this.type=ROLLBACK}}class Commit{constructor(k){this.timestamp=k,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(k){this.id=k,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(k,E,m=!0){this.start=k,this.end=E,this.active=m,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(k){this.index=k,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(k){this.actionId=k,this.type=JUMP_TO_ACTION}}class ImportState{constructor(k){this.nextLiftedState=k,this.type=IMPORT_STATE}}class LockChanges{constructor(k){this.status=k,this.type=LOCK_CHANGES}}class PauseRecording{constructor(k){this.status=k,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(le){const k={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},E="function"==typeof le?le():le,F=Object.assign({},k,{features:E.features||!!E.logOnly&&{pause:!0,export:!0,test:!0}||k.features},E);if(F.maxAge&&F.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${F.maxAge}`);return F}function difference(le,k){return le.filter(E=>k.indexOf(E)<0)}function unliftState(le){const{computedStates:k,currentStateIndex:E}=le;if(E>=k.length){const{state:M}=k[k.length-1];return M}const{state:m}=k[E];return m}function unliftAction(le){return le.actionsById[le.nextActionId-1]}function liftAction(le){return new PerformAction(le,+Date.now())}function sanitizeActions(le,k){return Object.keys(k).reduce((E,m)=>{const M=Number(m);return E[M]=sanitizeAction(le,k[M],M),E},{})}function sanitizeAction(le,k,E){return{...k,action:le(k.action,E)}}function sanitizeStates(le,k){return k.map((E,m)=>({state:sanitizeState(le,E.state,m),error:E.error}))}function sanitizeState(le,k,E){return le(k,E)}function shouldFilterActions(le){return le.predicate||le.actionsSafelist||le.actionsBlocklist}function filterLiftedState(le,k,E,m){const M=[],F={},z=[];return le.stagedActionIds.forEach((O,W)=>{const ee=le.actionsById[O];!ee||W&&isActionFiltered(le.computedStates[W],ee,k,E,m)||(F[O]=ee,M.push(O),z.push(le.computedStates[W]))}),{...le,stagedActionIds:M,actionsById:F,computedStates:z}}function isActionFiltered(le,k,E,m,M){const F=E&&!E(le,k.action),z=m&&!k.action.type.match(m.map(W=>escapeRegExp(W)).join("|")),O=M&&k.action.type.match(M.map(W=>escapeRegExp(W)).join("|"));return F||z||O}function escapeRegExp(le){return le.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class le extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return le.\u0275fac=function(){let k;return function(m){return(k||(k=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(le)))(m||le)}}(),le.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:le,factory:le.\u0275fac}),le})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(le,k,E){this.config=k,this.dispatcher=E,this.devtoolsExtension=le,this.createActionStreams()}notify(le,k){if(this.devtoolsExtension)if(le.type===PERFORM_ACTION){if(k.isLocked||k.isPaused)return;const E=unliftState(k);if(shouldFilterActions(this.config)&&isActionFiltered(E,le,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const m=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,E,k.currentStateIndex):E,M=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,le,k.nextActionId):le;this.sendToReduxDevtools(()=>this.extensionConnection.send(M,m))}else{const E={...k,stagedActionIds:k.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,k.actionsById):k.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,k.computedStates):k.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,E,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(le=>{const k=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=k,k.init(),k.subscribe(E=>le.next(E)),k.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const le=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),k=le.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(O=>O.type===ExtensionActionTypes.START)),E=le.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(O=>O.type===ExtensionActionTypes.STOP)),m=le.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(O=>O.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(O=>this.unwrapAction(O.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(O=>O.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(W=>W.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>O),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(O)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(O))),F=le.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(O=>O.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(O=>this.unwrapAction(O.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(E)),z=m.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(E));this.start$=k.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(E)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>F)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>z))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(le){const k={name:le.name,features:le.features,serialize:le.serialize,autoPause:le.autoPause??!1};return!1!==le.maxAge&&(k.maxAge=le.maxAge),k}sendToReduxDevtools(le){try{le()}catch(k){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",k)}}}return DevtoolsExtension.\u0275fac=function le(k){return new(k||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(le,k,E,m,M){if(m)return{state:E,error:"Interrupted by an error up the chain"};let z,F=E;try{F=le(E,k)}catch(O){z=O.toString(),M.handleError(O)}return{state:F,error:z}}function recomputeStates(le,k,E,m,M,F,z,O,W){if(k>=le.length&&le.length===F.length)return le;const ee=le.slice(0,k),Q=F.length-(W?1:0);for(let K=k;K<Q;K++){const G=F[K],H=M[G].action,te=ee[K-1],ye=te?te.state:m,ve=te?te.error:void 0,Ue=z.indexOf(G)>-1?te:computeNextEntry(E,H,ye,ve,O);ee.push(Ue)}return W&&ee.push(le[le.length-1]),ee}function liftInitialState(le,k){return{monitorState:k(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:le,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(le,k,E,m,M={}){return F=>(z,O)=>{let{monitorState:W,actionsById:ee,nextActionId:Q,stagedActionIds:K,skippedActionIds:G,committedState:H,currentStateIndex:te,computedStates:ye,isLocked:ve,isPaused:me}=z||k;function Ue(We){let ot=We,Pe=K.slice(1,ot+1);for(let Se=0;Se<Pe.length;Se++){if(ye[Se+1].error){ot=Se,Pe=K.slice(1,ot+1);break}delete ee[Pe[Se]]}G=G.filter(Se=>-1===Pe.indexOf(Se)),K=[0,...K.slice(ot+1)],H=ye[ot].state,ye=ye.slice(ot),te=te>ot?te-ot:0}function we(){ee={0:liftAction(INIT_ACTION)},Q=1,K=[0],G=[],H=ye[te].state,te=0,ye=[]}z||(ee=Object.create(ee));let Ee=0;switch(O.type){case LOCK_CHANGES:ve=O.status,Ee=1/0;break;case PAUSE_RECORDING:me=O.status,me?(K=[...K,Q],ee[Q]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),Q++,Ee=K.length-1,ye=ye.concat(ye[ye.length-1]),te===K.length-2&&te++,Ee=1/0):we();break;case RESET:ee={0:liftAction(INIT_ACTION)},Q=1,K=[0],G=[],H=le,te=0,ye=[];break;case COMMIT:we();break;case ROLLBACK:ee={0:liftAction(INIT_ACTION)},Q=1,K=[0],G=[],te=0,ye=[];break;case TOGGLE_ACTION:{const{id:We}=O;G=-1===G.indexOf(We)?[We,...G]:G.filter(Pe=>Pe!==We),Ee=K.indexOf(We);break}case SET_ACTIONS_ACTIVE:{const{start:We,end:ot,active:Pe}=O,Se=[];for(let Le=We;Le<ot;Le++)Se.push(Le);G=Pe?difference(G,Se):[...G,...Se],Ee=K.indexOf(We);break}case JUMP_TO_STATE:te=O.index,Ee=1/0;break;case JUMP_TO_ACTION:{const We=K.indexOf(O.actionId);-1!==We&&(te=We),Ee=1/0;break}case SWEEP:K=difference(K,G),G=[],te=Math.min(te,K.length-1);break;case PERFORM_ACTION:{if(ve)return z||k;if(me||z&&isActionFiltered(z.computedStates[te],O,M.predicate,M.actionsSafelist,M.actionsBlocklist)){const ot=ye[ye.length-1];ye=[...ye.slice(0,-1),computeNextEntry(F,O.action,ot.state,ot.error,E)],Ee=1/0;break}M.maxAge&&K.length===M.maxAge&&Ue(1),te===K.length-1&&te++;const We=Q++;ee[We]=O,K=[...K,We],Ee=K.length-1;break}case IMPORT_STATE:({monitorState:W,actionsById:ee,nextActionId:Q,stagedActionIds:K,skippedActionIds:G,committedState:H,currentStateIndex:te,computedStates:ye,isLocked:ve,isPaused:me}=O.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:Ee=0,M.maxAge&&K.length>M.maxAge&&(ye=recomputeStates(ye,Ee,F,H,ee,K,G,E,me),Ue(K.length-M.maxAge),Ee=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(ye.filter(ot=>ot.error).length>0)Ee=0,M.maxAge&&K.length>M.maxAge&&(ye=recomputeStates(ye,Ee,F,H,ee,K,G,E,me),Ue(K.length-M.maxAge),Ee=1/0);else{if(!me&&!ve){te===K.length-1&&te++;const ot=Q++;ee[ot]=new PerformAction(O,+Date.now()),K=[...K,ot],Ee=K.length-1,ye=recomputeStates(ye,Ee,F,H,ee,K,G,E,me)}ye=ye.map(ot=>({...ot,state:F(ot.state,RECOMPUTE_ACTION)})),te=K.length-1,M.maxAge&&K.length>M.maxAge&&Ue(K.length-M.maxAge),Ee=1/0}break;default:Ee=1/0}return ye=recomputeStates(ye,Ee,F,H,ee,K,G,E,me),W=m(W,O),{monitorState:W,actionsById:ee,nextActionId:Q,stagedActionIds:K,skippedActionIds:G,committedState:H,currentStateIndex:te,computedStates:ye,isLocked:ve,isPaused:me}}}let StoreDevtools=(()=>{class le{constructor(E,m,M,F,z,O,W,ee){const Q=liftInitialState(W,ee.monitor),K=liftReducerWith(W,Q,O,ee.monitor,ee),G=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(m.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),F.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),E,F.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),H=M.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(K)),te=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),ye=G.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(H),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:we},[Ee,We])=>{let ot=We(we,Ee);return Ee.type!==PERFORM_ACTION&&shouldFilterActions(ee)&&(ot=filterLiftedState(ot,ee.predicate,ee.actionsSafelist,ee.actionsBlocklist)),F.notify(Ee,ot),{state:ot,action:Ee}},{state:Q,action:null})).subscribe(({state:we,action:Ee})=>{te.next(we),Ee.type===PERFORM_ACTION&&z.next(Ee.action)}),ve=F.start$.subscribe(()=>{this.refresh()}),me=te.asObservable(),Ue=me.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=ve,this.stateSubscription=ye,this.dispatcher=E,this.liftedState=me,this.state=Ue}dispatch(E){this.dispatcher.next(E)}next(E){this.dispatcher.next(E)}error(E){}complete(){}performAction(E){this.dispatch(new PerformAction(E,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(E){this.dispatch(new ToggleAction(E))}jumpToAction(E){this.dispatch(new JumpToAction(E))}jumpToState(E){this.dispatch(new JumpToState(E))}importState(E){this.dispatch(new ImportState(E))}lockChanges(E){this.dispatch(new LockChanges(E))}pauseRecording(E){this.dispatch(new PauseRecording(E))}}return le.\u0275fac=function(E){return new(E||le)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},le.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:le,factory:le.\u0275fac}),le})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(le,k){return Boolean(le)||k.monitor!==noMonitor}function createReduxDevtoolsExtension(){const le="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[le]<"u"?window[le]:null}function provideStoreDevtools(le={}){return{\u0275providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:le},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}function createStateObservable(le){return le.state}let StoreDevtoolsModule=(()=>{class le{static instrument(E={}){return{ngModule:le,providers:[...provideStoreDevtools(E).\u0275providers]}}}return le.\u0275fac=function(E){return new(E||le)},le.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:le}),le.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),le})()},2997:(le,k,E)=>{E.d(k,{UO:()=>pe,qg:()=>Ke,Y6:()=>Ze,mK:()=>Yr,n$:()=>dr,Y$:()=>vt,FR:()=>tn,yh:()=>bt,CK:()=>gs,Aw:()=>No,cr:()=>Er,wb:()=>Un,qC:()=>Pn,PH:()=>Ee,ZF:()=>be,Lq:()=>oe,P1:()=>ue,on:()=>Ps,Ky:()=>We});var m=E(4650),M=E(1135),F=E(9751),z=E(7579),O=E(233),W=E(5363),ee=E(1365),Q=E(5026),K=E(4004),H=E(4671),te=E(4482),ye=E(5403);function me(N,$){return N===$}const Ue={};function Ee(N,$){if(Ue[N]=(Ue[N]||0)+1,"function"==typeof $)return Pe(N,(...he)=>({...$(...he),type:N}));switch($?$._as:"empty"){case"empty":return Pe(N,()=>({type:N}));case"props":return Pe(N,he=>({...he,type:N}));default:throw new Error("Unexpected config.")}}function We(){return{_as:"props",_p:void 0}}function Pe(N,$){return Object.defineProperty($,"type",{value:N,writable:!1})}const Ke="@ngrx/store/init";let pe=(()=>{class N extends M.X{constructor(){super({type:Ke})}next(q){if("function"==typeof q)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof q>"u")throw new TypeError("Actions must be objects");if(typeof q.type>"u")throw new TypeError("Actions must have a type property");super.next(q)}complete(){}ngOnDestroy(){super.complete()}}return N.\u0275fac=function(q){return new(q||N)},N.\u0275prov=m.Yz7({token:N,factory:N.\u0275fac}),N})();const ne=[pe],Ae=new m.OlP("@ngrx/store Internal Root Guard"),_e=new m.OlP("@ngrx/store Internal Initial State"),Ze=new m.OlP("@ngrx/store Initial State"),Xe=new m.OlP("@ngrx/store Reducer Factory"),wt=new m.OlP("@ngrx/store Internal Reducer Factory Provider"),rn=new m.OlP("@ngrx/store Initial Reducers"),Ft=new m.OlP("@ngrx/store Internal Initial Reducers"),at=new m.OlP("@ngrx/store Store Features"),dn=new m.OlP("@ngrx/store Internal Store Reducers"),Sn=new m.OlP("@ngrx/store Internal Feature Reducers"),qt=new m.OlP("@ngrx/store Internal Feature Configs"),Qt=new m.OlP("@ngrx/store Internal Store Features"),Ct=new m.OlP("@ngrx/store Internal Feature Reducers Token"),sn=new m.OlP("@ngrx/store Feature Reducers"),Br=new m.OlP("@ngrx/store User Provided Meta Reducers"),yr=new m.OlP("@ngrx/store Meta Reducers"),hn=new m.OlP("@ngrx/store Internal Resolved Meta Reducers"),pn=new m.OlP("@ngrx/store User Runtime Checks Config"),rr=new m.OlP("@ngrx/store Internal User Runtime Checks Config"),xr=new m.OlP("@ngrx/store Internal Runtime Checks"),ir=new m.OlP("@ngrx/store Check if Action types are unique");function gn(N,$={}){const q=Object.keys(N),he={};for(let $e=0;$e<q.length;$e++){const gt=q[$e];"function"==typeof N[gt]&&(he[gt]=N[gt])}const Re=Object.keys(he);return function(gt,Bt){gt=void 0===gt?$:gt;let Mt=!1;const yn={};for(let un=0;un<Re.length;un++){const nr=Re[un],Rn=gt[nr],Pr=(0,he[nr])(Rn,Bt);yn[nr]=Pr,Mt=Mt||Pr!==Rn}return Mt?yn:gt}}function Pn(...N){return function($){if(0===N.length)return $;const q=N[N.length-1];return N.slice(0,-1).reduceRight((Re,$e)=>$e(Re),q($))}}function Ii(N,$){return Array.isArray($)&&$.length>0&&(N=Pn.apply(null,[...$,N])),(q,he)=>{const Re=N(q);return($e,gt)=>Re($e=void 0===$e?he:$e,gt)}}new m.OlP("@ngrx/store Root Store Provider"),new m.OlP("@ngrx/store Feature State Provider");class dr extends F.y{}class Yr extends pe{}const Un="@ngrx/store/update-reducers";let En=(()=>{class N extends M.X{constructor(q,he,Re,$e){super($e(Re,he)),this.dispatcher=q,this.initialState=he,this.reducers=Re,this.reducerFactory=$e}get currentReducers(){return this.reducers}addFeature(q){this.addFeatures([q])}addFeatures(q){const he=q.reduce((Re,{reducers:$e,reducerFactory:gt,metaReducers:Bt,initialState:Mt,key:yn})=>{const un="function"==typeof $e?function qn(N){const $=Array.isArray(N)&&N.length>0?Pn(...N):q=>q;return(q,he)=>(q=$(q),(Re,$e)=>q(Re=void 0===Re?he:Re,$e))}(Bt)($e,Mt):Ii(gt,Bt)($e,Mt);return Re[yn]=un,Re},{});this.addReducers(he)}removeFeature(q){this.removeFeatures([q])}removeFeatures(q){this.removeReducers(q.map(he=>he.key))}addReducer(q,he){this.addReducers({[q]:he})}addReducers(q){this.reducers={...this.reducers,...q},this.updateReducers(Object.keys(q))}removeReducer(q){this.removeReducers([q])}removeReducers(q){q.forEach(he=>{this.reducers=function rt(N,$){return Object.keys(N).filter(q=>q!==$).reduce((q,he)=>Object.assign(q,{[he]:N[he]}),{})}(this.reducers,he)}),this.updateReducers(q)}updateReducers(q){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Un,features:q})}ngOnDestroy(){this.complete()}}return N.\u0275fac=function(q){return new(q||N)(m.LFG(Yr),m.LFG(Ze),m.LFG(rn),m.LFG(Xe))},N.\u0275prov=m.Yz7({token:N,factory:N.\u0275fac}),N})();const wn=[En,{provide:dr,useExisting:En},{provide:Yr,useExisting:pe}];let vt=(()=>{class N extends z.x{ngOnDestroy(){this.complete()}}return N.\u0275fac=function(){let $;return function(he){return($||($=m.n5z(N)))(he||N)}}(),N.\u0275prov=m.Yz7({token:N,factory:N.\u0275fac}),N})();const St=[vt];class tn extends F.y{}let Jn=(()=>{class N extends M.X{constructor(q,he,Re,$e){super($e);const yn=q.pipe((0,W.Q)(O.N)).pipe((0,ee.M)(he)).pipe((0,Q.R)(mt,{state:$e}));this.stateSubscription=yn.subscribe(({state:un,action:nr})=>{this.next(un),Re.next(nr)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return N.INIT=Ke,N.\u0275fac=function(q){return new(q||N)(m.LFG(pe),m.LFG(dr),m.LFG(vt),m.LFG(Ze))},N.\u0275prov=m.Yz7({token:N,factory:N.\u0275fac}),N})();function mt(N={state:void 0},[$,q]){const{state:he}=N;return{state:q(he,$),action:$}}const er=[Jn,{provide:tn,useExisting:Jn}];let bt=(()=>{class N extends F.y{constructor(q,he,Re){super(),this.actionsObserver=he,this.reducerManager=Re,this.source=q}select(q,...he){return In.call(null,q,...he)(this)}lift(q){const he=new N(this,this.actionsObserver,this.reducerManager);return he.operator=q,he}dispatch(q){this.actionsObserver.next(q)}next(q){this.actionsObserver.next(q)}error(q){this.actionsObserver.error(q)}complete(){this.actionsObserver.complete()}addReducer(q,he){this.reducerManager.addReducer(q,he)}removeReducer(q){this.reducerManager.removeReducer(q)}}return N.\u0275fac=function(q){return new(q||N)(m.LFG(tn),m.LFG(pe),m.LFG(En))},N.\u0275prov=m.Yz7({token:N,factory:N.\u0275fac}),N})();const sr=[bt];function In(N,$,...q){return function(Re){let $e;if("string"==typeof N){const gt=[$,...q].filter(Boolean);$e=Re.pipe(function G(...N){const $=N.length;if(0===$)throw new Error("list of properties cannot be empty.");return(0,K.U)(q=>{let he=q;for(let Re=0;Re<$;Re++){const $e=he?.[N[Re]];if(!(typeof $e<"u"))return;he=$e}return he})}(N,...gt))}else{if("function"!=typeof N)throw new TypeError(`Unexpected type '${typeof N}' in select operator, expected 'string' or 'function'`);$e=Re.pipe((0,K.U)(gt=>N(gt,$)))}return $e.pipe(function ve(N,$=H.y){return N=N??me,(0,te.e)((q,he)=>{let Re,$e=!0;q.subscribe((0,ye.x)(he,gt=>{const Bt=$(gt);($e||!N(Re,Bt))&&($e=!1,Re=Bt,he.next(gt))}))})}())}}const Rr="https://ngrx.io/guide/store/configuration/runtime-checks";function Xt(N){return void 0===N}function bn(N){return null===N}function Gn(N){return Array.isArray(N)}function Nt(N){return"object"==typeof N&&null!==N}function de(N){return"function"==typeof N}function Dt(N,$){return N===$}function Jt(N,$,q){for(let he=0;he<N.length;he++)if(!q(N[he],$[he]))return!0;return!1}function nn(N,$=Dt,q=Dt){let $e,he=null,Re=null;return{memoized:function yn(){if(void 0!==$e)return $e.result;if(!he)return Re=N.apply(null,arguments),he=arguments,Re;if(!Jt(arguments,he,$))return Re;const un=N.apply(null,arguments);return he=arguments,q(Re,un)?Re:(Re=un,un)},reset:function gt(){he=null,Re=null},setResult:function Bt(un){$e={result:un}},clearResult:function Mt(){$e=void 0}}}function ue(...N){return function Z(N,$={stateFn:X}){return function(...q){let he=q;if(Array.isArray(he[0])){const[un,...nr]=he;he=[...un,...nr]}const Re=he.slice(0,he.length-1),$e=he[he.length-1],gt=Re.filter(un=>un.release&&"function"==typeof un.release),Bt=N(function(...un){return $e.apply(null,un)}),Mt=nn(function(un,nr){return $.stateFn.apply(null,[un,Re,nr,Bt])});return Object.assign(Mt.memoized,{release:function yn(){Mt.reset(),Bt.reset(),gt.forEach(un=>un.release())},projector:Bt.memoized,setResult:Mt.setResult,clearResult:Mt.clearResult})}}(nn)(...N)}function X(N,$,q,he){if(void 0===q){const $e=$.map(gt=>gt(N));return he.memoized.apply(null,$e)}const Re=$.map($e=>$e(N,q));return he.memoized.apply(null,[...Re,q])}function be(N){return ue($=>{const q=$[N];return(0,m.X6Q)()&&!(N in $)&&console.warn(`@ngrx/store: The feature name "${N}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${N}', ...) or StoreModule.forFeature('${N}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),q},$=>$)}function Zt(N,$){return $ instanceof m.OlP?N.get($):$}function or(N,$,q){return q.map((he,Re)=>{if($[Re]instanceof m.OlP){const $e=N.get($[Re]);return{key:he.key,reducerFactory:$e.reducerFactory?$e.reducerFactory:gn,metaReducers:$e.metaReducers?$e.metaReducers:[],initialState:$e.initialState}}return he})}function ui(N,$){return $.map(he=>he instanceof m.OlP?N.get(he):he)}function Pt(N){return"function"==typeof N?N():N}function Zr(N,$){return N.concat($)}function Qr(N){if(N)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Nn(N){Object.freeze(N);const $=de(N);return Object.getOwnPropertyNames(N).forEach(q=>{if(!q.startsWith("\u0275")&&function ge(N,$){return Object.prototype.hasOwnProperty.call(N,$)}(N,q)&&(!$||"caller"!==q&&"callee"!==q&&"arguments"!==q)){const he=N[q];(Nt(he)||de(he))&&!Object.isFrozen(he)&&Nn(he)}}),N}function wr(N,$=[]){return(Xt(N)||bn(N))&&0===$.length?{path:["root"],value:N}:Object.keys(N).reduce((he,Re)=>{if(he)return he;const $e=N[Re];return function se(N){return de(N)&&N.hasOwnProperty("\u0275cmp")}($e)?he:!(Xt($e)||bn($e)||function yt(N){return"number"==typeof N}($e)||function He(N){return"boolean"==typeof N}($e)||function lt(N){return"string"==typeof N}($e)||Gn($e))&&(function Vt(N){if(!function kt(N){return Nt(N)&&!Gn(N)}(N))return!1;const $=Object.getPrototypeOf(N);return $===Object.prototype||null===$}($e)?wr($e,[...$,Re]):{path:[...$,Re],value:$e})},!1)}function Vr(N,$){if(!1===N)return;const q=N.path.join("."),he=new Error(`Detected unserializable ${$} at "${q}". ${Rr}#strict${$}serializability`);throw he.value=N.value,he.unserializablePath=q,he}function tr(N){return(0,m.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...N}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Qs({strictActionSerializability:N,strictStateSerializability:$}){return q=>N||$?function Yn(N,$){return function(q,he){$.action(he)&&Vr(wr(he),"action");const Re=N(q,he);return $.state()&&Vr(wr(Re),"state"),Re}}(q,{action:he=>N&&!ci(he),state:()=>$}):q}function Dn({strictActionImmutability:N,strictStateImmutability:$}){return q=>N||$?function ps(N,$){return function(q,he){const Re=$.action(he)?Nn(he):he,$e=N(q,Re);return $.state()?Nn($e):$e}}(q,{action:he=>N&&!ci(he),state:()=>$}):q}function ci(N){return N.type.startsWith("@ngrx")}function rs({strictActionWithinNgZone:N}){return $=>N?function Or(N,$){return function(q,he){if($.action(he)&&!m.R0b.isInAngularZone())throw new Error(`Action '${he.type}' running outside NgZone. ${Rr}#strictactionwithinngzone`);return N(q,he)}}($,{action:q=>N&&!ci(q)}):$}function Di(N){return[{provide:rr,useValue:N},{provide:pn,useFactory:qi,deps:[rr]},{provide:xr,deps:[pn],useFactory:tr},{provide:yr,multi:!0,deps:[xr],useFactory:Dn},{provide:yr,multi:!0,deps:[xr],useFactory:Qs},{provide:yr,multi:!0,deps:[xr],useFactory:rs}]}function li(){return[{provide:ir,multi:!0,deps:[xr],useFactory:wi}]}function qi(N){return N}function wi(N){if(!N.strictActionTypeUniqueness)return;const $=Object.entries(Ue).filter(([,q])=>q>1).map(([q])=>q);if($.length)throw new Error(`Action types are registered more than once, ${$.map(q=>`"${q}"`).join(", ")}. ${Rr}#strictactiontypeuniqueness`)}function $n(N,$){return[{provide:Ae,useFactory:Qr,deps:[[bt,new m.FiY,new m.tp0]]},{provide:_e,useValue:$.initialState},{provide:Ze,useFactory:Pt,deps:[_e]},{provide:Ft,useValue:N},{provide:dn,useExisting:N instanceof m.OlP?N:Ft},{provide:rn,deps:[m.zs3,Ft,[new m.tBr(dn)]],useFactory:Zt},{provide:Br,useValue:$.metaReducers?$.metaReducers:[]},{provide:hn,deps:[yr,Br],useFactory:Zr},{provide:wt,useValue:$.reducerFactory?$.reducerFactory:gn},{provide:Xe,deps:[wt,hn],useFactory:Ii},ne,wn,St,er,sr,Di($.runtimeChecks),li()]}function Zi(N,$,q={}){return[{provide:qt,multi:!0,useValue:N instanceof Object?{}:q},{provide:at,multi:!0,useValue:{key:N instanceof Object?N.name:N,reducerFactory:q instanceof m.OlP||!q.reducerFactory?gn:q.reducerFactory,metaReducers:q instanceof m.OlP||!q.metaReducers?[]:q.metaReducers,initialState:q instanceof m.OlP||!q.initialState?void 0:q.initialState}},{provide:Qt,deps:[m.zs3,qt,at],useFactory:or},{provide:Sn,multi:!0,useValue:N instanceof Object?N.reducer:$},{provide:Ct,multi:!0,useExisting:$ instanceof m.OlP?$:Sn},{provide:sn,multi:!0,deps:[m.zs3,Sn,[new m.tBr(Ct)]],useFactory:ui},li()]}let Er=(()=>{class N{constructor(q,he,Re,$e,gt,Bt){}}return N.\u0275fac=function(q){return new(q||N)(m.LFG(pe),m.LFG(dr),m.LFG(vt),m.LFG(bt),m.LFG(Ae,8),m.LFG(ir,8))},N.\u0275mod=m.oAB({type:N}),N.\u0275inj=m.cJS({}),N})(),gs=(()=>{class N{constructor(q,he,Re,$e,gt){this.features=q,this.featureReducers=he,this.reducerManager=Re;const Bt=q.map((Mt,yn)=>{const nr=he.shift()[yn];return{...Mt,reducers:nr,initialState:Pt(Mt.initialState)}});Re.addFeatures(Bt)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return N.\u0275fac=function(q){return new(q||N)(m.LFG(Qt),m.LFG(sn),m.LFG(En),m.LFG(Er),m.LFG(ir,8))},N.\u0275mod=m.oAB({type:N}),N.\u0275inj=m.cJS({}),N})(),No=(()=>{class N{static forRoot(q,he={}){return{ngModule:Er,providers:[...$n(q,he)]}}static forFeature(q,he,Re={}){return{ngModule:gs,providers:[...Zi(q,he,Re)]}}}return N.\u0275fac=function(q){return new(q||N)},N.\u0275mod=m.oAB({type:N}),N.\u0275inj=m.cJS({}),N})();function Ps(...N){return{reducer:N.pop(),types:N.map(he=>he.type)}}function oe(N,...$){const q=new Map;for(const he of $)for(const Re of he.types){const $e=q.get(Re);q.set(Re,$e?(Bt,Mt)=>he.reducer($e(Bt,Mt),Mt):he.reducer)}return function(he=N,Re){const $e=q.get(Re.type);return $e?$e(he,Re):he}}},8766:(le,k,E)=>{E.d(k,{Lj:()=>Pe,X3:()=>ot});var m=E(5861);let F,z;const ee=new WeakMap,Q=new WeakMap,K=new WeakMap,G=new WeakMap,H=new WeakMap;let ve={get(Be,Ke,pe){if(Be instanceof IDBTransaction){if("done"===Ke)return Q.get(Be);if("objectStoreNames"===Ke)return Be.objectStoreNames||K.get(Be);if("store"===Ke)return pe.objectStoreNames[1]?void 0:pe.objectStore(pe.objectStoreNames[0])}return Ee(Be[Ke])},set:(Be,Ke,pe)=>(Be[Ke]=pe,!0),has:(Be,Ke)=>Be instanceof IDBTransaction&&("done"===Ke||"store"===Ke)||Ke in Be};function we(Be){return"function"==typeof Be?function Ue(Be){return Be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Be)?function(...Ke){return Be.apply(We(this),Ke),Ee(ee.get(this))}:function(...Ke){return Ee(Be.apply(We(this),Ke))}:function(Ke,...pe){const ne=Be.call(We(this),Ke,...pe);return K.set(ne,Ke.sort?Ke.sort():[Ke]),Ee(ne)}}(Be):(Be instanceof IDBTransaction&&function ye(Be){if(Q.has(Be))return;const Ke=new Promise((pe,ne)=>{const Ae=()=>{Be.removeEventListener("complete",_e),Be.removeEventListener("error",Ze),Be.removeEventListener("abort",Ze)},_e=()=>{pe(),Ae()},Ze=()=>{ne(Be.error||new DOMException("AbortError","AbortError")),Ae()};Be.addEventListener("complete",_e),Be.addEventListener("error",Ze),Be.addEventListener("abort",Ze)});Q.set(Be,Ke)}(Be),((Be,Ke)=>Ke.some(pe=>Be instanceof pe))(Be,function O(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Be,ve):Be)}function Ee(Be){if(Be instanceof IDBRequest)return function te(Be){const Ke=new Promise((pe,ne)=>{const Ae=()=>{Be.removeEventListener("success",_e),Be.removeEventListener("error",Ze)},_e=()=>{pe(Ee(Be.result)),Ae()},Ze=()=>{ne(Be.error),Ae()};Be.addEventListener("success",_e),Be.addEventListener("error",Ze)});return Ke.then(pe=>{pe instanceof IDBCursor&&ee.set(pe,Be)}).catch(()=>{}),H.set(Ke,Be),Ke}(Be);if(G.has(Be))return G.get(Be);const Ke=we(Be);return Ke!==Be&&(G.set(Be,Ke),H.set(Ke,Be)),Ke}const We=Be=>H.get(Be);function ot(Be,Ke,{blocked:pe,upgrade:ne,blocking:Ae,terminated:_e}={}){const Ze=indexedDB.open(Be,Ke),Xe=Ee(Ze);return ne&&Ze.addEventListener("upgradeneeded",wt=>{ne(Ee(Ze.result),wt.oldVersion,wt.newVersion,Ee(Ze.transaction))}),pe&&Ze.addEventListener("blocked",()=>pe()),Xe.then(wt=>{_e&&wt.addEventListener("close",()=>_e()),Ae&&wt.addEventListener("versionchange",()=>Ae())}).catch(()=>{}),Xe}function Pe(Be,{blocked:Ke}={}){const pe=indexedDB.deleteDatabase(Be);return Ke&&pe.addEventListener("blocked",()=>Ke()),Ee(pe).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],nt=new Map;function _t(Be,Ke){if(!(Be instanceof IDBDatabase)||Ke in Be||"string"!=typeof Ke)return;if(nt.get(Ke))return nt.get(Ke);const pe=Ke.replace(/FromIndex$/,""),ne=Ke!==pe,Ae=Le.includes(pe);if(!(pe in(ne?IDBIndex:IDBObjectStore).prototype)||!Ae&&!Se.includes(pe))return;const _e=function(){var Ze=(0,m.Z)(function*(Xe,...wt){const rn=this.transaction(Xe,Ae?"readwrite":"readonly");let Ft=rn.store;return ne&&(Ft=Ft.index(wt.shift())),(yield Promise.all([Ft[pe](...wt),Ae&&rn.done]))[0]});return function(wt){return Ze.apply(this,arguments)}}();return nt.set(Ke,_e),_e}!function me(Be){ve=Be(ve)}(Be=>({...Be,get:(Ke,pe,ne)=>_t(Ke,pe)||Be.get(Ke,pe,ne),has:(Ke,pe)=>!!_t(Ke,pe)||Be.has(Ke,pe)}))},5861:(le,k,E)=>{function m(F,z,O,W,ee,Q,K){try{var G=F[Q](K),H=G.value}catch(te){return void O(te)}G.done?z(H):Promise.resolve(H).then(W,ee)}function M(F){return function(){var z=this,O=arguments;return new Promise(function(W,ee){var Q=F.apply(z,O);function K(H){m(Q,W,ee,K,G,"next",H)}function G(H){m(Q,W,ee,K,G,"throw",H)}K(void 0)})}}E.d(k,{Z:()=>M})}},le=>{le(le.s=8811)}]);